import{d as U,y as j,f as M,r as x,q,h as g,c as L,e,w as a,u as o,aP as O,a as l,t as i,s as n,i as u,R as H,v as I,C as K,aQ as Q,a7 as W,b$ as Y,aM as A,aN as G,K as J,L as X,E as Z,M as ee,ac as te,ad as ae,W as oe,Y as le}from"./index-0e396751.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                  */import"./el-form-item-4ed993c7.js";/* empty css               *//* empty css               *//* empty css                     *//* empty css                *//* empty css                   *//* empty css                       */import{i as se,j as ne}from"./marketing-c0187315.js";const re={class:"main-container"},ie={class:"statistic-card"},ce={class:"statistic-footer"},pe={class:"footer-item text-[14px] text-[#666]"},de={class:"statistic-card"},me={class:"statistic-footer"},ue={class:"footer-item text-[14px] text-[#666]"},_e={class:"statistic-card"},fe={class:"statistic-footer"},ve={class:"footer-item text-[14px] text-[#666]"},be={class:"mt-[10px]"},xe={class:"flex flex-col"},ge={class:"text-[12px] mt-[5px]"},he={class:"text-[12px] mt-[5px]"},ye={class:"mt-[16px] flex justify-end"},We=U({__name:"collection",setup(Ce){const h=j(),y=M(),N=h.meta.title,P=()=>{y.push("/shop/marketing/coupon/list")},C=parseInt(h.query.id),k=x(!1),s=q({page:1,limit:10,total:0,loading:!1,data:[],searchParam:{keywords:""}}),w=x(),d=x([]),m=()=>{s.loading=!0,se({page:s.page,limit:s.limit,id:C,...s.searchParam}).then(c=>{s.loading=!1,s.data=c.data.data,s.total=c.data.total}).catch(()=>{s.loading=!1}),ne(C).then(c=>{d.value=c.data,k.value=!1}).catch(()=>{k.value=!1})};m();const R=c=>{y.push("/shop/order/detail?order_id="+c.trade_id)},T=c=>{c&&(c.resetFields(),m())};return(c,r)=>{const V=Q,_=W,f=Y,v=A,z=G,B=J,E=X,b=Z,F=ee,p=te,$=ae,D=oe,S=le;return g(),L("div",re,[e(_,{class:"card !border-none",shadow:"never"},{default:a(()=>[e(V,{content:o(N),icon:o(O),onBack:r[0]||(r[0]=t=>P())},null,8,["content","icon"])]),_:1}),e(_,{class:"box-card mt-[15px] !border-none",shadow:"never"},{default:a(()=>[l("div",null,[e(_,{class:"box-card !border-none !px-[35px]",shadow:"never"},{default:a(()=>[e(z,{class:"flex"},{default:a(()=>[e(v,{span:8,class:"min-w-[100px]"},{default:a(()=>[l("div",ie,[e(f,{value:d.value.receive_count?Number.parseInt(d.value.receive_count):"0"},null,8,["value"]),l("div",ce,[l("div",pe,[l("span",null,i(o(n)("receiveCount")),1)])])])]),_:1}),e(v,{span:8,class:"min-w-[100px]"},{default:a(()=>[l("div",de,[e(f,{value:d.value.receive_use_count?Number.parseInt(d.value.receive_use_count):"0"},null,8,["value"]),l("div",me,[l("div",ue,[l("span",null,i(o(n)("receiveUseCount")),1)])])])]),_:1}),e(v,{span:8,class:"min-w-[100px]"},{default:a(()=>[l("div",_e,[e(f,{value:d.value.receive_expire_count?Number.parseInt(d.value.receive_expire_count):"0"},null,8,["value"]),l("div",fe,[l("div",ve,[l("span",null,i(o(n)("receiveExpireCount")),1)])])])]),_:1})]),_:1})]),_:1})]),l("div",null,[e(_,{class:"box-card !border-none mb-[10px] table-search-wrap",shadow:"never"},{default:a(()=>[e(F,{inline:!0,model:s.searchParam,ref_key:"searchFormRef",ref:w},{default:a(()=>[e(E,{label:o(n)("memberInfo"),prop:"keywords"},{default:a(()=>[e(B,{modelValue:s.searchParam.keywords,"onUpdate:modelValue":r[1]||(r[1]=t=>s.searchParam.keywords=t),modelModifiers:{trim:!0},class:"w-[240px]",placeholder:o(n)("memberInfoPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(E,null,{default:a(()=>[e(b,{type:"primary",onClick:r[2]||(r[2]=t=>m())},{default:a(()=>[u(i(o(n)("search")),1)]),_:1}),e(b,{onClick:r[3]||(r[3]=t=>T(w.value))},{default:a(()=>[u(i(o(n)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l("div",be,[H((g(),I($,{data:s.data,ref:"tableRef",size:"large"},{empty:a(()=>[l("span",null,i(s.loading?"":o(n)("emptyData")),1)]),default:a(()=>[e(p,{prop:"title",label:o(n)("title")},null,8,["label"]),e(p,{label:o(n)("userName")},{default:a(({row:t})=>[l("div",xe,[l("span",ge,i(t.member.nickname),1),l("span",he,i(t.member.mobile),1)])]),_:1},8,["label"]),e(p,{prop:"receive_type_name",label:o(n)("receiveType")},null,8,["label"]),e(p,{prop:"create_time",label:o(n)("createTime")},null,8,["label"]),e(p,{prop:"expire_time",label:o(n)("expireTime")},null,8,["label"]),e(p,{prop:"status_name",label:o(n)("status")},null,8,["label"]),e(p,{label:o(n)("useTime")},{default:a(({row:t})=>[u(i(t.use_time||"--"),1)]),_:1},8,["label"]),e(p,{label:o(n)("validity")},{default:a(({row:t})=>[u(i(t.create_time)+"è‡³"+i(t.expire_time),1)]),_:1},8,["label"]),e(p,{label:o(n)("operation"),fixed:"right",align:"right"},{default:a(({row:t})=>[t.use_time!=0?(g(),I(b,{key:0,type:"primary",link:"",onClick:ke=>R(t)},{default:a(()=>[u(i(o(n)("showOrder")),1)]),_:2},1032,["onClick"])):K("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[S,s.loading]]),l("div",ye,[e(D,{"current-page":s.page,"onUpdate:current-page":r[4]||(r[4]=t=>s.page=t),"page-size":s.limit,"onUpdate:page-size":r[5]||(r[5]=t=>s.limit=t),layout:"total, sizes, prev, pager, next, jumper",total:s.total,onSizeChange:r[6]||(r[6]=t=>m()),onCurrentChange:m},null,8,["current-page","page-size","total"])])])])]),_:1})])}}});export{We as default};

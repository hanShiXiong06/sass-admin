import{d as ee,y as le,f as ae,r as T,R as oe,h as p,c as b,e as u,w as r,u as a,aP as te,v as k,a as d,t as f,s as t,B as re,i as m,F as V,bS as B,T as C,x as q,C as $,a3 as ue,aQ as ie,a7 as ne,aW as se,J as de,L as _e,at as pe,au as fe,ac as ve,K as xe,ad as ce,M as me,E as be,Y as ge,p as ye,g as ke}from"./index-0e396751.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css               *//* empty css                       *//* empty css                 */import"./el-form-item-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                 *//* empty css                *//* empty css                   *//* empty css                       */import{_ as J}from"./goods_default-247a7f2b.js";import{g as he,s as j}from"./goods-2eb5d4ca.js";import{_ as we}from"./_plugin-vue_export-helper-c27b6911.js";const Ve=O=>(ye("data-v-c48c4308"),O=O(),ke(),O),$e={class:"main-container"},Pe={class:"text mt-[20px] text-[14px] leading-[25px]"},Le=Ve(()=>d("div",{class:"image-slot"},[d("img",{class:"w-[98px] h-[98px]",src:J})],-1)),Re={key:1,class:"w-[98px] h-[98px]",src:J,fit:"contain"},Fe={class:"text text-[14px] leading-[25px]"},Ee={class:"text-[var(--el-text-color-secondary)] text-[12px] leading-[25px]"},Te={class:"w-full"},Be={class:"h-[62px] border-box py-[15px]"},Oe={class:"text-[var(--el-text-color-secondary)] text-[12px] leading-[25px]"},Ue={class:"px-[16px] border-box"},Ne={class:"h-[62px] border-box py-[15px] px-[16px]"},Me={class:"h-[62px] border-box py-[15px] px-[16px]"},Ce={class:"fixed-footer-wrap"},qe={class:"fixed-footer"},Ie=ee({__name:"config",setup(O){const I=le(),A=ae(),H=I.meta.title,h=T(!1),L=T(!1),y=T({}),R={required:/[\S]+/,number:/^\d{0,10}$/,digit:/^\d{0,10}(.?\d{0,2})$/,special:/^\d{0,10}(.?\d{0,3})$/},e=T({id:0,is_fenxiao:1,fenxiao_type:1,skuList:[],fenxiao_rule:{}}),S=T(),Q=w=>{L.value=!0,he(w).then(i=>{y.value=i.data,e.value.id=I.query.goods_id,e.value.fenxiao_type=i.data.goods_info.fenxiao_type,e.value.is_fenxiao=i.data.goods_info.is_set_fenxiao,e.value.skuList=i.data.goods_info.skuList,e.value.fenxiao_rule=i.data.goods_info.fenxiaoGoods&&Object.keys(i.data.goods_info.fenxiaoGoods.fenxiao_rule).length?JSON.parse(i.data.goods_info.fenxiaoGoods.fenxiao_rule):{},i.data.goods_info.skuList.forEach((g,F)=>{g.calculate_price=g.calculate_price||"",e.value.fenxiao_rule[g.sku_id]||(e.value.fenxiao_rule[g.sku_id]={},i.data.rule.forEach((P,G)=>{e.value.fenxiao_rule[g.sku_id][P.level_id]=ue(P),e.value.fenxiao_rule[g.sku_id][P.level_id].one_money="0",e.value.fenxiao_rule[g.sku_id][P.level_id].two_money="0"}))}),L.value=!1}).catch(()=>{L.value=!1})};let W=Number(I.query.goods_id);Q(W);const U=w=>{var i;(i=S.value)==null||i.validateField(w)},Y=()=>{var w;if(e.value.fenxiao_type==2)(w=S.value)==null||w.validate(i=>{if(i){if(h.value)return;h.value=!0,j(e.value).then(g=>{h.value=!1,N()}).catch(()=>{h.value=!1})}});else{if(h.value)return;h.value=!0,j(e.value).then(i=>{h.value=!1,N()}).catch(()=>{h.value=!1})}},N=()=>{A.push("/shop_fenxiao/management/goods")};return(w,i)=>{const g=ie,F=ne,P=se,G=de,x=_e,M=pe,K=fe,c=ve,E=xe,D=ce,X=me,z=be,Z=ge;return oe((p(),b("div",$e,[u(F,{class:"card !border-none",shadow:"never"},{default:r(()=>[u(g,{content:a(H),icon:a(te),onBack:i[0]||(i[0]=l=>N())},null,8,["content","icon"])]),_:1}),L.value?$("",!0):(p(),k(F,{key:0,class:"card mt-[15px] !border-none",shadow:"never"},{default:r(()=>[Object.keys(y.value).length?(p(),k(X,{key:0,class:"page-form",model:e.value,"label-width":"200px",ref_key:"formRef",ref:S},{default:r(()=>[u(P,{type:"info"},{default:r(()=>[d("ul",null,[d("li",null,f(a(t)("alertOne")),1),d("li",null,f(a(t)("alertTwo")),1),d("li",null,f(a(t)("alertthree")),1)])]),_:1}),d("div",Pe,f(a(t)("titleOne")),1),u(F,{class:"card !border-none",shadow:"never"},{default:r(()=>[u(x,{label:a(t)("goodsImage")},{default:r(()=>[y.value.goods_info.goods_cover_thumb_small?(p(),k(G,{key:0,class:"w-[98px] h-[98px]",src:a(re)(y.value.goods_info.goods_cover_thumb_small),fit:"contain"},{error:r(()=>[Le]),_:1},8,["src"])):(p(),b("img",Re))]),_:1},8,["label"]),u(x,{label:a(t)("goodsName")},{default:r(()=>[m(f(y.value.goods_info.goods_name),1)]),_:1},8,["label"])]),_:1}),d("div",Fe,f(a(t)("titleTwo")),1),u(F,{class:"card !border-none",shadow:"never"},{default:r(()=>[u(x,{label:a(t)("isFenxiao")},{default:r(()=>[d("div",null,[u(K,{modelValue:e.value.is_fenxiao,"onUpdate:modelValue":i[1]||(i[1]=l=>e.value.is_fenxiao=l)},{default:r(()=>[u(M,{label:1},{default:r(()=>[m(f(a(t)("isFenxiaoLabelOne")),1)]),_:1}),u(M,{label:0},{default:r(()=>[m(f(a(t)("isFenxiaoLabelTwo")),1)]),_:1})]),_:1},8,["modelValue"]),d("p",Ee,f(a(t)("isFenxiaoTipOne")),1)])]),_:1},8,["label"]),e.value.is_fenxiao?(p(),b(V,{key:0},[u(x,{label:a(t)("countPrice")},{default:r(()=>[d("div",Te,[u(D,{data:e.value.skuList,size:"large"},{default:r(()=>[u(c,{prop:"sku_name",label:a(t)("skuName"),"min-width":"120"},{default:r(({row:l})=>[d("span",null,f(l.sku_name||y.value.goods_info.goods_name),1)]),_:1},8,["label"]),u(c,{prop:"price",label:a(t)("skuPrice"),"min-width":"120"},null,8,["label"]),u(c,{prop:"cost_price",label:a(t)("costPrice"),"min-width":"120"},null,8,["label"]),u(c,{label:a(t)("calculatePrice"),"min-width":"120"},{default:r(({row:l,$index:o})=>[d("div",Be,[u(x,{prop:"skuList["+o+"].calculate_price",rules:[{trigger:"blur",required:!0,validator:(v,s,_)=>s?s<=0?_(a(t)("calculatePricePlaceholderTwo")):R.digit.test(s)?_():_(a(t)("calculatePricePlaceholderOne")):_()}],class:"sku-form-item-wrap"},{default:r(()=>[u(E,{modelValue:l.calculate_price,"onUpdate:modelValue":v=>l.calculate_price=v,modelModifiers:{trim:!0},clearable:"",class:"input-width mr-[10px]",onKeyup:i[2]||(i[2]=v=>a(B)(v))},{append:r(()=>[m("元")]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])])]),_:1},8,["label"])]),_:1},8,["data"]),d("p",Oe,f(a(t)("calculatePriceTip")),1)])]),_:1},8,["label"]),u(x,{label:a(t)("type")},{default:r(()=>[u(K,{modelValue:e.value.fenxiao_type,"onUpdate:modelValue":i[3]||(i[3]=l=>e.value.fenxiao_type=l)},{default:r(()=>[u(M,{label:1},{default:r(()=>[m(f(a(t)("typeLabelOne")),1)]),_:1}),u(M,{label:2},{default:r(()=>[m(f(a(t)("typeLabelTwo")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),e.value.fenxiao_type==1?(p(),k(x,{key:0},{default:r(()=>[u(D,{data:y.value.rule,size:"large"},{default:r(()=>[u(c,{prop:"level_name",label:a(t)("levelname"),"min-width":"120"},null,8,["label"]),u(c,{prop:"one_rate",label:a(t)("oneRate"),"min-width":"120"},{default:r(({row:l})=>[d("span",null,f(l.one_rate)+"%",1)]),_:1},8,["label"]),u(c,{prop:"two_rate",label:a(t)("twoRate"),"min-width":"120"},{default:r(({row:l})=>[d("span",null,f(l.two_rate)+"%",1)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})):(p(),k(x,{key:1},{default:r(()=>[u(D,{data:y.value.rule,size:"large",class:"rule"},{default:r(()=>[u(c,{label:a(t)("skuName"),"min-width":"120"},{default:r(({row:l})=>[(p(!0),b(V,null,C(e.value.skuList,(o,v)=>(p(),b("p",{class:q(["h-[124px] flex items-center px-[16px] border-box",{"border-b-[1px] border-solid border-[var(--el-table-border-color)]":v<e.value.skuList.length-1}]),key:v},f(o.sku_name||y.value.goods_info.goods_name),3))),128))]),_:1},8,["label"]),u(c,{label:a(t)("price"),"min-width":"120"},{default:r(({row:l})=>[(p(!0),b(V,null,C(e.value.skuList,(o,v)=>(p(),b("p",{class:q(["h-[124px] flex items-center px-[16px] border-box",{"border-b-[1px] border-solid border-[var(--el-table-border-color)]":v<e.value.skuList.length-1}]),key:v},"￥"+f(o.price),3))),128))]),_:1},8,["label"]),u(c,{prop:"level_name",label:a(t)("rateName"),"min-width":"120"},{default:r(({row:l})=>[d("p",Ue,f(l.level_name),1)]),_:1},8,["label"]),u(c,{label:a(t)("oneRate"),"min-width":"120"},{default:r(({row:l})=>[(p(!0),b(V,null,C(e.value.skuList,(o,v)=>(p(),b(V,{key:v},[d("div",Ne,[e.value.fenxiao_rule[o.sku_id][l.level_id]?(p(),k(x,{key:0,prop:`fenxiao_rule[${o.sku_id}][${l.level_id}].one_rate`,rules:[{trigger:"blur",required:!0,validator:(s,_,n)=>e.value.fenxiao_rule[o.sku_id][l.level_id].one_money!=""&&parseFloat(e.value.fenxiao_rule[o.sku_id][l.level_id].one_money)!=0?n():_?_>=100?n(a(t)("oneRatePlaceholderThree")):_<=0?n(a(t)("oneRatePlaceholderTwo")):R.digit.test(_)?n():n(a(t)("oneRatePlaceholderOne")):e.value.fenxiao_rule[o.sku_id][l.level_id].one_money?n():n(a(t)("oneRatePlaceholder"))}],class:"sku-form-item-wrap"},{default:r(()=>[u(E,{modelValue:e.value.fenxiao_rule[o.sku_id][l.level_id].one_rate,"onUpdate:modelValue":s=>e.value.fenxiao_rule[o.sku_id][l.level_id].one_rate=s,modelModifiers:{trim:!0},clearable:"",disabled:e.value.fenxiao_rule[o.sku_id][l.level_id].one_money!=""&&parseFloat(e.value.fenxiao_rule[o.sku_id][l.level_id].one_money)!=0,onBlur:s=>U(`fenxiao_rule[${o.sku_id}][${l.level_id}].one_money`),class:"input-width mr-[10px]",onKeyup:i[4]||(i[4]=s=>a(B)(s))},{append:r(()=>[m("%")]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onBlur"])]),_:2},1032,["prop","rules"])):$("",!0)]),d("div",{class:q(["h-[62px] border-box py-[15px] px-[16px]",{"border-b-[1px] border-solid border-[var(--el-table-border-color)]":v<e.value.skuList.length-1}])},[e.value.fenxiao_rule[o.sku_id][l.level_id]?(p(),k(x,{key:0,prop:`fenxiao_rule[${o.sku_id}][${l.level_id}].one_money`,rules:[{trigger:"blur",required:!0,validator:(s,_,n)=>e.value.fenxiao_rule[o.sku_id][l.level_id].one_rate!=""&&parseFloat(e.value.fenxiao_rule[o.sku_id][l.level_id].one_rate)!=0?n():_?_<=0?n(a(t)("oneMoneyPlaceholderTwo")):R.digit.test(_)?n():n(a(t)("oneMoneyPlaceholderOne")):e.value.fenxiao_rule[o.sku_id][l.level_id].one_rate?n():n(a(t)("oneRatePlaceholder"))}],class:"sku-form-item-wrap"},{default:r(()=>[u(E,{modelValue:e.value.fenxiao_rule[o.sku_id][l.level_id].one_money,"onUpdate:modelValue":s=>e.value.fenxiao_rule[o.sku_id][l.level_id].one_money=s,modelModifiers:{trim:!0},clearable:"",disabled:e.value.fenxiao_rule[o.sku_id][l.level_id].one_rate!=""&&parseFloat(e.value.fenxiao_rule[o.sku_id][l.level_id].one_rate)!=0,onBlur:s=>U(`fenxiao_rule[${o.sku_id}][${l.level_id}].one_rate`),class:"input-width mr-[10px]",onKeyup:i[5]||(i[5]=s=>a(B)(s))},{append:r(()=>[m("元")]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onBlur"])]),_:2},1032,["prop","rules"])):$("",!0)],2)],64))),128))]),_:1},8,["label"]),u(c,{prop:"two_rate",label:a(t)("twoRate"),"min-width":"120"},{default:r(({row:l})=>[(p(!0),b(V,null,C(e.value.skuList,(o,v)=>(p(),b(V,{key:v},[d("div",Me,[e.value.fenxiao_rule[o.sku_id][l.level_id]?(p(),k(x,{key:0,prop:`fenxiao_rule[${o.sku_id}][${l.level_id}].two_rate`,rules:[{trigger:"blur",required:!0,validator:(s,_,n)=>e.value.fenxiao_rule[o.sku_id][l.level_id].two_money!=""&&parseFloat(e.value.fenxiao_rule[o.sku_id][l.level_id].two_money)!=0?n():_?_>=100?n(a(t)("twoRatePlaceholderThree")):_<=0?n(a(t)("twoRatePlaceholderTwo")):R.digit.test(_)?n():n(a(t)("twoRatePlaceholderOne")):!e.value.fenxiao_rule[o.sku_id][l.level_id].two_money&&!e.value.fenxiao_rule[o.sku_id][l.level_id].two_rate?n(a(t)("twoRatePlaceholder")):n()}],class:"sku-form-item-wrap"},{default:r(()=>[u(E,{modelValue:e.value.fenxiao_rule[o.sku_id][l.level_id].two_rate,"onUpdate:modelValue":s=>e.value.fenxiao_rule[o.sku_id][l.level_id].two_rate=s,modelModifiers:{trim:!0},clearable:"",disabled:e.value.fenxiao_rule[o.sku_id][l.level_id].two_money!=""&&parseFloat(e.value.fenxiao_rule[o.sku_id][l.level_id].two_money)!=0,onBlur:s=>U(`fenxiao_rule[${o.sku_id}][${l.level_id}].two_money`),class:"input-width mr-[10px]",onKeyup:i[6]||(i[6]=s=>a(B)(s))},{append:r(()=>[m("%")]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onBlur"])]),_:2},1032,["prop","rules"])):$("",!0)]),d("div",{class:q(["h-[62px] border-box py-[15px] px-[16px]",{"border-b-[1px] border-solid border-[var(--el-table-border-color)]":v<e.value.skuList.length-1}])},[e.value.fenxiao_rule[o.sku_id][l.level_id]?(p(),k(x,{key:0,prop:`fenxiao_rule[${o.sku_id}][${l.level_id}].two_money`,rules:[{trigger:"blur",required:!0,validator:(s,_,n)=>e.value.fenxiao_rule[o.sku_id][l.level_id].two_rate!=""&&parseFloat(e.value.fenxiao_rule[o.sku_id][l.level_id].two_rate)!=0?n():_?_<=0?n(a(t)("twoMoneyPlaceholderTwo")):R.digit.test(_)?n():n(a(t)("twoMoneyPlaceholderOne")):e.value.fenxiao_rule[o.sku_id][l.level_id].two_rate?n():n(a(t)("twoRatePlaceholder"))}],class:"sku-form-item-wrap"},{default:r(()=>[u(E,{modelValue:e.value.fenxiao_rule[o.sku_id][l.level_id].two_money,"onUpdate:modelValue":s=>e.value.fenxiao_rule[o.sku_id][l.level_id].two_money=s,modelModifiers:{trim:!0},clearable:"",disabled:e.value.fenxiao_rule[o.sku_id][l.level_id].two_rate!=""&&parseFloat(e.value.fenxiao_rule[o.sku_id][l.level_id].two_rate)!=0,onBlur:s=>U(`fenxiao_rule[${o.sku_id}][${l.level_id}].two_rate`),class:"input-width mr-[10px]",onKeyup:i[7]||(i[7]=s=>a(B)(s))},{append:r(()=>[m("元")]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onBlur"])]),_:2},1032,["prop","rules"])):$("",!0)],2)],64))),128))]),_:1},8,["label"])]),_:1},8,["data"])]),_:1}))],64)):$("",!0)]),_:1})]),_:1},8,["model"])):$("",!0)]),_:1})),d("div",Ce,[d("div",qe,[u(z,{type:"primary",onClick:i[8]||(i[8]=l=>Y())},{default:r(()=>[m(f(a(t)("save")),1)]),_:1}),u(z,{onClick:i[9]||(i[9]=l=>N())},{default:r(()=>[m(f(a(t)("back")),1)]),_:1})])])])),[[Z,L.value]])}}});const dl=we(Ie,[["__scopeId","data-v-c48c4308"]]);export{dl as default};

import{d as T,q as E,r as a,aR as O,aO as P,Q as R,U as V,s as o,h as r,c as _,e as s,w as c,a as t,t as x,u as l,i as q,C as k,v as H,B as C,ax as J,ay as K,J as M,E as X,K as z,X as A}from"./index-0e396751.js";/* empty css                  *//* empty css                   *//* empty css                 *//* empty css                  *//* empty css                 *//* empty css                        *//* empty css                    */import{b as G}from"./browser-a1ac24ac.js";import{g as W}from"./diy_form-e1ce8c59.js";const Y={key:0,class:"promote-flex flex"},Z={class:"promote-img flex justify-center items-center bg-[#f8f8f8] w-[150px] h-[150px]"},ee={class:"px-[20px] flex-1"},te={class:"mb-[10px]"},ae=["href"],oe={key:1,class:"promote-flex flex"},se={class:"promote-img flex justify-center items-center bg-[#f8f8f8] w-[150px] h-[150px]"},le=t("div",{class:"w-[150px] h-[150px] text-[14px] text-center leading-[150px]"},"配置失败",-1),ne={key:1,class:"w-[150px] h-[150px] text-[14px] text-center leading-[150px]"},pe={class:"px-[20px] flex-1"},re=["href"],we=T({__name:"form-spread-popup",setup(ce,{expose:D}){const f=E({}),i=a(!1),p=a("h5"),h=a("");a("");const v=a(""),d=a(""),g=a(""),m=E({path:""});O().then(e=>{h.value=e.data.wap_url});const B=()=>{d.value=`${h.value}${g.value}`,G.toDataURL(d.value,{errorCorrectionLevel:"L",margin:0,width:120}).then(e=>{v.value=e})},U=e=>{p.value="h5",Object.assign(f,e),g.value=`/app/pages/index/diy_form?form_id=${f.form_id}`,B(),N(),i.value=!0},N=()=>{W({form_id:f.form_id}).then(e=>{e.data&&(m.path=e.data.path)})},{copy:Q,isSupported:S,copied:w}=P(),$=e=>{S.value||V({message:o("notSupportCopy"),type:"warning"}),Q(e)};return R(w,()=>{w.value&&V({message:o("copySuccess"),type:"success"})}),D({showDialog:i,show:U}),(e,n)=>{const y=J,j=K,b=M,F=X,I=z,L=A;return r(),_("div",null,[s(L,{modelValue:i.value,"onUpdate:modelValue":n[2]||(n[2]=u=>i.value=u),title:l(o)("表单推广"),width:"500px","destroy-on-close":!0},{default:c(()=>[s(j,{modelValue:p.value,"onUpdate:modelValue":n[0]||(n[0]=u=>p.value=u),class:"mb-[10px]"},{default:c(()=>[s(y,{label:"H5",name:"h5"}),s(y,{label:"微信小程序",name:"weapp"})]),_:1},8,["modelValue"]),p.value=="h5"?(r(),_("div",Y,[t("div",Z,[s(b,{src:v.value},null,8,["src"])]),t("div",ee,[t("div",te,x(l(o)("推广链接")),1),s(I,{class:"mb-[10px]",readonly:"",value:d.value},{append:c(()=>[s(F,{onClick:n[1]||(n[1]=u=>$(d.value))},{default:c(()=>[q(x(l(o)("copy")),1)]),_:1})]),_:1},8,["value"]),t("a",{class:"text-primary",href:v.value,download:""},x(l(o)("下载二维码")),9,ae)])])):k("",!0),p.value=="weapp"?(r(),_("div",oe,[t("div",se,[m.path?(r(),H(b,{key:0,src:l(C)(m.path),class:"w-[150px] h-[150px]"},{error:c(()=>[le]),_:1},8,["src"])):(r(),_("div",ne,"配置失败"))]),t("div",pe,[t("a",{class:"text-primary",href:l(C)(m.path),target:"_blank",download:""},x(l(o)("下载二维码")),9,re)])])):k("",!0)]),_:1},8,["modelValue","title"])])}}});export{we as _};

import{d as oe,x as ae,f as le,r as m,h as l,c as i,e as r,w as d,u as a,R as ne,s as b,a as s,t,q as o,B as p,F as R,T as S,A as ie,i as D,a5 as L,a3 as O,aR as re,a7 as pe,L as de,aN as ce,aO as _e,ad as ue,ae as xe,ab as me,M as fe,Y as ve,p as he,g as ye}from"./index-904cb7a2.js";/* empty css                   *//* empty css                *//* empty css                 *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                        *//* empty css               *//* empty css               *//* empty css               */import"./el-form-item-4ed993c7.js";/* empty css                *//* empty css                   *//* empty css                       */import{w as be,x as ge,y as ke}from"./order-8e8307b0.js";import{p as we}from"./printer-463cc376.js";import{_ as De}from"./delivery-action.vue_vue_type_style_index_0_lang-755ea9e1.js";import{_ as Fe}from"./order-notes.vue_vue_type_style_index_0_lang-389a2637.js";import{_ as Ce}from"./order-edit-address.vue_vue_type_style_index_0_lang-231c203f.js";import{_ as Ee}from"./delivery-package.vue_vue_type_style_index_0_lang-dd892ddb.js";import{_ as Te}from"./adjust-money.vue_vue_type_style_index_0_lang-585de22f.js";import{_ as Ae}from"./electronic-sheet-print.vue_vue_type_style_index_0_lang-18b32fba.js";import{_ as Ne}from"./shop-active-refund.vue_vue_type_style_index_0_lang-23adaece.js";import{_ as $e}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                 *//* empty css                  *//* empty css                  *//* empty css                       *//* empty css                 *//* empty css                 */import"./delivery-86e0fcc0.js";import"./weapp-20eea152.js";import"./electronic_sheet-81054cac.js";import"./lodop-ff2d2f62.js";import"./qqmap-011f3cfb.js";/* empty css                    */const Be=g=>(he("data-v-ee489ffe"),g=g(),ye(),g),Me={class:"main-container"},Re={class:"panel-title"},je={class:"input-width"},Ie={class:"input-width"},Se={class:"input-width"},Le={class:"input-width"},Oe={class:"input-width"},Pe={key:0},Ve={class:"input-width"},qe={class:"input-width"},ze={class:"input-width"},Ge={key:1},He={class:"input-width"},Ye={class:"input-width"},Je={class:"input-width"},Ke={class:"input-width"},Qe={class:"input-width line-feed"},Ue={class:"input-width line-feed"},We={class:"panel-title"},Xe={class:"mb-[20px]"},Ze={class:"ml-[30px] text-[14px] mr-[20px]"},et={class:"text-[14px]"},tt={class:"flex mt-[10px]"},st={key:8,class:"flex"},ot=["onClick"],at=["onClick"],lt={class:"flex ml-[30px] mt-[15px]"},nt={class:"text-[14px] text-[#ff7f5b]"},it={class:"ml-[10px]"},rt={class:"text-[14px] text-[#a4a4a4]"},pt={class:"text-[14px] text-[#a4a4a4]"},dt={class:"text-[14px] text-[#a4a4a4]"},ct={class:"panel-title"},_t={class:"flex"},ut={class:"flex items-center shrink-0"},xt=["src"],mt={class:"flex flex-col items-start"},ft={class:"multi-hidden text-[14px]"},vt={class:"text-[12px] text-[#999]"},ht={key:0,class:"px-[4px] text-[12px] text-[#fff] rounded-[4px] bg-primary leading-[18px]"},yt={class:"flex flex-col"},bt={key:0},gt={key:0},kt={key:1,class:"text-[13px]"},wt={key:2,class:"text-[13px] mt-[5px]"},Dt={key:0},Ft={class:"text-[#999]"},Ct={key:1},Et={key:3,class:"text-[13px] mt-[5px]"},Tt={class:"py-[12px] px-[16px] border-b border-color flex justify-end"},At={class:"w-[310px] flex flex-col text-right"},Nt={class:"flex mb-[10px]"},$t={class:"text-base flex-1"},Bt={class:"text-base flex-1 pl-[30px]"},Mt={key:0,class:"text-[14px]"},Rt={key:0},jt={key:1,class:"text-[14px]"},It={key:0,class:"flex mb-[10px]"},St={class:"text-base flex-1"},Lt={class:"text-base flex-1 pl-[30px]"},Ot={key:1,class:"flex mb-[10px]"},Pt={class:"text-base flex-1"},Vt={class:"text-base flex-1 pl-[30px]"},qt={class:"flex mb-[10px]"},zt={class:"text-base flex-1"},Gt={class:"text-base flex-1 pl-[30px]"},Ht={class:"flex mb-[10px]"},Yt={class:"text-base flex-1"},Jt={class:"text-base flex-1 pl-[30px]"},Kt={class:"flex"},Qt={class:"text-base flex-1"},Ut={class:"text-base flex-1 pl-[30px] text-[red]"},Wt={key:0,class:"text-[14px]"},Xt={key:0},Zt={key:1,class:"text-[14px]"},es={key:0,class:"mt-[50px] mb-[20px]"},ts={key:1,class:"mb-[100px]",style:{"min-height":"100px"}},ss={class:"mr-[20px] min-w-[71px]"},os={class:"leading-[1] w-full text-[14px] w-[100px] flex justify-end"},as={class:"leading-[1] w-full text-[14px] w-[100px] flex justify-end mt-[15px]"},ls=Be(()=>s("div",{class:"w-[16px] h-[16px] flex items-center bg-[#D1EBFF] border-[1px] border-[#0091FF] rounded-[999px]"},[s("div",{class:"w-[8px] h-[8px] mx-auto bg-[#0091FF] rounded-[999px]"})],-1)),ns={key:0,class:"w-[2px] h-[50px] bg-[#D1EBFF] mx-auto"},is={class:"leading-[1] ml-[20px] text-[14px]"},rs={class:"leading-[1] ml-[20px] text-[14px] mt-[15px]"},ps={class:"ml-[10px]"},ds=oe({__name:"detail",setup(g){const j=ae(),P=le(),V=j.meta.title,x=parseInt(j.query.order_id),v=m(!0),e=m(null),f=async(u=0)=>{v.value=!0,e.value=null,await be(u).then(({data:_})=>{e.value=_;let w=0;e.value.order_goods.forEach((h,c)=>{h.status==1&&w++}),e.value.is_refund_show=w>0,console.log("formData.value",e.value)}).catch(()=>{}),v.value=!1};x?f(x):v.value=!1;const q=()=>{L.confirm(o("orderCloseTips"),o("warning"),{confirmButtonText:o("confirm"),cancelButtonText:o("cancel"),type:"warning"}).then(()=>{ge(x).then(()=>{f(x)})})},F=m(null),z=()=>{F.value.setFormData(e.value),F.value.showDialog=!0},C=m(null),G=()=>{C.value.setFormData(e.value),C.value.showDialog=!0},E=m(null),H=()=>{E.value.setFormData(e.value),E.value.showDialog=!0},Y=()=>{L.confirm(o("orderFinishTips"),o("warning"),{confirmButtonText:o("confirm"),cancelButtonText:o("cancel"),type:"warning"}).then(()=>{ke(x).then(()=>{f(x)})})},T=m(null),I=(u,_)=>{T.value.setFormData(u,_),T.value.showDialog=!0},A=m(null),J=()=>{let u={print_type:"single"};Object.assign(u,O(e.value)),A.value.setFormData(u),A.value.showDialog=!0},k=m(!1),N=m(null),K=async()=>{let u=O(e.value);N.value.showDialog=!0,N.value.setFormData(u)},Q=()=>{e.value.order_id&&(k.value||(k.value=!0,we({type:"shopGoodsOrder",trigger:"manual",business:{order_id:e.value.order_id}}).then(u=>{k.value=!1}).catch(()=>{k.value=!1})))},$=m(null),U=()=>{$.value.setFormData(e.value),$.value.showDialog=!0};return(u,_)=>{const w=re,h=pe,c=de,B=ce,W=_e,M=ue,X=xe,Z=me,ee=fe,te=ve;return l(),i("div",Me,[r(h,{class:"card !border-none mb-[15px]",shadow:"never"},{default:d(()=>[r(w,{content:a(V),icon:u.ArrowLeft,onBack:_[0]||(_[0]=n=>a(P).push({path:"/shop/order/index"}))},null,8,["content","icon"])]),_:1}),ne((l(),b(ee,{model:e.value,"label-width":"100px",ref:"formRef",class:"page-form","label-position":"left"},{default:d(()=>[e.value?(l(),b(h,{key:0,class:"box-card !border-none relative",shadow:"never"},{default:d(()=>[s("h3",Re,t(a(o)("orderInfo")),1),r(W,{class:"row-bg px-[30px] mb-[20px]",gutter:20},{default:d(()=>[r(B,{span:8},{default:d(()=>[r(c,{label:a(o)("orderNo")},{default:d(()=>[s("div",je,t(e.value.order_no),1)]),_:1},8,["label"]),r(c,{label:a(o)("orderForm")},{default:d(()=>[s("div",Ie,t(e.value.order_from_name),1)]),_:1},8,["label"]),e.value.out_trade_no?(l(),b(c,{key:0,label:a(o)("outTradeNo")},{default:d(()=>[s("div",Se,t(e.value.out_trade_no),1)]),_:1},8,["label"])):p("",!0),e.value.pay?(l(),b(c,{key:1,label:a(o)("payType")},{default:d(()=>[s("div",Le,t(e.value.pay.type_name),1)]),_:1},8,["label"])):p("",!0)]),_:1}),r(B,{span:8},{default:d(()=>[r(c,{label:a(o)("deliveryType")},{default:d(()=>[s("div",Oe,t(e.value.delivery_type_name),1)]),_:1},8,["label"]),e.value.delivery_type=="express"||e.value.delivery_type=="local_delivery"?(l(),i("div",Pe,[r(c,{label:a(o)("takerName")},{default:d(()=>[s("div",Ve,t(e.value.taker_name),1)]),_:1},8,["label"]),r(c,{label:a(o)("takerMobile")},{default:d(()=>[s("div",qe,t(e.value.taker_mobile),1)]),_:1},8,["label"]),r(c,{label:a(o)("takerFullAddress")},{default:d(()=>[s("div",ze,t(e.value.taker_full_address),1)]),_:1},8,["label"])])):p("",!0),e.value.delivery_type=="store"?(l(),i("div",Ge,[r(c,{label:a(o)("storeName")},{default:d(()=>[s("div",He,t(e.value.store.store_name),1)]),_:1},8,["label"]),r(c,{label:a(o)("storeAddress")},{default:d(()=>[s("div",Ye,t(e.value.store.full_address),1)]),_:1},8,["label"]),r(c,{label:a(o)("storeMobile")},{default:d(()=>[s("div",Je,t(e.value.store.store_mobile),1)]),_:1},8,["label"]),r(c,{label:a(o)("tradeTime")},{default:d(()=>[s("div",Ke,t(e.value.store.trade_time),1)]),_:1},8,["label"])])):p("",!0)]),_:1}),r(B,{span:8},{default:d(()=>[r(c,{label:a(o)("memberRemark")},{default:d(()=>[s("div",Qe,t(e.value.member_remark??"--"),1)]),_:1},8,["label"]),r(c,{label:a(o)("notes")},{default:d(()=>[s("div",Ue,t(e.value.shop_remark??"--"),1)]),_:1},8,["label"])]),_:1})]),_:1}),s("h3",We,t(a(o)("orderStatus")),1),s("div",Xe,[s("p",null,[s("span",Ze,t(a(o)("orderStatus"))+"：",1),s("span",et,t(e.value.status_name.name),1)]),s("div",tt,[s("span",{class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#ff7f5b] bg-[#fff0e5] cursor-pointer",onClick:H},t(a(o)("notes")),1),e.value.status==2?(l(),i("span",{key:0,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:G},t(a(o)("delivery")),1)):p("",!0),e.value.status==1?(l(),i("span",{key:1,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:q},t(a(o)("close")),1)):p("",!0),e.value.status==1?(l(),i("span",{key:2,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:z},t(a(o)("editPrice")),1)):p("",!0),e.value.status==3?(l(),i("span",{key:3,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:Y},t(a(o)("finish")),1)):p("",!0),e.value.delivery_type=="express"&&e.value.status==3?(l(),i("span",{key:4,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:J},t(a(o)("electronicSheetPrintTitle")),1)):p("",!0),e.value.delivery_type=="virtual"&&(e.value.status==2||e.value.status==3||e.value.status==5)?(l(),i("span",{key:5,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:Q},t(a(o)("printTicket")),1)):p("",!0),e.value.status==1&&e.value.delivery_type!="virtual"&&e.value.activity_type!="giftcard"?(l(),i("span",{key:6,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:K},t(a(o)("editAddress")),1)):p("",!0),e.value.is_refund_show&&e.value.status!=1&&e.value.status!=-1&&e.value.is_enable_refund==1?(l(),i("span",{key:7,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:U},t(a(o)("voluntaryRefund")),1)):p("",!0),e.value.order_delivery?(l(),i("div",st,[(l(!0),i(R,null,S(e.value.order_delivery,(n,y)=>(l(),i(R,{key:y},[n.delivery_type=="express"&&n.sub_delivery_type=="express"?(l(),i("span",{key:0,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#ff7f5b] bg-[#fff0e5] cursor-pointer",onClick:se=>I(n.id,e.value.taker_mobile)},t(a(o)("package"))+t(y+1),9,ot)):p("",!0),n.delivery_type=="express"&&n.sub_delivery_type=="none_express"?(l(),i("span",{key:1,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#ff7f5b] bg-[#fff0e5] cursor-pointer",onClick:se=>I(n.id,e.value.taker_mobile)},t(a(o)("noLogisticsRequired")),9,at)):p("",!0)],64))),128))])):p("",!0)]),s("div",lt,[s("span",nt,t(a(o)("remind"))+"：",1),s("div",it,[s("p",rt,t(a(o)("remindTips1")),1),s("p",pt,t(a(o)("remindTips2")),1),s("p",dt,t(a(o)("remindTips3")),1)])])]),s("h3",ct,t(a(o)("goodsDetail")),1),r(X,{data:e.value.order_goods,size:"large"},{default:d(()=>[r(M,{label:a(o)("goodsName"),align:"left",width:"300"},{default:d(({row:n})=>[s("div",_t,[s("div",ut,[s("img",{class:"w-[50px] h-[50px] mr-[10px]",src:a(ie)(n.goods_image)},null,8,xt)]),s("div",mt,[s("p",ft,t(n.goods_name),1),s("span",vt,t(n.sku_name),1),n.is_gift==1?(l(),i("span",ht,"赠品")):p("",!0)])])]),_:1},8,["label"]),r(M,{label:a(o)("price"),"min-width":"50",align:"left"},{default:d(({row:n})=>[s("div",yt,[e.value.activity_type=="exchange"?(l(),i("span",bt,[D(t(n.extend.point)+t(a(o)("point"))+" ",1),parseFloat(n.price)?(l(),i("span",gt,"+￥"+t(n.price),1)):p("",!0)])):(l(),i("span",kt,"￥"+t(n.price),1)),n.extend&&n.extend.newcomer_price?(l(),i("span",wt,[parseFloat(n.extend.newcomer_price)&&n.num>1?(l(),i("span",Dt,[D(t(n.num)+t(a(o)("piece")),1),s("span",Ft,"（第1"+t(a(o)("piece"))+"，￥"+t(parseFloat(n.extend.newcomer_price).toFixed(2))+"/"+t(a(o)("piece"))+"；第"+t(n.num>2?"2~"+n.num:"2")+t(a(o)("piece"))+"，￥"+t(parseFloat(n.price).toFixed(2))+"/"+t(a(o)("piece"))+"）",1)])):(l(),i("span",Ct,t(n.num)+t(a(o)("piece")),1))])):(l(),i("span",Et,t(n.num)+t(a(o)("piece")),1))])]),_:1},8,["label"]),r(M,{prop:"num",label:a(o)("num"),"min-width":"50",align:"right"},null,8,["label"])]),_:1},8,["data"]),s("div",Tt,[s("div",At,[s("div",Nt,[s("div",$t,t(a(o)("goodsMoney")),1),s("div",Bt,[e.value.activity_type=="exchange"?(l(),i("span",Mt,[D(t(e.value.point)+t(a(o)("point"))+" ",1),parseFloat(e.value.goods_money)?(l(),i("span",Rt,"+￥"+t(e.value.goods_money),1)):p("",!0)])):(l(),i("span",jt,"￥"+t(e.value.goods_money),1))])]),e.value.coupon_money>0?(l(),i("div",It,[s("div",St,t(a(o)("couponMoney")),1),s("div",Lt,t(e.value.coupon_money),1)])):p("",!0),e.value.manjian_discount_money>0?(l(),i("div",Ot,[s("div",Pt,t(a(o)("manjianDiscountMoney")),1),s("div",Vt,t(e.value.manjian_discount_money),1)])):p("",!0),s("div",qt,[s("div",zt,t(a(o)("discountMoney")),1),s("div",Gt,t(e.value.discount_money),1)]),s("div",Ht,[s("div",Yt,t(a(o)("deliveryMoney")),1),s("div",Jt,t(e.value.delivery_money),1)]),s("div",Kt,[s("div",Qt,t(a(o)("orderMoney")),1),s("div",Ut,[e.value.activity_type=="exchange"?(l(),i("span",Wt,[D(t(e.value.point)+t(a(o)("point"))+" ",1),parseFloat(e.value.order_money)?(l(),i("span",Xt,"+￥"+t(e.value.order_money),1)):p("",!0)])):(l(),i("span",Zt,"￥"+t(e.value.order_money),1))])])])]),e.value.order_log.length>0?(l(),i("h3",es,t(a(o)("operateLog")),1)):p("",!0),e.value.order_log.length>0?(l(),i("div",ts,[(l(!0),i(R,null,S(e.value.order_log,(n,y)=>(l(),i("div",{class:"flex",key:y},[s("div",ss,[s("div",os,t(n.create_time&&n.create_time.split(" ")[0]),1),s("div",as,t(n.create_time&&n.create_time.split(" ")[1]),1)]),s("div",null,[ls,y+1!=e.value.order_log.length?(l(),i("div",ns)):p("",!0)]),s("div",null,[s("div",is,t(n.main_type_name)+t(n.main_name),1),s("div",rs,[s("span",null,t(n.type_name),1),s("span",ps,t(n.content),1)])])]))),128))])):p("",!0)]),_:1})):p("",!0),!v.value&&!e.value?(l(),b(h,{key:1,class:"box-card !border-none relative",shadow:"never"},{default:d(()=>[r(Z,{description:a(o)("orderInfoEmpty")},null,8,["description"])]),_:1})):p("",!0)]),_:1},8,["model"])),[[te,v.value]]),r(Te,{ref_key:"orderAdjustMoneyActionDialog",ref:F,onComplete:_[1]||(_[1]=n=>f(a(x)))},null,512),r(De,{ref_key:"deliveryActionDialog",ref:C,onComplete:_[2]||(_[2]=n=>f(a(x)))},null,512),r(Fe,{ref_key:"orderNotesDialog",ref:E,onComplete:_[3]||(_[3]=n=>f(a(x)))},null,512),r(Ee,{ref_key:"packageDialog",ref:T},null,512),r(Ae,{ref_key:"electronicSheetPrintDialog",ref:A,onComplete:u.loadOrderList},null,8,["onComplete"]),r(Ce,{ref_key:"orderEditAddressDialog",ref:N,onComplete:u.loadOrderList},null,8,["onComplete"]),r(Ne,{ref_key:"shopActiveRefundDialog",ref:$,onComplete:_[4]||(_[4]=n=>f(a(x)))},null,512)])}}});const Zs=$e(ds,[["__scopeId","data-v-ee489ffe"]]);export{Zs as default};

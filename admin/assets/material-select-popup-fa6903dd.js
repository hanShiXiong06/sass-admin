import{d as R,m as E,q as h,Q as Z,r as T,aJ as J,a$ as v,h as o,c as n,a as l,x as q,$ as _,u as r,e as s,B as w,Z as Q,v as B,w as D,t as F,s as y,F as b,T as U,C as L,ao as N,U as A,J as G,bk as H}from"./index-0e396751.js";/* empty css                        */import{_ as K}from"./index.vue_vue_type_script_setup_true_lang-5014406f.js";/* empty css                 */import{_ as P}from"./material-select.vue_vue_type_style_index_0_lang-4cddd279.js";import{S as W}from"./sortable.esm-be94e56d.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                  */import"./material-4253fbee.js";const Y={class:"flex flex-wrap"},ee={key:0,class:"w-full h-full relative"},te={class:"w-full h-full flex items-center justify-center"},le={class:"absolute z-[1] flex items-center justify-center w-full h-full inset-0 bg-black bg-opacity-60 operation"},ae={class:"w-full h-full flex items-center justify-center flex-col content-wrap"},ie={class:"leading-none text-xs mt-[10px] text-secondary"},oe={class:"w-full h-full relative"},se={class:"w-full h-full flex items-center justify-center"},re={class:"absolute z-[1] flex items-center justify-center w-full h-full inset-0 bg-black bg-opacity-60 operation"},ne={class:"w-full h-full flex items-center justify-center flex-col content-wrap"},ce={class:"leading-none text-xs mt-[10px] text-secondary"},de=R({__name:"material-select-popup",props:{type:{type:String,default:"image"},imageFit:{type:String,default:"contain"},modelValue:{type:String,default:""},width:{type:String,default:"100px"},height:{type:String,default:"100px"},imageText:{type:String},limit:{type:Number,default:1}},emits:["update:modelValue","change"],setup(a,{emit:k}){const c=a,d=E({get(){return c.modelValue},set(e){k("update:modelValue",e)}}),t=h({data:[]});let C=h([]);const f=()=>{d.value=N(t.data).toString(),C=N(t.data).map(e=>e.indexOf("data:image")!=-1?e:w(e))};Z(()=>d.value,()=>{d.value.indexOf("data:image")!=-1?t.data=[d.value]:t.data=[...d.value.split(",").filter(e=>e)],f()},{immediate:!0});const x=E(()=>({width:c.width,height:c.height})),S=e=>{c.limit==1?(t.data.splice(0,1),e&&t.data.push(e.url)):(e.forEach(i=>{t.data.includes(i.url)?A.warning(y("coverTips")):t.data.length<c.limit&&t.data.push(i.url)}),v(()=>{$()})),f(),v(()=>{k("change",d.value)})},z=(e=0)=>{t.data.splice(e,1),f()},u=h({show:!1,index:0}),I=(e=0)=>{u.show=!0,u.index=e},V=T(null);J(()=>{v(()=>{$()})}),T([]);const $=()=>{c.limit!=1&&W.create(V.value,{group:"image-wrap",animation:300,onEnd:e=>{const i=t.data[e.oldIndex];t.data.splice(e.oldIndex,1),t.data.splice(e.newIndex,0,i),f()}})};return(e,i)=>{const j=G,m=K,M=H;return o(),n(b,null,[l("div",Y,[a.limit==1?(o(),n("div",{key:0,class:q(["rounded cursor-pointer overflow-hidden relative border border-solid border-color image-wrap mr-[10px]",{"rounded-full":a.type=="avatar"}]),style:_(r(x))},[t.data.length?(o(),n("div",ee,[l("div",te,[s(j,{class:"w-full h-full",src:t.data[0].indexOf("data:image")!=-1?t.data[0]:r(w)(t.data[0]),fit:a.imageFit},null,8,["src","fit"])]),l("div",le,[s(m,{name:"element ZoomIn",color:"#fff",size:"18px",class:"mr-[10px]",onClick:i[0]||(i[0]=p=>I())}),s(m,{name:"element Delete",color:"#fff",size:"18px",onClick:Q(z,["stop"])},null,8,["onClick"])])])):(o(),B(P,{key:1,limit:a.limit,onConfirm:S},{default:D(()=>[l("div",ae,[s(m,{name:"element Plus",size:"20px",color:"var(--el-text-color-secondary)"}),l("div",ie,F(a.imageText||r(y)("upload.root")),1)])]),_:1},8,["limit"]))],6)):(o(),n(b,{key:1},[l("div",{class:"flex flex-wrap",ref_key:"imgListRef",ref:V},[(o(!0),n(b,null,U(t.data,(p,g)=>(o(),n("div",{class:"rounded cursor-pointer overflow-hidden relative border border-solid border-color image-wrap mr-[10px]",style:_(r(x)),key:p+g},[l("div",oe,[l("div",se,[s(j,{src:r(w)(p),fit:"contain"},null,8,["src"])]),l("div",re,[s(m,{name:"element ZoomIn",color:"#fff",size:"18px",class:"mr-[10px]",onClick:O=>I(g)},null,8,["onClick"]),s(m,{name:"element Delete",color:"#fff",size:"18px",onClick:O=>z(g)},null,8,["onClick"])])])],4))),128))],512),t.data.length<a.limit?(o(),n("div",{key:0,class:"rounded cursor-pointer overflow-hidden relative border border-dashed border-color",style:_(r(x))},[s(P,{limit:a.limit,onConfirm:S},{default:D(()=>[l("div",ne,[s(m,{name:"element Plus",size:"20px",color:"var(--el-text-color-secondary)"}),l("div",ce,F(a.imageText||r(y)("upload.root")),1)])]),_:1},8,["limit"])],4)):L("",!0)],64))]),u.show?(o(),B(M,{key:0,"url-list":r(C),onClose:i[1]||(i[1]=p=>u.show=!1),"initial-index":u.index,"zoom-rate":1},null,8,["url-list","initial-index"])):L("",!0)],64)}}});const $e=X(de,[["__scopeId","data-v-763bc09d"]]);export{$e as default};

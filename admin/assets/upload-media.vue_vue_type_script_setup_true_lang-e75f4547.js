import{d as l,r as u,m as d,b9 as i,G as f,U as g,h as _,v as h,w as y,b,ba as k,u as v,bj as R}from"./index-0e396751.js";/* empty css                  *//* empty css                    */const x=l({__name:"upload-media",props:{type:{type:String,default:"image"}},emits:["success"],setup(n,{emit:c}){const o=n,s=u(null),m=d(()=>{const e={};return e.token=i(),e["site-id"]=f.get("siteId")||0,{action:`/adminapi//wechat/media/${o.type}`,multiple:!0,headers:e,accept:o.type=="image"?".bmp,.png,.jpeg,.jpg,.gif":".mp4",onSuccess:(t,a,j)=>{var p,r;t.code>=1?(c("success",t.data),(p=s.value)==null||p.handleRemove(a)):(a.status="fail",(r=s.value)==null||r.handleRemove(a),g({message:t.msg,type:"error"}))}}});return(e,t)=>{const a=R;return _(),h(a,k(v(m),{ref_key:"uploadRef",ref:s}),{default:y(()=>[b(e.$slots,"default")]),_:3},16)}}});export{x as _};

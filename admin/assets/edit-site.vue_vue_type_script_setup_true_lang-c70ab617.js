import{d as le,r as c,q as ae,m as N,s as a,a2 as oe,h as n,v as _,w as s,a as p,e as t,i as w,t as f,u as r,R as B,c as g,F as E,T,B as A,a0 as F,K as re,L as te,ab as se,aC as de,a1 as ie,cE as ne,bR as ue,M as pe,E as me,X as ce,Y as fe}from"./index-0e396751.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                       *//* empty css                 *//* empty css                     *//* empty css                  *//* empty css                  *//* empty css               *//* empty css                  *//* empty css                  */import"./el-form-item-4ed993c7.js";import{_ as G}from"./member_head-d9fd7b2c.js";import{m as _e,n as ge,o as ve,p as we}from"./site-901e63ef.js";import{c as R}from"./user-14563ef3.js";import{g as be}from"./addon-0f88c35d.js";const Ve={key:0},he={class:"flex items-center"},xe={class:"flex items-center"},ye={key:1,src:G,alt:"",class:"mr-[10px] w-[24px]"},Pe={key:1},ke={class:"flex items-center"},Ee={class:"flex items-center"},Te={key:1,src:G,alt:"",class:"mr-[10px] w-[24px]"},Ue={class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},De={class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},$e={class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},Be={class:"dialog-footer"},Ze=le({__name:"edit-site",emits:["complete"],setup(Ce,{expose:O,emit:j}){const h=c(!1),m=c(!0),U=c([]),k=c([]),z=c([]);R({}).then(({data:i})=>{k.value=i});const D=new Date;D.setTime(D.getTime()+3600*1e3*2*360);const C={site_id:"",site_name:"",real_name:"",uid:"",username:"",password:"",confirm_password:"",expire_time:D,site_domain:"",group_id:""},o=ae({...C}),M=c(),x=c(!0),y=c(!0),P=c(!0),b=i=>{let e=setTimeout(()=>{clearTimeout(e),i=="user_name_input"&&(x.value=!1),i=="password_input"&&(y.value=!1),i=="confirm_password_input"&&(P.value=!1)},200)};(async()=>{U.value=await(await _e()).data})();const K=c([]);be().then(({data:i})=>{K.value=i}).catch();const X=async(i=null)=>{if(m.value=!0,Object.assign(o,C),i){const e=await(await ge(i.site_id)).data;z.value=e,Object.keys(o).forEach(d=>{e[d]!=null&&(o[d]=e[d])})}m.value=!1},Y=N(()=>({site_name:[{required:!0,message:a("siteNamePlaceholder"),trigger:"blur"}],group_id:[{required:!0,message:a("groupIdPlaceholder"),trigger:"blur"}],uid:[{required:!0,message:a("uIdPlaceholder"),trigger:"blur"},{validator:(i,e,d)=>{o.uid===""?d(new Error(a("managerPlaceholder"))):d()},trigger:"blur"}],username:[{required:o.uid==0,message:a("usernamePlaceholder"),trigger:"blur"}],password:[{required:o.uid==0,message:a("passwordPlaceholder"),trigger:"blur"}],real_name:[{required:!0,message:a("userRealNamePlaceholder"),trigger:"blur"}],confirm_password:[{required:o.uid==0,message:a("confirmPasswordPlaceholder"),trigger:"blur"},{validator:(i,e,d)=>{o.uid==0&&e!=o.password?d(new Error(a("confirmPasswordError"))):d()},trigger:"blur"}],expire_time:[{required:!0,message:a("expireTimePlaceholder"),trigger:"blur"}]})),H=N(()=>m.value?"":o.site_id?a("editSite"):a("addSite")),J=async i=>{m.value||!i||await i.validate(async e=>{if(e){m.value=!0;const d=o;(d.site_id?ve:we)(d).then(v=>{m.value=!1,h.value=!1,R({}).then(({data:V})=>{k.value=V}),j("complete")}).catch(()=>{m.value=!1})}})};return window.onload=function(){for(var i=document.getElementsByTagName("input"),e=0;e<i.length;e++)i[e].setAttribute("autocomplete","off")},O({showDialog:h,setFormData:X,loading:m}),(i,e)=>{const d=re,u=te,v=se,V=de,I=oe("Plus"),S=ie,q=ne,Q=ue,W=pe,L=me,Z=ce,ee=fe;return n(),_(Z,{modelValue:h.value,"onUpdate:modelValue":e[27]||(e[27]=l=>h.value=l),title:r(H),width:"500px","destroy-on-close":!0},{footer:s(()=>[p("span",Be,[t(L,{onClick:e[25]||(e[25]=l=>h.value=!1)},{default:s(()=>[w(f(r(a)("cancel")),1)]),_:1}),t(L,{type:"primary",loading:m.value,onClick:e[26]||(e[26]=l=>J(M.value))},{default:s(()=>[w(f(r(a)("confirm")),1)]),_:1},8,["loading"])])]),default:s(()=>[B((n(),_(W,{model:o,"label-width":"100px",ref_key:"formRef",ref:M,rules:r(Y),class:"page-form",autocomplete:"off"},{default:s(()=>[o.site_id==0?(n(),g("div",Ve,[t(u,{label:r(a)("siteName"),prop:"site_name"},{default:s(()=>[t(d,{modelValue:o.site_name,"onUpdate:modelValue":e[0]||(e[0]=l=>o.site_name=l),modelModifiers:{trim:!0},maxlength:"20",clearable:"",placeholder:r(a)("siteNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:r(a)("groupId"),prop:"group_id"},{default:s(()=>[t(V,{modelValue:o.group_id,"onUpdate:modelValue":e[1]||(e[1]=l=>o.group_id=l),clearable:"",placeholder:r(a)("groupIdPlaceholder"),class:"input-width"},{default:s(()=>[(n(!0),g(E,null,T(U.value,(l,$)=>(n(),_(v,{label:l.group_name,value:l.group_id,key:$},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:r(a)("manager"),prop:"uid"},{default:s(()=>[t(V,{modelValue:o.uid,"onUpdate:modelValue":e[2]||(e[2]=l=>o.uid=l),placeholder:r(a)("managerPlaceholder"),class:"input-width",filterable:""},{default:s(()=>[t(v,{label:r(a)("newAddManager"),value:0},{default:s(()=>[p("div",he,[t(S,{class:"mr-[10px]"},{default:s(()=>[t(I)]),_:1}),w(" "+f(r(a)("newAddManager")),1)])]),_:1},8,["label"]),(n(!0),g(E,null,T(k.value,l=>(n(),_(v,{key:l.uid,label:l.username,value:l.uid},{default:s(()=>[p("div",xe,[l.head_img?(n(),_(q,{key:0,src:r(A)(l.head_img),size:"small",class:"mr-[10px]"},null,8,["src"])):(n(),g("img",ye)),w(" "+f(l.username),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),B(p("div",null,[t(u,{label:r(a)("username"),prop:"username"},{default:s(()=>[t(d,{modelValue:o.username,"onUpdate:modelValue":e[3]||(e[3]=l=>o.username=l),modelModifiers:{trim:!0},clearable:"",placeholder:r(a)("usernamePlaceholder"),class:"input-width",readonly:x.value,onClick:e[4]||(e[4]=l=>b("user_name_input")),onBlur:e[5]||(e[5]=l=>x.value=!0)},null,8,["modelValue","placeholder","readonly"])]),_:1},8,["label"]),t(u,{label:r(a)("password"),prop:"password"},{default:s(()=>[t(d,{modelValue:o.password,"onUpdate:modelValue":e[6]||(e[6]=l=>o.password=l),modelModifiers:{trim:!0},clearable:"",placeholder:r(a)("passwordPlaceholder"),class:"input-width","show-password":!0,type:"password",readonly:y.value,onClick:e[7]||(e[7]=l=>b("password_input")),onBlur:e[8]||(e[8]=l=>y.value=!0)},null,8,["modelValue","placeholder","readonly"])]),_:1},8,["label"]),t(u,{label:r(a)("confirmPassword"),prop:"confirm_password"},{default:s(()=>[t(d,{modelValue:o.confirm_password,"onUpdate:modelValue":e[9]||(e[9]=l=>o.confirm_password=l),modelModifiers:{trim:!0},placeholder:r(a)("confirmPasswordPlaceholder"),type:"password","show-password":!0,clearable:"",class:"input-width",readonly:P.value,onClick:e[10]||(e[10]=l=>b("confirm_password_input")),onBlur:e[11]||(e[11]=l=>P.value=!0)},null,8,["modelValue","placeholder","readonly"])]),_:1},8,["label"])],512),[[F,o.uid===0]])])):(n(),g("div",Pe,[t(u,{label:r(a)("siteName")},{default:s(()=>[w(f(o.site_name),1)]),_:1},8,["label"]),t(u,{label:r(a)("groupId"),prop:"group_id"},{default:s(()=>[t(V,{modelValue:o.group_id,"onUpdate:modelValue":e[12]||(e[12]=l=>o.group_id=l),clearable:"",placeholder:r(a)("groupIdPlaceholder"),class:"input-width"},{default:s(()=>[(n(!0),g(E,null,T(U.value,(l,$)=>(n(),_(v,{label:l.group_name,value:l.group_id,key:$},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(u,{label:r(a)("manager"),prop:"uid"},{default:s(()=>[t(V,{modelValue:o.uid,"onUpdate:modelValue":e[13]||(e[13]=l=>o.uid=l),placeholder:r(a)("managerPlaceholder"),class:"input-width",filterable:""},{default:s(()=>[t(v,{label:r(a)("newAddManager"),value:0},{default:s(()=>[p("div",ke,[t(S,{class:"mr-[10px]"},{default:s(()=>[t(I)]),_:1}),w(" "+f(r(a)("newAddManager")),1)])]),_:1},8,["label"]),(n(!0),g(E,null,T(k.value,l=>(n(),_(v,{key:l.uid,label:l.username,value:l.uid},{default:s(()=>[p("div",Ee,[l.head_img?(n(),_(q,{key:0,src:r(A)(l.head_img),size:"small",class:"mr-[10px]"},null,8,["src"])):(n(),g("img",Te)),w(" "+f(l.username),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),B(p("div",null,[t(u,{label:r(a)("username"),prop:"username"},{default:s(()=>[t(d,{modelValue:o.username,"onUpdate:modelValue":e[14]||(e[14]=l=>o.username=l),modelModifiers:{trim:!0},clearable:"",placeholder:r(a)("usernamePlaceholder"),class:"input-width",readonly:x.value,onClick:e[15]||(e[15]=l=>b("user_name_input")),onBlur:e[16]||(e[16]=l=>x.value=!0)},null,8,["modelValue","placeholder","readonly"])]),_:1},8,["label"]),t(u,{label:r(a)("password"),prop:"password"},{default:s(()=>[t(d,{modelValue:o.password,"onUpdate:modelValue":e[17]||(e[17]=l=>o.password=l),modelModifiers:{trim:!0},clearable:"",placeholder:r(a)("passwordPlaceholder"),class:"input-width","show-password":!0,type:"password",readonly:y.value,onClick:e[18]||(e[18]=l=>b("password_input")),onBlur:e[19]||(e[19]=l=>y.value=!0)},null,8,["modelValue","placeholder","readonly"])]),_:1},8,["label"]),t(u,{label:r(a)("confirmPassword"),prop:"confirm_password"},{default:s(()=>[t(d,{modelValue:o.confirm_password,"onUpdate:modelValue":e[20]||(e[20]=l=>o.confirm_password=l),modelModifiers:{trim:!0},placeholder:r(a)("confirmPasswordPlaceholder"),type:"password","show-password":!0,clearable:"",class:"input-width",readonly:P.value,onClick:e[21]||(e[21]=l=>b("confirm_password_input")),onBlur:e[22]||(e[22]=l=>P.value=!0)},null,8,["modelValue","placeholder","readonly"])]),_:1},8,["label"])],512),[[F,o.uid===0]])])),t(u,{label:r(a)("siteDomain"),prop:"site_domain"},{default:s(()=>[t(d,{modelValue:o.site_domain,"onUpdate:modelValue":e[23]||(e[23]=l=>o.site_domain=l),modelModifiers:{trim:!0},clearable:"",placeholder:r(a)("siteDomainPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"]),p("div",null,[p("p",Ue,f(r(a)("siteDomainTips")),1),p("p",De,f(r(a)("siteDomainTipsTwo")),1),p("p",$e,f(r(a)("siteDomainTipsThree")),1)])]),_:1},8,["label"]),t(u,{label:r(a)("expireTime"),prop:"expire_time",class:"input-width"},{default:s(()=>[t(Q,{class:"flex-1 !flex",modelValue:o.expire_time,"onUpdate:modelValue":e[24]||(e[24]=l=>o.expire_time=l),clearable:"",type:"datetime",placeholder:r(a)("expireTimePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[ee,m.value]])]),_:1},8,["modelValue","title"])}}});export{Ze as _};

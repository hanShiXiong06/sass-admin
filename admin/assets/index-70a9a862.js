import{d as q,r as h,j as D,k as O,l as G,m as H,n as j,q as i,s as b,w as u,v as J,x as W,y as Q,z as X,h as s,a as o,c as l,u as n,A as M,F as P,B as d,t as c,e as a,C as F,i as B,f as Y,D as Z,G as ee,H as te,I as se,S as oe,J as le,K as ae,L as ne,E as re,M as ie,N as ue}from"./index-904cb7a2.js";import de from"./Verify-c3ac0055.js";/* empty css                *//* empty css                  */import"./el-form-item-4ed993c7.js";/* empty css                 *//* empty css                 *//* empty css                        */import"./VerifySlide-03851e74.js";import"./index-0d12e988.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./VerifyPoints-4b487191.js";const ce=""+new URL("login_index_left-1a48499b.png",import.meta.url).href,pe=""+new URL("site_login_bg-bf5500bb.png",import.meta.url).href,me={class:"flex rounded-2xl shadow overflow-hidden"},_e={class:"login-main-left w-[450px] flex flex-wrap justify-center"},fe={key:1,src:ce,alt:""},ge={class:"login flex flex-col w-[400px] h-[400px] p-[40px]"},ve={class:"text-center text-lg font-bold mb-[10px]"},he={class:"text-center text-2xl font-bold mb-[26px]"},ye={class:"flex overflow-hidden h-screen w-full relative"},xe=["src"],we={key:1,class:"hidden h-[100%] lg:block",src:pe},ke={class:"w-[100%] lg:w-[60%] h-screen flex flex-col absolute right-0 top-0 bg-[#F8FAFF]"},be={class:"flex justify-center items-center flex-1 h-0"},Fe={class:"site-login-item w-[400px] h-[380px] p-[40px] rounded-2xl shadow bg-[#fff]"},Ve={class:"text-3xl mb-[30px]"},Ce={key:0,class:"flex items-center justify-center mt-[20px] pb-[20px] text-sm text-[#999]"},Re=["href"],Ee={key:0,class:"mr-3"},Se={key:1,class:"mr-3"},Le={key:0,href:"https://beian.miit.gov.cn/",target:"_blank"},Ue={class:"mr-3"},Ie=["href"],Te={class:"mr-3"},je={key:2,class:"flex items-center justify-center mt-[20px] pb-[20px] text-sm text-[#999]"},Me=["href"],Pe={key:0,class:"mr-3"},Be={key:1,class:"mr-3"},Ke={key:0,href:"https://beian.miit.gov.cn/",target:"_blank"},Ne={class:"mr-3"},$e=["href"],ze={class:"mr-3"},st=q({__name:"index",setup(Ae){const v=h(!1),w=h(!1),K=D(),V=W(),C=Y(),t=h(null);O().then(({data:m})=>{t.value=m}),V.redirectedFrom&&(V.query.redirect=V.redirectedFrom.path);const N=G(()=>Z().website),_=h(H()),R=h(null),$=m=>{S({captcha_code:m.captchaVerification})},p=j({username:"",password:""}),f=h(null);(async()=>{w.value=!0;const m=await(await Q()).data;f.value=m,w.value=!1})();const g=h(),E=j({username:[{required:!0,message:i("userPlaceholder"),trigger:"blur"}],password:[{required:!0,message:i("passwordPlaceholder"),trigger:"blur"}]}),y=async m=>{v.value||!m||await m.validate((e,L)=>{e&&(parseInt(f.value.is_captcha)&&_.value=="admin"||parseInt(f.value.is_site_captcha)&&_.value=="site"?R.value.show():S())})},S=(m={})=>{v.value=!0,K.login({username:p.username,password:p.password,...m},_.value).then(e=>{ee.set({key:"app_type",data:_.value}),_.value=="admin"&&te.empty(e.data.userrole)?C.push("/home/index"):C.push({name:_.value=="admin"?se.children[0].name:oe.children[0].name})}).catch(()=>{v.value=!1})};return(m,e)=>{const L=le,k=ae,x=ne,U=re,I=ie,T=ue,z=de,A=X;return s(),b(A,{class:J(["w-full h-screen bg-page flex flex-col",{"login-wrap":_.value=="admin"},{"site-login-wrap":_.value=="site"}])},{default:u(()=>[_.value=="admin"?(s(),b(T,{key:0,class:"login-main items-center justify-center flex-1 h-0"},{default:u(()=>[o("div",me,[o("div",_e,[f.value?(s(),l(P,{key:0},[f.value.bg&&!w.value?(s(),b(L,{key:0,class:"w-[450px] h-[400px]",src:n(M)(f.value.bg),fit:"cover"},null,8,["src"])):(s(),l("img",fe))],64)):d("",!0)]),o("div",ge,[o("h3",ve,c(n(N).site_name||n(i)("siteTitle")),1),o("h3",he,c(n(i)("platform")),1),a(I,{model:p,ref_key:"formRef",ref:g,rules:E,class:"mt-[30px]"},{default:u(()=>[a(x,{prop:"username"},{default:u(()=>[a(k,{modelValue:p.username,"onUpdate:modelValue":e[0]||(e[0]=r=>p.username=r),modelModifiers:{trim:!0},placeholder:n(i)("userPlaceholder"),autocomplete:"off",onKeyup:e[1]||(e[1]=F(r=>y(g.value),["enter"])),class:"h-[40px]"},null,8,["modelValue","placeholder"])]),_:1}),a(x,{prop:"password",class:"mt-[30px]"},{default:u(()=>[a(k,{modelValue:p.password,"onUpdate:modelValue":e[2]||(e[2]=r=>p.password=r),modelModifiers:{trim:!0},placeholder:n(i)("passwordPlaceholder"),type:"password",autocomplete:"new-password",onKeyup:e[3]||(e[3]=F(r=>y(g.value),["enter"])),"show-password":!0,class:"h-[40px]"},null,8,["modelValue","placeholder"])]),_:1}),a(x,null,{default:u(()=>[a(U,{type:"primary",class:"mt-[30px] !h-[40px] w-full",onClick:e[4]||(e[4]=r=>y(g.value)),loading:v.value},{default:u(()=>[B(c(v.value?n(i)("logging"):n(i)("login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])]),_:1})):!w.value&&_.value=="site"?(s(),b(T,{key:1,class:"login-main w-full login-site-main items-center h-screen justify-evenly bg-[#F8FAFF]"},{default:u(()=>[o("div",ye,[f.value?(s(),l(P,{key:0},[f.value.site_bg&&!w.value?(s(),l("img",{key:0,class:"hidden h-[100%] lg:block",src:n(M)(f.value.site_bg)},null,8,xe)):(s(),l("img",we))],64)):d("",!0),o("div",ke,[o("div",be,[o("div",Fe,[o("h3",Ve,c(n(i)("siteLogin")),1),a(I,{model:p,ref_key:"formRef",ref:g,rules:E},{default:u(()=>[a(x,{prop:"username"},{default:u(()=>[a(k,{modelValue:p.username,"onUpdate:modelValue":e[5]||(e[5]=r=>p.username=r),modelModifiers:{trim:!0},onKeyup:e[6]||(e[6]=F(r=>y(g.value),["enter"])),autocomplete:"off",class:"h-[40px]",placeholder:n(i)("userPlaceholder")},null,8,["modelValue","placeholder"])]),_:1}),a(x,{prop:"password",class:"mt-[30px]"},{default:u(()=>[a(k,{type:"password",modelValue:p.password,"onUpdate:modelValue":e[7]||(e[7]=r=>p.password=r),modelModifiers:{trim:!0},onKeyup:e[8]||(e[8]=F(r=>y(g.value),["enter"])),autocomplete:"new-password","show-password":!0,class:"h-[40px]",placeholder:n(i)("passwordPlaceholder")},null,8,["modelValue","placeholder"])]),_:1}),a(x,null,{default:u(()=>[a(U,{type:"primary",class:"mt-[30px] !h-[40px] w-full",onClick:e[9]||(e[9]=r=>y(g.value)),loading:v.value},{default:u(()=>[B(c(v.value?n(i)("logging"):n(i)("login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])]),t.value?(s(),l("div",Ce,[o("a",{href:t.value.copyright_link,target:"_blank"},[t.value.copyright_desc?(s(),l("span",Ee,c(t.value.copyright_desc),1)):d("",!0),t.value.company_name?(s(),l("span",Se,c(t.value.company_name),1)):d("",!0)],8,Re),t.value.icp?(s(),l("a",Le,[o("span",Ue,c(t.value.icp),1)])):d("",!0),t.value.gov_record?(s(),l("a",{key:1,href:t.value.gov_url,target:"_blank"},[o("span",Te,c(t.value.gov_record),1)],8,Ie)):d("",!0)])):d("",!0)])])]),_:1})):d("",!0),t.value&&_.value=="admin"?(s(),l("div",je,[o("a",{href:t.value.copyright_link,target:"_blank"},[t.value.copyright_desc?(s(),l("span",Pe,c(t.value.copyright_desc),1)):d("",!0),t.value.company_name?(s(),l("span",Be,c(t.value.company_name),1)):d("",!0)],8,Me),t.value.icp?(s(),l("a",Ke,[o("span",Ne,c(t.value.icp),1)])):d("",!0),t.value.gov_record?(s(),l("a",{key:1,href:t.value.gov_url,target:"_blank"},[o("span",ze,c(t.value.gov_record),1)],8,$e)):d("",!0)])):d("",!0),a(z,{onSuccess:$,mode:m.pop,captchaType:"blockPuzzle",imgSize:{width:"330px",height:"155px"},ref_key:"verifyRef",ref:R},null,8,["mode"])]),_:1},8,["class"])}}});export{st as default};

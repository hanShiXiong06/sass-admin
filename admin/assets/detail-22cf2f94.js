import{d as le,y as se,f as oe,r as E,q as T,h as d,c as v,e as l,w as t,u as e,R as j,v as p,F as P,a as i,t as n,s as a,C as c,B as ne,T as A,i as N,a5 as ie,aQ as de,a7 as re,L as ce,aM as ue,aN as _e,b$ as pe,ac as me,ad as ve,K as he,ab as fe,aC as be,E as ye,M as ge,ax as xe,ay as we,W as ke,aa as Ce,Y as Ee}from"./index-0e396751.js";/* empty css                   *//* empty css                 *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                    *//* empty css                *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                     *//* empty css               *//* empty css               */import"./el-form-item-4ed993c7.js";/* empty css                *//* empty css                   *//* empty css                       */import{a as Te}from"./giftcard-3943317a.js";import{b as Pe,c as Ne,a as Be,d as Ve}from"./card-a9ab6247.js";import{_ as De}from"./_plugin-vue_export-helper-c27b6911.js";const Le={class:"main-container"},Se={class:"panel-title"},Fe={class:"input-width"},Re={class:"input-width"},$e={class:"input-width"},ze={class:"input-width"},Ue={key:0,class:"input-width"},Ge={key:1,class:"input-width"},Me={key:2,class:"input-width"},Oe={class:"input-width"},je={class:"input-width"},Ae={key:0,class:"input-width"},Ie={key:1,class:"input-width"},qe={class:"input-width"},We={class:"panel-title"},He={class:"text-[14px]"},Ke={class:"text-[14px]"},Qe={class:"text-[14px]"},Ye={class:"text-[14px]"},Je={class:"text-[14px]"},Xe={class:"text-[14px]"},Ze={class:"text-[14px]"},et={class:"text-[14px]"},tt={class:"text-[14px]"},at={class:"panel-title"},lt={key:0,class:"text-[14px]"},st={key:1,class:"text-[14px]"},ot={key:1,class:"text-[14px]"},nt={class:"panel-title"},it={class:"text-[14px]"},dt={class:"text-[14px]"},rt={class:"text-[14px]"},ct={class:"text-[14px]"},ut={class:"panel-title"},_t={class:"flex"},pt={class:"flex items-center shrink-0"},mt=["src"],vt={class:"flex flex-col"},ht={class:"multi-hidden text-[14px]"},ft={class:"text-[12px] text-[#999]"},bt={class:"text-[14px]"},yt={class:"text-[14px]"},gt={class:"text-[14px]"},xt={class:"text-[14px]"},wt={class:"text-[14px]"},kt={class:"panel-title"},Ct={class:"mt-[10px]"},Et=["onClick"],Tt={key:1},Pt=["onClick"],Nt={key:1},Bt={key:0},Vt={key:1},Dt={key:0},Lt={key:1},St={class:"mt-[16px] flex justify-end"},Ft=le({__name:"detail",setup(Rt){const D=se(),B=oe(),I=D.meta.title,L=E(D.query.giftcard_id||0),k=E(!0),o=E(null),S=T({}),F=T({}),R=T({}),q=()=>{Pe().then(m=>{const r=m.data;r&&Object.assign(S,r)}),Ne({}).then(m=>{const r=m.data;r&&Object.assign(F,r)}),$()},$=()=>{Te(L.value).then(m=>{m.data&&(o.value=m.data,k.value=!1,Object.assign(R,F[o.value.type][o.value.card_right_type]))}).catch(()=>{k.value=!1})};q();let u=T({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{card_no:"",giftcard_id:L.value,source:"",status:""}});const z=E(),W=m=>{m&&(m.resetFields(),x())},x=(m=1)=>{u.loading=!0,u.page=m,Be({page:u.page,limit:u.limit,...u.searchParam}).then(r=>{u.loading=!1,u.data=r.data.data,u.total=r.data.total}).catch(()=>{u.loading=!1})};x();const H=m=>{ie.confirm(a("cardDeleteTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{Ve(m).then(()=>{x(),$()}).catch(()=>{})})},K=(m,r)=>{u.searchParam.status=m.props.name,x()},U=m=>{const r=B.resolve({path:"/member/detail",query:{id:m}});window.open(r.href)},Q=m=>{const r=B.resolve({path:"/shop_giftcard/giftcard/card_detail",query:{card_id:m.card_id}});window.open(r.href)};return(m,r)=>{const Y=de,y=re,f=ce,h=ue,w=_e,b=pe,_=me,V=ve,J=he,X=fe,Z=be,C=ye,G=ge,M=xe,ee=we,te=ke,ae=Ce,O=Ee;return d(),v("div",Le,[l(y,{class:"card !border-none mb-[15px]",shadow:"never"},{default:t(()=>[l(Y,{content:e(I),icon:m.ArrowLeft,onBack:r[0]||(r[0]=s=>e(B).push({path:"/shop_giftcard/giftcard/list"}))},null,8,["content","icon"])]),_:1}),j((d(),p(G,{model:o.value,"label-width":"100px",ref:"formRef",class:"page-form","label-position":"left"},{default:t(()=>[o.value?(d(),v(P,{key:0},[l(y,{class:"box-card !border-none relative",shadow:"never"},{default:t(()=>[i("h3",Se,n(e(a)("giftcardInfoTitle")),1),l(w,{class:"row-bg px-[30px]",gutter:20},{default:t(()=>[l(h,{span:8},{default:t(()=>[l(f,{label:e(a)("cardType")},{default:t(()=>[i("div",Fe,n(o.value.type_name),1)]),_:1},8,["label"]),l(f,{label:e(a)("cardName")},{default:t(()=>[i("div",Re,n(o.value.card_name),1)]),_:1},8,["label"]),l(f,{label:e(a)("cardCategory")},{default:t(()=>[i("div",$e,n(o.value.category.category_name),1)]),_:1},8,["label"])]),_:1}),l(h,{span:8},{default:t(()=>[l(f,{label:e(a)("cardRightType")},{default:t(()=>[i("div",ze,n(o.value.card_right_type_name),1)]),_:1},8,["label"]),l(f,{label:e(a)("validityType")},{default:t(()=>[o.value.validity_type=="forever"?(d(),v("div",Ue,n(e(a)("validityForever")),1)):c("",!0),o.value.validity_type=="day"?(d(),v("div",Ge,"购买后"+n(o.value.validity_day)+"天有效",1)):c("",!0),o.value.validity_type=="date"?(d(),v("div",Me,"使用截止时间为："+n(o.value.validity_time||""),1)):c("",!0)]),_:1},8,["label"]),l(f,{label:e(a)("status")},{default:t(()=>[i("div",Oe,n(o.value.status==1?e(a)("statusOn"):e(a)("statusOff")),1)]),_:1},8,["label"])]),_:1}),l(h,{span:8},{default:t(()=>[l(f,{label:e(a)("isGive")},{default:t(()=>[i("div",je,n(o.value.is_give==1?"是":"否"),1)]),_:1},8,["label"]),o.value.card_right_type=="goods"?(d(),p(f,{key:0,label:e(a)("deliveryWay")},{default:t(()=>[o.value.delivery_way=="all"?(d(),v("div",Ae,n(e(a)("deliveryWayByAll")),1)):o.value.delivery_way=="batch"?(d(),v("div",Ie,n(e(a)("deliveryWayByBatch")),1)):c("",!0)]),_:1},8,["label"])):c("",!0),o.value.card_right_type=="goods"?(d(),p(f,{key:1,label:e(a)("cardPrice")},{default:t(()=>[i("div",qe,"￥"+n(o.value.card_price),1)]),_:1},8,["label"])):c("",!0)]),_:1})]),_:1})]),_:1}),l(y,{class:"box-card !border-none relative",shadow:"never"},{default:t(()=>[i("h3",We,n(e(a)("dataStatisticsTitle")),1),o.value.type=="virtual"?(d(),p(w,{key:0,class:"row-bg px-[30px]",gutter:20},{default:t(()=>[l(h,{span:6},{default:t(()=>[l(b,{value:o.value.sale_count},{title:t(()=>[i("span",He,n(e(a)("saleCount")),1)]),_:1},8,["value"])]),_:1}),l(h,{span:6},{default:t(()=>[l(b,{value:o.value.use_count},{title:t(()=>[i("span",Ke,n(e(a)("useCount")),1)]),_:1},8,["value"])]),_:1}),l(h,{span:6},{default:t(()=>[l(b,{value:o.value.sale_count-o.value.use_count-o.value.invalid_count},{title:t(()=>[i("span",Qe,n(e(a)("notUseCount")),1)]),_:1},8,["value"])]),_:1}),l(h,{span:6},{default:t(()=>[l(b,{value:o.value.invalid_count},{title:t(()=>[i("span",Ye,n(e(a)("invalidCount")),1)]),_:1},8,["value"])]),_:1})]),_:1})):c("",!0),o.value.type=="real"?(d(),p(w,{key:1,class:"row-bg px-[30px]",gutter:0},{default:t(()=>[l(h,{span:5},{default:t(()=>[l(b,{value:o.value.make_card_count},{title:t(()=>[i("span",Je,n(e(a)("makeCardCount")),1)]),_:1},8,["value"])]),_:1}),l(h,{span:5},{default:t(()=>[l(b,{value:o.value.activate_count},{title:t(()=>[i("span",Xe,n(e(a)("activateCount")),1)]),_:1},8,["value"])]),_:1}),l(h,{span:5},{default:t(()=>[l(b,{value:o.value.use_count},{title:t(()=>[i("span",Ze,n(e(a)("useCount")),1)]),_:1},8,["value"])]),_:1}),l(h,{span:5},{default:t(()=>[l(b,{value:o.value.activate_count-o.value.use_count-o.value.invalid_count},{title:t(()=>[i("span",et,n(e(a)("notUseCount")),1)]),_:1},8,["value"])]),_:1}),l(h,{span:5},{default:t(()=>[l(b,{value:o.value.invalid_count},{title:t(()=>[i("span",tt,n(e(a)("invalidCount")),1)]),_:1},8,["value"])]),_:1})]),_:1})):c("",!0)]),_:1}),l(y,{class:"box-card !border-none relative",shadow:"never"},{default:t(()=>[i("h3",at,n(e(a)("useRuleTitle")),1),l(w,{class:"row-bg px-[30px]",gutter:20},{default:t(()=>[l(h,{span:8},{default:t(()=>[o.value.card_right_type=="goods"?(d(),v(P,{key:0},[o.value.card_goods_type=="all"?(d(),v("p",lt,"持卡人兑换时，可从按照商品列表中商品数量进行兑换")):c("",!0),o.value.card_goods_type=="diy"?(d(),v("p",st,"持卡人兑换时，可从以下商品列表中任选"+n(o.value.card_goods_count)+"件",1)):c("",!0)],64)):c("",!0),o.value.card_right_type=="balance"?(d(),v("p",ot,"持卡人兑换时，将储值卡的储值余额充值到账户余额中")):c("",!0)]),_:1})]),_:1})]),_:1}),o.value.card_right_type=="balance"?(d(),p(y,{key:0,class:"box-card !border-none relative",shadow:"never"},{default:t(()=>[i("h3",nt,n(e(a)("balanceTitle")),1),l(w,{class:"row-bg px-[30px]",gutter:20},{default:t(()=>[l(h,{span:24},{default:t(()=>[l(V,{data:o.value.balance_json,size:"large","max-height":"400",border:"",style:{"max-width":"850px"}},{default:t(()=>[l(_,{prop:"balance",label:e(a)("balanceValue"),"min-width":"120"},{default:t(({row:s})=>[i("div",null,"￥"+n(s.balance),1)]),_:1},8,["label"]),l(_,{prop:"price",label:e(a)("balancePrice"),"min-width":"120",align:"center"},{default:t(({row:s})=>[i("div",null,"￥"+n(s.price),1)]),_:1},8,["label"]),o.value.type=="real"?(d(),p(_,{key:0,label:e(a)("toActivateCount"),"min-width":"120",align:"center"},{default:t(({row:s})=>[i("span",it,n(s.to_activate_num),1)]),_:1},8,["label"])):c("",!0),l(_,{label:e(a)("notUseCount"),"min-width":"120",align:"center"},{default:t(({row:s})=>[i("span",dt,n(s.can_use_num),1)]),_:1},8,["label"]),l(_,{label:e(a)("useCount"),"min-width":"120",align:"center"},{default:t(({row:s})=>[i("span",rt,n(s.use_num),1)]),_:1},8,["label"]),l(_,{label:e(a)("invalidCount"),"min-width":"120",align:"center"},{default:t(({row:s})=>[i("span",ct,n(s.invalid_num),1)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})]),_:1})]),_:1})):c("",!0),o.value.card_right_type=="goods"?(d(),p(y,{key:1,class:"box-card !border-none relative",shadow:"never"},{default:t(()=>[i("h3",ut,n(e(a)("goodsSkuListTitle")),1),l(V,{data:o.value.goods_sku_list,size:"large",border:"","max-height":"400",style:{"max-width":"950px"}},{default:t(()=>[l(_,{label:e(a)("goodsName"),align:"left",width:"350"},{default:t(({row:s})=>[i("div",_t,[i("div",pt,[i("img",{class:"w-[50px] h-[50px] mr-[10px]",src:e(ne)(s.sku.sku_image)},null,8,mt)]),i("div",vt,[i("p",ht,n(s.goods.goods_name),1),i("span",ft,n(s.sku.sku_name),1)])])]),_:1},8,["label"]),l(_,{label:e(a)("price"),"min-width":"120",align:"center"},{default:t(({row:s})=>[i("span",bt,"￥"+n(s.sku.price),1)]),_:1},8,["label"]),o.value.card_goods_type=="all"?(d(),p(_,{key:0,label:e(a)("canExchangeNum"),"min-width":"120",align:"center"},{default:t(({row:s})=>[i("span",yt,n(s.total_num),1)]),_:1},8,["label"])):c("",!0),l(_,{label:e(a)("hasExchangeNum"),"min-width":"120",align:"center"},{default:t(({row:s})=>[i("span",gt,n(s.use_num),1)]),_:1},8,["label"]),o.value.card_goods_type=="all"?(d(),p(_,{key:1,label:e(a)("notExchangeNum"),"min-width":"120",align:"center"},{default:t(({row:s})=>[i("span",xt,n(s.not_use_num),1)]),_:1},8,["label"])):c("",!0),o.value.card_goods_type=="all"?(d(),p(_,{key:2,label:e(a)("invalidNum"),"min-width":"120",align:"center"},{default:t(({row:s})=>[i("span",wt,n(s.invalid_num),1)]),_:1},8,["label"])):c("",!0)]),_:1},8,["data"])]),_:1})):c("",!0),l(y,{class:"box-card !border-none relative",shadow:"never"},{default:t(()=>[i("h3",kt,n(e(a)("cardListTitle")),1),l(G,{inline:!0,model:e(u).searchParam,ref_key:"searchFormRef",ref:z},{default:t(()=>[l(f,{label:e(a)("cardNo"),prop:"card_no"},{default:t(()=>[l(J,{modelValue:e(u).searchParam.card_no,"onUpdate:modelValue":r[1]||(r[1]=s=>e(u).searchParam.card_no=s),modelModifiers:{trim:!0},placeholder:e(a)("cardNoPlaceholder"),maxlength:"30"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(f,{label:e(a)("cardSource"),prop:"source",class:"form-item-wrap"},{default:t(()=>[l(Z,{modelValue:e(u).searchParam.source,"onUpdate:modelValue":r[2]||(r[2]=s=>e(u).searchParam.source=s),placeholder:e(a)("cardSourcePlaceholder"),clearable:""},{default:t(()=>[(d(!0),v(P,null,A(S,(s,g)=>(d(),p(X,{key:g,label:s,value:g},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(f,null,{default:t(()=>[l(C,{type:"primary",onClick:r[3]||(r[3]=s=>x())},{default:t(()=>[N(n(e(a)("search")),1)]),_:1}),l(C,{onClick:r[4]||(r[4]=s=>W(z.value))},{default:t(()=>[N(n(e(a)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"]),i("div",Ct,[l(ee,{modelValue:e(u).searchParam.status,"onUpdate:modelValue":r[5]||(r[5]=s=>e(u).searchParam.status=s),onTabClick:K},{default:t(()=>[l(M,{label:e(a)("statusAll"),name:""},null,8,["label"]),(d(!0),v(P,null,A(R,(s,g)=>(d(),p(M,{label:s,name:g},null,8,["label","name"]))),256))]),_:1},8,["modelValue"]),j((d(),p(V,{data:e(u).data,size:"large"},{empty:t(()=>[i("span",null,n(e(u).loading?"":e(a)("emptyData")),1)]),default:t(()=>[l(_,{prop:"card_no",label:e(a)("cardNo"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),o.value.type=="real"?(d(),p(_,{key:0,prop:"card_key",label:e(a)("cardKey"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"])):c("",!0),o.value.card_right_type=="balance"?(d(),p(_,{key:1,prop:"balance",label:e(a)("cardBalance"),"min-width":"100","show-overflow-tooltip":!0},{default:t(({row:s})=>[i("span",null,"￥"+n(s.balance),1)]),_:1},8,["label"])):c("",!0),l(_,{prop:"source_name",label:e(a)("cardSource"),"min-width":"80","show-overflow-tooltip":!0},null,8,["label"]),l(_,{prop:"create_time",label:e(a)("createTime"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),o.value.type=="real"?(d(),p(_,{key:2,label:e(a)("activateMember"),"min-width":"120"},{default:t(({row:s})=>[s.member?(d(),v("span",{key:0,class:"text-primary cursor-pointer",onClick:g=>U(s.member.member_id)},n(s.member.nickname),9,Et)):(d(),v("span",Tt,"--"))]),_:1},8,["label"])):c("",!0),o.value.type=="virtual"?(d(),p(_,{key:3,label:e(a)("formMember"),"min-width":"120"},{default:t(({row:s})=>[s.member?(d(),v("span",{key:0,class:"text-primary cursor-pointer",onClick:g=>U(s.member.member_id)},n(s.member.nickname),9,Pt)):(d(),v("span",Nt,"--"))]),_:1},8,["label"])):c("",!0),l(_,{prop:"status_name",label:e(a)("status"),"min-width":"80","show-overflow-tooltip":!0},null,8,["label"]),o.value.type=="real"?(d(),p(_,{key:4,prop:"activate_time",label:e(a)("activateTime"),"min-width":"100","show-overflow-tooltip":!0},{default:t(({row:s})=>[s.activate_time?(d(),v("div",Bt,n(s.activate_time),1)):(d(),v("div",Vt,"--"))]),_:1},8,["label"])):c("",!0),l(_,{prop:"validity_time",label:e(a)("validityTime"),"min-width":"100","show-overflow-tooltip":!0},{default:t(({row:s})=>[s.validity_time?(d(),v("div",Dt,n(s.validity_time),1)):(d(),v("div",Lt,n(e(a)("validityForever")),1))]),_:1},8,["label"]),l(_,{prop:"total_num",label:e(a)("totalNum"),"min-width":"120","show-overflow-tooltip":!0},{default:t(({row:s})=>[i("span",null,n(s.use_num)+"/"+n(s.total_num),1)]),_:1},8,["label"]),l(_,{label:e(a)("operation"),fixed:"right","min-width":"80",align:"right"},{default:t(({row:s})=>[s.status!="to_activate"?(d(),p(C,{key:0,type:"primary",link:"",onClick:g=>Q(s)},{default:t(()=>[N(n(e(a)("cardDetailAction")),1)]),_:2},1032,["onClick"])):c("",!0),s.status=="to_activate"?(d(),p(C,{key:1,type:"primary",link:"",onClick:g=>H(s.card_id)},{default:t(()=>[N(n(e(a)("delete")),1)]),_:2},1032,["onClick"])):c("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[O,e(u).loading]]),i("div",St,[l(te,{"current-page":e(u).page,"onUpdate:current-page":r[6]||(r[6]=s=>e(u).page=s),"page-size":e(u).limit,"onUpdate:page-size":r[7]||(r[7]=s=>e(u).limit=s),layout:"total, sizes, prev, pager, next, jumper",total:e(u).total,onSizeChange:r[8]||(r[8]=s=>x()),onCurrentChange:x},null,8,["current-page","page-size","total"])])])]),_:1})],64)):c("",!0),!k.value&&!o.value?(d(),p(y,{key:1,class:"box-card !border-none relative",shadow:"never"},{default:t(()=>[l(ae,{description:e(a)("cardInfoEmpty")},null,8,["description"])]),_:1})):c("",!0)]),_:1},8,["model"])),[[O,k.value]])])}}});const ra=De(Ft,[["__scopeId","data-v-f24c3d64"]]);export{ra as default};

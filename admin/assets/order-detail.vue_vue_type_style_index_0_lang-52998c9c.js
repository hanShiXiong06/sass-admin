import{d as Z,r as b,y as j,f as A,h as r,v as h,w as a,R as H,c as p,e as l,u as t,s as e,a as o,t as s,C as u,i as J,a5 as K,ax as Q,ay as W,L as X,aM as ee,aN as te,ac as ae,E as le,ad as oe,M as se,aa as ne,a7 as ie,bZ as re,Y as de}from"./index-0e396751.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                 *//* empty css                *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                  *//* empty css                        *//* empty css               *//* empty css               *//* empty css               */import"./el-form-item-4ed993c7.js";/* empty css                    */import{_ as _e,c as ce,g as ue}from"./order-notes.vue_vue_type_style_index_0_lang-f14bc284.js";const pe={class:"main-container"},me={key:0},fe={class:"input-width"},ve={class:"input-width"},be={class:"input-width"},he={class:"input-width"},xe={class:"input-width"},ye={class:"input-width line-feed"},we={class:"input-width line-feed"},ge={class:"input-width line-feed"},ke={class:"input-width"},Ce={class:"input-width line-feed"},Ee={class:"input-width line-feed"},Te={key:1},Ne={class:"mb-[20px]"},De={class:"ml-[30px] text-[14px] mr-[20px]"},Ve={class:"text-[14px]"},Be={class:"flex mt-[10px]"},Fe={class:"flex ml-[30px] mt-[15px]"},Ie={class:"text-[14px] text-[#ff7f5b]"},Re={class:"ml-[10px]"},Se={class:"text-[14px] text-[#a4a4a4]"},Me={key:2},Le={class:"text-[14px]"},Oe={key:0},$e={key:1},it=Z({__name:"order-detail",emits:["load"],setup(qe,{expose:T,emit:N}){const x=b(!1),m=b(!1);b(!1);let D="订单详情",y="";j();const C=A(),V=_=>{x.value=!1},f=b("order"),n=b(null),B=async()=>{m.value=!0,y?await ue(y).then(({data:_})=>{n.value=_,m.value=!1}).catch(()=>{}):m.value=!1},w=b(null),F=()=>{w.value.setFormData(n.value),w.value.showDialog=!0},I=()=>{K.confirm(e("orderCloseTips"),e("warning"),{confirmButtonText:e("confirm"),cancelButtonText:e("cancel"),type:"warning"}).then(()=>{ce(y).then(()=>{E()})})},R=_=>{const c=C.resolve({path:"/shop_giftcard/giftcard/card_detail",query:{card_id:_.card_id}});window.open(c.href)},S=_=>{const c=C.resolve({path:"/member/detail",query:{id:_}});window.open(c.href)},M=async(_=null)=>{y=_.id,n.value=null,f.value="order",B()},E=()=>{x.value=!1,N("load")};return T({showDialog:x,setFormData:M}),(_,c)=>{const g=Q,L=W,d=X,k=ee,O=te,v=ae,$=le,q=oe,G=se,P=ne,U=ie,z=re,Y=de;return r(),h(z,{modelValue:x.value,"onUpdate:modelValue":c[2]||(c[2]=i=>x.value=i),title:t(D),direction:"rtl","before-close":V,class:"member-detail-drawer"},{default:a(()=>[H((r(),p("div",pe,[l(L,{modelValue:f.value,"onUpdate:modelValue":c[0]||(c[0]=i=>f.value=i),class:"pb-[10px]",onTabChange:_.tabChange},{default:a(()=>[l(g,{label:t(e)("orderInfo"),name:"order"},null,8,["label"]),l(g,{label:t(e)("orderStatus"),name:"state"},null,8,["label"]),l(g,{label:t(e)("cardListTitle"),name:"goods"},null,8,["label"])]),_:1},8,["modelValue","onTabChange"]),m.value?u("",!0):(r(),h(G,{key:0,model:n.value,"label-width":"100px",ref:"formRef",class:"page-form","label-position":"left"},{default:a(()=>[f.value=="order"?(r(),p("div",me,[l(O,{class:"row-bg px-[30px] mb-[20px]",gutter:20},{default:a(()=>[l(k,{span:8},{default:a(()=>[l(d,{label:t(e)("orderNo")},{default:a(()=>[o("div",fe,s(n.value.order_no),1)]),_:1},8,["label"]),l(d,{label:t(e)("orderForm")},{default:a(()=>[o("div",ve,s(n.value.order_from_name),1)]),_:1},8,["label"]),n.value.out_trade_no?(r(),h(d,{key:0,label:t(e)("outTradeNo")},{default:a(()=>[o("div",be,s(n.value.out_trade_no),1)]),_:1},8,["label"])):u("",!0),l(d,{label:t(e)("orderStatus")},{default:a(()=>[o("div",he,s(n.value.status_name),1)]),_:1},8,["label"]),l(d,{label:t(e)("buyInfo")},{default:a(()=>[o("div",{class:"input-width text-primary cursor-pointer",onClick:c[1]||(c[1]=i=>S(n.value.member.member_id))},s(n.value.member.nickname),1)]),_:1},8,["label"]),n.value.pay?(r(),h(d,{key:1,label:t(e)("detailPayType")},{default:a(()=>[o("div",xe,s(n.value.pay.type_name),1)]),_:1},8,["label"])):u("",!0)]),_:1}),l(k,{span:8},{default:a(()=>[l(d,{label:t(e)("giftCardName")},{default:a(()=>[o("div",ye,s(n.value.body),1)]),_:1},8,["label"]),l(d,{label:t(e)("cardRightType")},{default:a(()=>[o("div",we,s(n.value.card_right_type_name),1)]),_:1},8,["label"]),l(d,{label:t(e)("giftCardNum")},{default:a(()=>[o("div",ge,s(n.value.num),1)]),_:1},8,["label"])]),_:1}),l(k,{span:8},{default:a(()=>[l(d,{label:t(e)("createTime")},{default:a(()=>[o("div",ke,s(n.value.create_time),1)]),_:1},8,["label"]),l(d,{label:t(e)("memberRemark")},{default:a(()=>[o("div",Ce,s(n.value.member_remark??"--"),1)]),_:1},8,["label"]),l(d,{label:t(e)("notes")},{default:a(()=>[o("div",Ee,s(n.value.shop_remark??"--"),1)]),_:1},8,["label"])]),_:1})]),_:1})])):u("",!0),f.value=="state"?(r(),p("div",Te,[o("div",Ne,[o("div",null,[o("span",De,s(t(e)("orderStatus"))+"：",1),o("span",Ve,s(n.value.status_name),1)]),o("div",Be,[o("span",{class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#ff7f5b] bg-[#fff0e5] cursor-pointer",onClick:F},s(t(e)("notes")),1),n.value.status==1?(r(),p("span",{key:0,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:I},s(t(e)("close")),1)):u("",!0)]),o("div",Fe,[o("span",Ie,s(t(e)("remind"))+"：",1),o("div",Re,[o("p",Se,s(t(e)("remindTips1")),1)])])])])):u("",!0),f.value=="goods"?(r(),p("div",Me,[l(q,{data:n.value.card,size:"large","max-height":"400"},{default:a(()=>[l(v,{label:t(e)("cardNo"),"min-width":"120"},{default:a(({row:i})=>[o("span",Le,s(i.card_no),1)]),_:1},8,["label"]),n.value.card_right_type=="balance"?(r(),h(v,{key:0,prop:"balance",label:t(e)("cardBalance"),"min-width":"120","show-overflow-tooltip":!0},{default:a(({row:i})=>[o("span",null,"￥"+s(i.balance),1)]),_:1},8,["label"])):u("",!0),l(v,{prop:"status_name",label:t(e)("cardStatus"),"min-width":"120","show-overflow-tooltip":!0},null,8,["label"]),l(v,{prop:"validity_time",label:t(e)("validityTime"),"min-width":"120","show-overflow-tooltip":!0},{default:a(({row:i})=>[i.validity_time?(r(),p("div",Oe,s(i.validity_time),1)):(r(),p("div",$e,s(t(e)("validityForever")),1))]),_:1},8,["label"]),l(v,{prop:"total_num",label:t(e)("totalNum"),"min-width":"120","show-overflow-tooltip":!0},{default:a(({row:i})=>[o("span",null,s(i.use_num)+"/"+s(i.total_num),1)]),_:1},8,["label"]),l(v,{label:t(e)("operation"),"min-width":"120",align:"right"},{default:a(({row:i})=>[l($,{type:"primary",link:"",onClick:Ge=>R(i)},{default:a(()=>[J(s(t(e)("toCardDetail")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])])):u("",!0)]),_:1},8,["model"])),!m.value&&!n.value?(r(),h(U,{key:1,class:"box-card !border-none relative",shadow:"never"},{default:a(()=>[l(P,{description:t(e)("orderInfoEmpty")},null,8,["description"])]),_:1})):u("",!0),l(_e,{ref_key:"orderNotesDialog",ref:w,onComplete:E},null,512)])),[[Y,m.value]])]),_:1},8,["modelValue","title"])}}});export{it as _};

import{d as $,r as h,q,h as r,v as x,w as t,R as N,c as d,e,u as l,s as i,a as o,B as k,t as c,C as v,i as A,ax as J,ay as W,J as Y,L as Z,aM as G,aN as H,M as K,ac as O,ad as Q,W as X,bZ as ee,Y as te}from"./index-0e396751.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css               *//* empty css               */import"./el-form-item-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                    */import{_ as T}from"./default_img-44957769.js";import{_ as ae}from"./member_head-d9fd7b2c.js";import{g as le}from"./content-6035851c.js";import{g as oe}from"./comment-91fc331d.js";const ne={class:"main-container"},se={key:0},ie={class:"flex items-center min-w-[50px] mr-[10px]"},me=o("img",{class:"w-[50px] h-[50px]",src:T,it:"contain"},null,-1),re={class:"input-width"},ce={class:"input-width"},pe={class:"input-width"},_e={key:1},de={class:"flex items-center cursor-pointer"},ue={class:"min-w-[70px] h-[70px] flex items-center justify-center"},fe=o("div",{class:"image-slot"},[o("img",{class:"w-[70px] h-[70px]",src:T})],-1),ve={key:1,class:"w-[70px] h-[70px]",src:T,fit:"contain"},be={class:"ml-2 flex flex-col items-start"},ge=["title"],he={class:"text-primary text-[12px]"},xe={key:2},we={key:0,class:"flex items-center"},ye={class:"mr-[10px] rounded-full w-[50px] h-[50px] flex items-center justify-center"},ke=["src"],Ce={key:1,class:"max-w-[50px] max-h-[50px]",src:ae,alt:""},Ee={class:"flex flex flex-col"},Te={class:"mt-[16px] flex justify-end"},et=$({__name:"content-detail",setup(Ve,{expose:I}){const j="内容详情",u=h("basics"),f=h(!1),w=h(!1),y=h(""),m=h(null),n=q({page:1,limit:10,total:0,loading:!1,data:[],searchParam:{content_id:y}}),B=p=>{w.value=!1},F=async(p=null)=>{y.value=p.id,m.value=null,u.value="basics",R(),C()},R=async()=>{f.value=!0,y.value?await le(y.value).then(({data:p})=>{m.value=p,m.value.topic_name=p.topic_list&&p.topic_list.map(s=>s.topic_name).join(","),f.value=!1}).catch(()=>{f.value=!1}):f.value=!1},C=(p=1)=>{n.loading=!0,n.page=p,oe({page:n.page,limit:n.limit,...n.searchParam}).then(s=>{n.loading=!1,n.data=s.data.data,n.total=s.data.total}).catch(()=>{n.loading=!1})};return I({showDialog:w,setFormData:F}),(p,s)=>{const E=J,L=W,V=Y,b=Z,g=G,P=H,U=K,_=O,z=Q,M=X,S=ee,D=te;return r(),x(S,{modelValue:w.value,"onUpdate:modelValue":s[4]||(s[4]=a=>w.value=a),title:j,direction:"rtl","before-close":B,class:"content-detail-drawer"},{default:t(()=>[N((r(),d("div",ne,[e(L,{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=a=>u.value=a),class:"pb-[10px]"},{default:t(()=>[e(E,{label:"基础信息",name:"basics"}),e(E,{label:"关联宝贝",name:"cowry"}),e(E,{label:"评论",name:"comment"})]),_:1},8,["modelValue"]),u.value=="basics"?(r(),d("div",se,[f.value?v("",!0):(r(),x(U,{key:0,model:m.value,"label-width":"100px",ref:"formRef",class:"page-form","label-position":"left"},{default:t(()=>[e(P,{class:"row-bg px-[30px] mb-[20px]",gutter:20},{default:t(()=>[e(g,{span:12},{default:t(()=>[e(b,{label:l(i)("contentCover")},{default:t(()=>[o("div",ie,[e(V,{class:"w-[50px] h-[50px]",src:l(k)(m.value.content_cover),fit:"cover","zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":[l(k)(m.value.content_cover)],"hide-on-click-modal":!0},{error:t(()=>[me]),_:1},8,["src","zoom-rate","min-scale","preview-src-list"])])]),_:1},8,["label"])]),_:1}),e(g,{span:12},{default:t(()=>[e(b,{label:l(i)("contentTitle")},{default:t(()=>[o("div",re,c(m.value.content_title),1)]),_:1},8,["label"])]),_:1}),m.value.member?(r(),x(g,{key:0,span:12},{default:t(()=>[e(b,{label:l(i)("contentAuthor")},{default:t(()=>[o("div",ce,c(m.value.member.nickname),1)]),_:1},8,["label"])]),_:1})):v("",!0),e(g,{span:12},{default:t(()=>[e(b,{label:l(i)("topicName")},{default:t(()=>[o("div",pe,c(m.value.topic_name),1)]),_:1},8,["label"])]),_:1}),e(g,{span:24},{default:t(()=>[e(b,{label:l(i)("content")},{default:t(()=>[o("div",null,c(m.value.content),1)]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"]))])):v("",!0),u.value=="cowry"?(r(),d("div",_e,[e(z,{data:m.value.treasure_list,size:"large",ref:"cwryTableRef","max-height":"250"},{empty:t(()=>[o("span",null,c(m.value.treasure_list.length?"":l(i)("emptyData")),1)]),default:t(()=>[e(_,{label:l(i)("cwryInfo"),"min-width":"300"},{default:t(({row:a})=>[o("div",de,[o("div",ue,[a.treasure_image?(r(),x(V,{key:0,class:"w-[70px] h-[70px]",src:l(k)(a.treasure_image),fit:"contain"},{error:t(()=>[fe]),_:2},1032,["src"])):(r(),d("img",ve))]),o("div",be,[o("span",{title:a.goods_name,class:"multi-hidden"},c(a.treasure_name),9,ge),o("span",he,c(a.treasure_sub_name),1)])])]),_:1},8,["label"]),e(_,{prop:"treasure_price",label:l(i)("price"),"min-width":"120"},null,8,["label"])]),_:1},8,["data"])])):v("",!0),u.value=="comment"?(r(),d("div",xe,[N((r(),x(z,{data:n.data,size:"large",ref:"cwryTableRef"},{empty:t(()=>[o("span",null,c(n.loading?"":l(i)("emptyData")),1)]),default:t(()=>[e(_,{prop:"nickname","show-overflow-tooltip":!0,label:l(i)("memberInfo"),"min-width":"170"},{default:t(({row:a})=>[a.member?(r(),d("div",we,[o("div",ye,[a.member.headimg?(r(),d("img",{key:0,class:"max-w-[50px] max-h-[50px]",src:l(k)(a.member.headimg),alt:""},null,8,ke)):(r(),d("img",Ce))]),o("div",Ee,[o("span",null,c(a.member.nickname||""),1)])])):v("",!0)]),_:1},8,["label"]),e(_,{label:l(i)("contentTitle"),"min-width":"120"},{default:t(({row:a})=>[A(c(a.content.content_title),1)]),_:1},8,["label"]),e(_,{prop:"comment_content",label:l(i)("commentContent"),"min-width":"180"},null,8,["label"]),e(_,{prop:"reply_num",label:l(i)("replyNum"),"min-width":"120"},null,8,["label"]),e(_,{prop:"like_num",label:l(i)("likeNum"),"min-width":"120"},null,8,["label"]),e(_,{prop:"create_time",label:l(i)("createTime"),"min-width":"120"},null,8,["label"])]),_:1},8,["data"])),[[D,n.loading]]),o("div",Te,[e(M,{"current-page":n.page,"onUpdate:current-page":s[1]||(s[1]=a=>n.page=a),"page-size":n.limit,"onUpdate:page-size":s[2]||(s[2]=a=>n.limit=a),layout:"total, sizes, prev, pager, next, jumper",total:n.total,onSizeChange:s[3]||(s[3]=a=>C()),onCurrentChange:C},null,8,["current-page","page-size","total"])])])):v("",!0)])),[[D,f.value]])]),_:1},8,["modelValue"])}}});export{et as _};

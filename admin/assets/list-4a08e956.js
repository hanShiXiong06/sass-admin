import{O as z,d as Q,r as c,aJ as j,h as u,c as m,e as a,w as l,i as y,R as J,v as K,t as n,a as o,C as b,F as O,T as W,U as R,K as X,L as A,bR as G,E as Z,M as ee,a7 as te,ac as ae,ak as le,ad as oe,W as se,X as ne,Y as ie,p as re,g as de}from"./index-0e396751.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                *//* empty css                  *//* empty css                       */import"./el-form-item-4ed993c7.js";import{_ as ce}from"./_plugin-vue_export-helper-c27b6911.js";function ue(r){return z.get("hsx_phone_query/hsx_phone_query_list",{params:r})}function _e(r){return z.get(`hsx_phone_query/hsx_phone_query_list/${r}`)}const k=r=>(re("data-v-9433135c"),r=r(),de(),r),pe={class:"list-page"},me={key:0},ve={key:0},he={class:"pagination-container"},fe={key:0,class:"detail-content"},ge={class:"detail-item"},ye=k(()=>o("span",{class:"label"},"序列号：",-1)),be={class:"value"},ke={class:"detail-item"},we=k(()=>o("span",{class:"label"},"查询类型：",-1)),xe={class:"value"},Ce={class:"detail-item"},Ve=k(()=>o("span",{class:"label"},"查询时间：",-1)),Ee={class:"value"},De={key:0,class:"detail-info"},Se=k(()=>o("div",{class:"info-title"},"设备信息",-1)),Te={class:"label"},Re={class:"value"},ze=Q({__name:"list",setup(r){const i=c({keyword:"",dateRange:[]}),I=[{text:"最近一周",value:()=>{const s=new Date,t=new Date;return t.setTime(t.getTime()-3600*1e3*24*7),[t,s]}},{text:"��近一个月",value:()=>{const s=new Date,t=new Date;return t.setTime(t.getTime()-3600*1e3*24*30),[t,s]}}],w=c(!1),E=c([]),v=c(1),f=c(10),D=c(0),g=async()=>{var s,t;w.value=!0;try{const h={page:v.value,limit:f.value,keyword:i.value.keyword,start_time:((s=i.value.dateRange)==null?void 0:s[0])||"",end_time:((t=i.value.dateRange)==null?void 0:t[1])||""},p=await ue(h);p.code===1&&(E.value=p.data.list,D.value=p.data.count)}catch(h){console.error("获取列表失败:",h),R.error("获取列表失败")}finally{w.value=!1}},S=()=>{v.value=1,g()},U=()=>{i.value={keyword:"",dateRange:[]},S()},q=s=>{f.value=s,g()},B=s=>{v.value=s,g()},x=c(!1),_=c(null),L=async s=>{try{const t=await _e(s.id);t.code===1&&(_.value=t.data,x.value=!0)}catch(t){console.error("获取详情失败:",t),R.error("获取详情失败")}};return j(()=>{g()}),(s,t)=>{const h=X,p=A,M=G,C=Z,Y=ee,T=te,d=ae,F=le,N=oe,P=se,$=ne,H=ie;return u(),m("div",pe,[a(T,{class:"filter-card"},{default:l(()=>[a(Y,{inline:!0,model:i.value,class:"demo-form-inline"},{default:l(()=>[a(p,{label:"序列号"},{default:l(()=>[a(h,{modelValue:i.value.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value.keyword=e),placeholder:"请输入序列号",clearable:""},null,8,["modelValue"])]),_:1}),a(p,{label:"查询时间"},{default:l(()=>[a(M,{modelValue:i.value.dateRange,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value.dateRange=e),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD",shortcuts:I},null,8,["modelValue"])]),_:1}),a(p,null,{default:l(()=>[a(C,{type:"primary",onClick:S},{default:l(()=>[y("查询")]),_:1}),a(C,{onClick:U},{default:l(()=>[y("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(T,{class:"list-card"},{default:l(()=>[J((u(),K(N,{data:E.value,style:{width:"100%"},border:""},{default:l(()=>[a(d,{type:"index",label:"序号",width:"60"}),a(d,{prop:"sn",label:"序列号","min-width":"180"}),a(d,{prop:"type_name",label:"查询类型",width:"120"}),a(d,{label:"查询状态",width:"100"},{default:l(({row:e})=>[a(F,{type:e.is_look?"success":"warning"},{default:l(()=>[y(n(e.is_look?"已读":"未读"),1)]),_:2},1032,["type"])]),_:1}),a(d,{label:"设备信息","min-width":"200"},{default:l(({row:e})=>[e.info?(u(),m("div",me,[o("div",null,n(e.info.机型||"-"),1),e.info.容量||e.info.颜色?(u(),m("div",ve,n(e.info.容量)+" "+n(e.info.颜色?`· ${e.info.颜色}`:""),1)):b("",!0)])):b("",!0)]),_:1}),a(d,{prop:"create_time",label:"查询时间",width:"180"}),a(d,{label:"查询人",width:"180"},{default:l(({row:e})=>[o("div",null,[o("div",null,n(e.member_info.nickname||e.member_info.username),1)])]),_:1}),a(d,{label:"操作",width:"120",fixed:"right"},{default:l(({row:e})=>[a(C,{type:"primary",link:"",onClick:V=>L(e)},{default:l(()=>[y("查看")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[H,w.value]]),o("div",he,[a(P,{"current-page":v.value,"onUpdate:current-page":t[2]||(t[2]=e=>v.value=e),"page-size":f.value,"onUpdate:page-size":t[3]||(t[3]=e=>f.value=e),"page-sizes":[10,20,50,100],total:D.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:q,onCurrentChange:B},null,8,["current-page","page-size","total"])])]),_:1}),a($,{modelValue:x.value,"onUpdate:modelValue":t[4]||(t[4]=e=>x.value=e),title:"查询详情",width:"600px","destroy-on-close":""},{default:l(()=>[_.value?(u(),m("div",fe,[o("div",ge,[ye,o("span",be,n(_.value.sn),1)]),o("div",ke,[we,o("span",xe,n(_.value.type_name),1)]),o("div",Ce,[Ve,o("span",Ee,n(_.value.create_time),1)]),_.value.info?(u(),m("div",De,[Se,(u(!0),m(O,null,W(_.value.info,(e,V)=>(u(),m("div",{key:V,class:"info-item"},[o("span",Te,n(V)+"：",1),o("span",Re,n(e),1)]))),128))])):b("",!0)])):b("",!0)]),_:1},8,["modelValue"])])}}});const Ze=ce(ze,[["__scopeId","data-v-9433135c"]]);export{Ze as default};

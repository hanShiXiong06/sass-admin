import{d as oe,x as se,f as ne,r as D,aK as ie,n as S,R as V,h as _,c as f,e,w as o,u as l,aQ as re,s as v,a as n,t as r,q as s,B as h,i as U,A as O,aR as de,a7 as me,L as pe,aN as ue,aO as ce,M as _e,ay as ge,az as be,K as fe,E as ve,J as he,ad as ye,ae as xe,W as ke,ac as we,aD as Pe,bR as Ce,Y as De}from"./index-904cb7a2.js";/* empty css                   *//* empty css                       *//* empty css                 *//* empty css                     *//* empty css                  *//* empty css                  *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                      *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                 *//* empty css                        *//* empty css                    *//* empty css                *//* empty css               *//* empty css               */import"./el-form-item-4ed993c7.js";/* empty css                *//* empty css                   *//* empty css                       */import{_ as H}from"./goods_default-664bb559.js";import{_ as G}from"./member_head-d9fd7b2c.js";import{t as Ve,q as j,r as Ee,s as ze}from"./marketing-fa4978d8.js";const Le={class:"main-container"},Te={class:"panel-title"},Me={class:"px-[30px] mb-[20px]"},$e={class:"input-width"},Ae={class:"input-width"},Ne={class:"input-width"},Se={class:"input-width"},Ue={class:"input-width"},je={class:"input-width"},Fe={class:"input-width"},Ie={class:"input-width"},Re={class:"input-width"},Be={key:0},Ye=["onClick"],qe={class:"min-w-[70px] h-[70px] flex items-center justify-center"},Oe=n("div",{class:"image-slot"},[n("img",{class:"w-[70px] h-[70px]",src:H})],-1),He={key:1,class:"w-[70px] h-[70px]",src:H,fit:"contain"},Ge={class:"ml-2"},Ke=["title"],Je={key:0},Qe={class:"mt-[16px] flex justify-end"},We={key:1},Xe={class:"flex flex-col"},Ze=["onClick"],ea={class:"text-[12px] mt-[5px]"},aa={class:"text-[12px] mt-[5px]"},ta={class:"text-[14px]"},la={class:"mt-[16px] flex justify-end"},oa={key:2},sa=["onClick"],na={class:"min-w-[50px] h-[50px] flex items-center justify-center"},ia=n("div",{class:"image-slot"},[n("img",{class:"w-[50px] h-[50px] rounded-full",src:G,alt:""})],-1),ra={key:1,class:"w-[50px] h-[50px] rounded-full",src:G,alt:""},da={class:"ml-2"},ma=["title"],pa={class:"text-primary text-[12px]"},ua={class:"mt-[16px] flex justify-end"},Ya=oe({__name:"detail",setup(ca){const y=se(),E=ne(),K=y.meta.title,J=()=>{E.push("/shop/marketing/discount/list")},g=D({}),z=D(!1),x=D("goodsList"),Q=p=>{x.value=p};ie(()=>{y.query.id&&W(Number(y.query.id))});const W=p=>{z.value=!0,Ve(p).then(t=>{g.value=Object.assign(g.value,t.data),z.value=!1})},d=S({page:1,limit:10,total:0,loading:!1,data:[],searchParam:{keyword:"",active_id:y.query.id}}),P=(p=1)=>{d.loading=!0,d.page=p,Ee({page:d.page,limit:d.limit,...d.searchParam}).then(t=>{d.loading=!1,d.data=t.data.data,d.total=t.data.total}).catch(()=>{d.loading=!1})};P();const X=p=>{const t=E.resolve({path:"/preview/wap",query:{page:`/addon/shop/pages/goods/detail?goods_id=${p.goods_id}`}});window.open(t.href)},F=D(),i=S({page:1,limit:10,total:0,loading:!1,data:[],searchParam:{search_name:"",status:"",create_time:[],pay_time:[],active_id:y.query.id}}),k=(p=1)=>{i.loading=!0,i.page=p,ze({page:i.page,limit:i.limit,...i.searchParam}).then(t=>{i.loading=!1,i.data=t.data.data,i.total=t.data.total}).catch(()=>{i.loading=!1})};k();const Z=p=>{p&&(p.resetFields(),k())},m=S({page:1,limit:10,total:0,loading:!1,data:[],searchParam:{active_id:y.query.id}});((p=1)=>{m.loading=!0,m.page=p,j({page:m.page,limit:m.limit,...m.searchParam}).then(t=>{m.loading=!1,m.data=t.data.data,m.total=t.data.total}).catch(()=>{m.loading=!1})})();const I=p=>{let t=E.resolve(`/member/detail?id=${p}`);window.open(t.href," blank")};return(p,t)=>{const ee=de,L=me,u=pe,b=ue,ae=ce,T=_e,M=ge,te=be,R=fe,$=ve,B=he,c=ye,A=xe,N=ke,w=we,le=Pe,Y=Ce,C=De;return V((_(),f("div",Le,[e(L,{class:"card !border-none",shadow:"never"},{default:o(()=>[e(ee,{content:l(K),icon:l(re),onBack:t[0]||(t[0]=a=>J())},null,8,["content","icon"])]),_:1}),Object.keys(g.value).length?(_(),v(T,{key:0,class:"page-form mt-[15px]",model:g.value,"label-width":"100px",ref:"formRef","label-position":"left"},{default:o(()=>[g.value?(_(),v(L,{key:0,class:"box-card !border-none relative",shadow:"never"},{default:o(()=>[n("h3",Te,r(l(s)("baseInfo")),1),n("div",Me,[e(ae,null,{default:o(()=>[e(b,{span:8},{default:o(()=>[e(u,{label:l(s)("name")},{default:o(()=>[n("div",$e,[n("span",null,r(g.value.active_name),1)])]),_:1},8,["label"])]),_:1}),e(b,{span:8},{default:o(()=>[e(u,{label:l(s)("title")},{default:o(()=>[n("div",Ae,[n("span",null,r(g.value.active_desc),1)])]),_:1},8,["label"])]),_:1}),e(b,{span:8},{default:o(()=>[e(u,{label:l(s)("status")},{default:o(()=>[n("div",Ne,[n("span",null,r(g.value.active_status_name),1)])]),_:1},8,["label"])]),_:1}),e(b,{span:8},{default:o(()=>[e(u,{label:l(s)("paymentAmount")},{default:o(()=>[n("div",Se,[n("span",null,r(g.value.active_order_money),1)])]),_:1},8,["label"])]),_:1}),e(b,{span:8},{default:o(()=>[e(u,{label:l(s)("memberCount")},{default:o(()=>[n("div",Ue,[n("span",null,r(g.value.active_member_num),1)])]),_:1},8,["label"])]),_:1}),e(b,{span:8},{default:o(()=>[e(u,{label:l(s)("orderCount")},{default:o(()=>[n("div",je,[n("span",null,r(g.value.active_order_num),1)])]),_:1},8,["label"])]),_:1}),e(b,{span:8},{default:o(()=>[e(u,{label:l(s)("startTime")},{default:o(()=>[n("div",Fe,[n("span",null,r(g.value.start_time),1)])]),_:1},8,["label"])]),_:1}),e(b,{span:8},{default:o(()=>[e(u,{label:l(s)("endTime")},{default:o(()=>[n("div",Ie,[n("span",null,r(g.value.end_time),1)])]),_:1},8,["label"])]),_:1}),e(b,{span:8},{default:o(()=>[e(u,{label:l(s)("createTime")},{default:o(()=>[n("div",Re,[n("span",null,r(g.value.create_time),1)])]),_:1},8,["label"])]),_:1})]),_:1})])]),_:1})):h("",!0)]),_:1},8,["model"])):h("",!0),Object.keys(g.value).length?(_(),v(L,{key:1,class:"box-card !border-none relative",shadow:"never"},{default:o(()=>[e(te,{modelValue:x.value,"onUpdate:modelValue":t[1]||(t[1]=a=>x.value=a),class:"py-[10px]",onTabChange:Q},{default:o(()=>[e(M,{label:"活动商品",name:"goodsList"}),e(M,{label:"活动订单",name:"orderList"}),e(M,{label:"活动会员",name:"memberList"})]),_:1},8,["modelValue"]),x.value=="goodsList"?(_(),f("div",Be,[e(T,{inline:!0,model:d.searchParam},{default:o(()=>[e(u,{label:l(s)("keyword"),prop:"keyword"},{default:o(()=>[e(R,{modelValue:d.searchParam.keyword,"onUpdate:modelValue":t[2]||(t[2]=a=>d.searchParam.keyword=a),modelModifiers:{trim:!0},clearable:"",placeholder:l(s)("keywordPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(u,null,{default:o(()=>[e($,{type:"primary",onClick:t[3]||(t[3]=a=>P())},{default:o(()=>[U(r(l(s)("search")),1)]),_:1})]),_:1})]),_:1},8,["model"]),V((_(),v(A,{data:d.data,size:"large"},{empty:o(()=>[n("span",null,r(d.loading?"":l(s)("emptyData")),1)]),default:o(()=>[e(c,{prop:"goods_id",label:l(s)("goodsInfo"),"min-width":"300"},{default:o(({row:a})=>[a.goods?(_(),f("div",{key:0,class:"flex items-center cursor-pointer",onClick:q=>X(a)},[n("div",qe,[a.goods.goods_cover_thumb_small?(_(),v(B,{key:0,class:"w-[70px] h-[70px]",src:l(O)(a.goods.goods_cover_thumb_small),fit:"contain"},{error:o(()=>[Oe]),_:2},1032,["src"])):(_(),f("img",He))]),n("div",Ge,[n("span",{title:a.goods.goods_name,class:"multi-hidden"},r(a.goods.goods_name),9,Ke)])],8,Ye)):h("",!0)]),_:1},8,["label"]),e(c,{label:l(s)("price"),"min-width":"120"},{default:o(({row:a})=>[a.goodsSku?(_(),f("span",Je,"￥"+r(a.goodsSku.price),1)):h("",!0)]),_:1},8,["label"]),e(c,{prop:"active_goods_order_money",label:l(s)("paymentAmount"),"min-width":"100"},null,8,["label"]),e(c,{prop:"active_goods_order_num",label:l(s)("orderCount"),"min-width":"100"},null,8,["label"]),e(c,{prop:"active_goods_member_num",label:l(s)("activeMemberNum"),"min-width":"100"},null,8,["label"]),e(c,{prop:"active_goods_success_num",label:l(s)("activeSuccessNum"),"min-width":"100"},null,8,["label"])]),_:1},8,["data"])),[[C,d.loading]]),n("div",Qe,[e(N,{"current-page":d.page,"onUpdate:current-page":t[4]||(t[4]=a=>d.page=a),"page-size":d.limit,"onUpdate:page-size":t[5]||(t[5]=a=>d.limit=a),layout:"total, sizes, prev, pager, next, jumper",total:d.total,onSizeChange:t[6]||(t[6]=a=>P()),onCurrentChange:P},null,8,["current-page","page-size","total"])])])):h("",!0),x.value=="orderList"?(_(),f("div",We,[e(T,{inline:!0,model:i.searchParam,ref_key:"orderSearchFormRef",ref:F},{default:o(()=>[e(u,{label:l(s)("orderInfo"),prop:"search_name"},{default:o(()=>[e(R,{class:"input-item",modelValue:i.searchParam.search_name,"onUpdate:modelValue":t[7]||(t[7]=a=>i.searchParam.search_name=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1},8,["label"]),e(u,{label:l(s)("payType"),prop:"status"},{default:o(()=>[e(le,{modelValue:i.searchParam.status,"onUpdate:modelValue":t[8]||(t[8]=a=>i.searchParam.status=a),clearable:"",class:"input-item"},{default:o(()=>[e(w,{label:l(s)("toBePaid"),value:"1"},null,8,["label"]),e(w,{label:l(s)("toBeShipped"),value:"2"},null,8,["label"]),e(w,{label:l(s)("shipped"),value:"3"},null,8,["label"]),e(w,{label:l(s)("completed"),value:"5"},null,8,["label"]),e(w,{label:l(s)("closed"),value:"-1"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(u,{label:l(s)("createTime"),prop:"create_time"},{default:o(()=>[e(Y,{modelValue:i.searchParam.create_time,"onUpdate:modelValue":t[9]||(t[9]=a=>i.searchParam.create_time=a),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":l(s)("startDate"),"end-placeholder":l(s)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),e(u,{label:l(s)("payTime"),prop:"pay_time"},{default:o(()=>[e(Y,{modelValue:i.searchParam.pay_time,"onUpdate:modelValue":t[10]||(t[10]=a=>i.searchParam.pay_time=a),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":l(s)("startDate"),"end-placeholder":l(s)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),e(u,null,{default:o(()=>[e($,{type:"primary",onClick:t[11]||(t[11]=a=>k())},{default:o(()=>[U(r(l(s)("search")),1)]),_:1}),e($,{onClick:t[12]||(t[12]=a=>Z(F.value))},{default:o(()=>[U(r(l(s)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"]),V((_(),v(A,{data:i.data,size:"large"},{empty:o(()=>[n("span",null,r(i.loading?"":l(s)("emptyData")),1)]),default:o(()=>[e(c,{prop:"order_no",label:l(s)("orderNo"),"min-width":"100"},null,8,["label"]),e(c,{prop:"order_money",label:l(s)("orderMoney"),"min-width":"100"},null,8,["label"]),e(c,{label:l(s)("buyInfo"),"min-width":"120"},{default:o(({row:a})=>[n("div",Xe,[n("span",{class:"text-[12px] text-primary cursor-pointer",onClick:q=>I(a.member.member_id)},r(a.member.nickname),9,Ze),n("span",ea,r(a.taker_name)+" "+r(a.taker_mobile),1),n("span",aa,r(a.taker_full_address),1)])]),_:1},8,["label"]),e(c,{label:l(s)("payType"),"min-width":"120"},{default:o(({row:a})=>[n("span",null,r(a.pay&&a.pay.type_name?a.pay.type_name:""),1)]),_:1},8,["label"]),e(c,{label:l(s)("orderStatus"),"min-width":"100"},{default:o(({row:a})=>[n("span",ta,r(a.order_status_data.name),1)]),_:1},8,["label"]),e(c,{prop:"create_time",label:l(s)("createTime"),"min-width":"100"},null,8,["label"])]),_:1},8,["data"])),[[C,i.loading]]),n("div",la,[e(N,{"current-page":i.page,"onUpdate:current-page":t[13]||(t[13]=a=>i.page=a),"page-size":i.limit,"onUpdate:page-size":t[14]||(t[14]=a=>i.limit=a),layout:"total, sizes, prev, pager, next, jumper",total:i.total,onSizeChange:t[15]||(t[15]=a=>k()),onCurrentChange:k},null,8,["current-page","page-size","total"])])])):h("",!0),x.value=="memberList"?(_(),f("div",oa,[V((_(),v(A,{data:m.data,size:"large"},{empty:o(()=>[n("span",null,r(m.loading?"":l(s)("emptyData")),1)]),default:o(()=>[e(c,{prop:"goods_id",label:l(s)("memberInfo"),"min-width":"200"},{default:o(({row:a})=>[n("div",{class:"flex items-center cursor-pointer",onClick:q=>I(a.member.member_id)},[n("div",na,[a.member.headimg?(_(),v(B,{key:0,class:"w-[50px] h-[50px]",src:l(O)(a.member.headimg),fit:"contain"},{error:o(()=>[ia]),_:2},1032,["src"])):(_(),f("img",ra))]),n("div",da,[n("span",{title:a.member.nickname||a.member.username,class:"multi-hidden"},r(a.member.nickname||a.member.username),9,ma),n("span",pa,r(a.mobile||""),1)])],8,sa)]),_:1},8,["label"]),e(c,{prop:"active_order_money",label:l(s)("consumptionMoney"),"min-width":"100"},null,8,["label"]),e(c,{prop:"member_count",label:l(s)("participationNum"),"min-width":"100"},null,8,["label"]),e(c,{prop:"create_time",label:l(s)("orderTime"),"min-width":"100"},null,8,["label"])]),_:1},8,["data"])),[[C,m.loading]]),n("div",ua,[e(N,{"current-page":m.page,"onUpdate:current-page":t[16]||(t[16]=a=>m.page=a),"page-size":m.limit,"onUpdate:page-size":t[17]||(t[17]=a=>m.limit=a),layout:"total, sizes, prev, pager, next, jumper",total:m.total,onSizeChange:t[18]||(t[18]=a=>l(j)()),onCurrentChange:l(j)},null,8,["current-page","page-size","total","onCurrentChange"])])])):h("",!0)]),_:1})):h("",!0)])),[[C,z.value]])}}});export{Ya as default};

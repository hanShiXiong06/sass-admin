import{d as j,r as h,n as M,l as H,Q as b,a2 as I,h as c,s as k,w as n,e as t,a as e,R as L,i as d,c as i,B as _,F as $,T as z,a0 as G,bZ as K,aw as P,au as Q,av as Z,E as q,K as J,ac as W,aD as X,bR as ee,aT as le,aa as te,L as oe,M as ae}from"./index-904cb7a2.js";/* empty css                */import"./el-form-item-4ed993c7.js";import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                  *//* empty css                       *//* empty css                 *//* empty css                     *//* empty css                  *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                       *//* empty css                 *//* empty css                    */const se={class:"flex items-center"},ne=e("span",{class:"ml-[10px] el-form-item__label"},"付费升级",-1),me={class:""},de={class:"flex items-center"},ce=e("span",{class:"ml-[10px] el-form-item__label"},[d("实名认证 "),e("span",{class:"text-red-500"},"*")],-1),ie={key:0,class:"ml-2 text-gray-400"},pe=e("div",{class:"text-sm text-gray-400 mb-[5px]"}," 名称可填写如日卡，季度卡等，等级有效期单位天，0为永久不限制;限制购买数量0将不会限制;会员等级到期后将会回退到默认等级 ",-1),re={class:"bg-[#FAFBFA] p-2 rounded-[5px] mb-[10px]"},ue={class:"flex items-center mb-2"},_e={class:"flex items-center mt-[5px]"},fe=e("span",{class:"ml-[10px] mr-4"},[d("名称 "),e("span",{class:"text-red-500"},"*")],-1),ve={class:"flex items-center mt-[5px] ml-[8px]"},xe=e("span",{class:"ml-[10px] mr-4"},[d("付费金额 "),e("span",{class:"text-red-500"},"*")],-1),Ve={class:"flex items-center mt-[5px] ml-[8px] w-[140px]"},ye={key:0,class:"flex items-center mt-[5px] ml-[8px]"},he=e("span",{class:"ml-[10px] mr-4"},[d("有效期 "),e("span",{class:"text-red-500"},"*")],-1),be=e("span",{class:"ml-[5px]"},"天",-1),ke={key:1,class:"flex items-center mt-[5px] ml-[8px]"},we={class:"ml-8"},Ee=e("div",{class:"text-sm text-gray-400 mb-[5px]"}," 开启后当前等级将等级权益将可以通过用户自主付费购买升级 ",-1),Le=j({__name:"benefits-vip-fee",props:{modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(w,{expose:E,emit:U}){const g=w,o=h({is_use:0,fee_info:[],is_real:0}),f=h(null),C=()=>{Array.isArray(o.value.fee_info)||(o.value.fee_info=[]),o.value.fee_info.push({id:K(),name:"",market_price:0,price:0,day:0,limit_num:0,num:0,is_use:"1",over_type:"common",over_time:""})},B=m=>{o.value.fee_info.splice(m.index,1)},F=M({}),p=H({get(){return g.modelValue},set(m){U("update:modelValue",m)}});return b(()=>p.value,(m,a)=>{(!a||!Object.keys(a).length)&&Object.keys(m).length&&(o.value=p.value)},{immediate:!0}),b(()=>o.value,()=>{p.value=o.value},{deep:!0}),E({verify:async()=>{var a;let m=!0;return await((a=f.value)==null?void 0:a.validate(r=>{m=r})),m}}),(m,a)=>{const r=P,v=Q,R=Z,x=q,u=J,V=W,D=X,S=ee,A=le,N=te,O=I("block"),T=oe,Y=ae;return c(),k(Y,{ref_key:"formRef",ref:f,model:o.value,rules:F},{default:n(()=>[t(T,{label:"",prop:"discount",class:"!mb-[10px]"},{default:n(()=>[e("div",null,[e("div",se,[t(r,{modelValue:o.value.is_use,"onUpdate:modelValue":a[0]||(a[0]=l=>o.value.is_use=l),"true-label":1,"false-label":0,label:"",size:"large"},null,8,["modelValue"]),ne]),L(e("div",me,[e("div",de,[ce,t(R,{modelValue:o.value.is_real,"onUpdate:modelValue":a[1]||(a[1]=l=>o.value.is_real=l)},{default:n(()=>[t(v,{label:"0"},{default:n(()=>[d("不需要")]),_:1}),t(v,{label:"1"},{default:n(()=>[d("需要")]),_:1})]),_:1},8,["modelValue"]),o.value.is_real==1?(c(),i("span",ie,"需在插件实名认证配置里面开启才会生效")):_("",!0)]),e("div",null,[t(x,{onClick:a[2]||(a[2]=l=>C()),type:"primary"},{default:n(()=>[d("添加规格")]),_:1})]),pe,e("div",re,[(c(!0),i($,null,z(o.value.fee_info,(l,y)=>(c(),k(O,{key:y},{default:n(()=>[e("div",ue,[e("div",_e,[fe,t(u,{style:{width:"120px"},modelValue:l.name,"onUpdate:modelValue":s=>l.name=s,placeholder:"如日卡",class:"w-[120px]"},null,8,["modelValue","onUpdate:modelValue"])]),e("div",ve,[xe,t(u,{mini:"0",style:{width:"100px"},modelValue:l.price,"onUpdate:modelValue":s=>l.price=s,placeholder:"售卖价格",type:"number",class:"w-[120px]"},null,8,["modelValue","onUpdate:modelValue"])]),e("div",Ve,[t(D,{modelValue:l.over_type,"onUpdate:modelValue":s=>l.over_type=s,placeholder:"选择到期类型",style:{width:"240px"}},{default:n(()=>[t(V,{key:"common",label:"天数",value:"common"}),t(V,{key:"fixed",label:"固定到期",value:"fixed"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),l.over_type=="common"?(c(),i("div",ye,[he,t(u,{mini:"0",style:{width:"80px"},modelValue:l.day,"onUpdate:modelValue":s=>l.day=s,placeholder:"请输入",type:"number",class:"w-[120px]"},null,8,["modelValue","onUpdate:modelValue"]),be])):_("",!0),l.over_type=="fixed"?(c(),i("div",ke,[t(S,{class:"ml-2",modelValue:l.over_time,"onUpdate:modelValue":s=>l.over_time=s,type:"datetime",placeholder:"请选择时间",format:"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","onUpdate:modelValue"])])):_("",!0),t(N,{content:l.is_use==0?"下架中":"使用中",placement:"top"},{default:n(()=>[t(A,{modelValue:l.is_use,"onUpdate:modelValue":s=>l.is_use=s,class:"ml-2","active-value":"1","inactive-value":"0"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"]),e("div",we,[t(x,{plain:"",onClick:s=>B(y),type:"info"},{default:n(()=>[d("删除")]),_:2},1032,["onClick"])])])]),_:2},1024))),128))])],512),[[G,o.value.is_use]]),Ee])]),_:1})]),_:1},8,["model","rules"])}}});export{Le as default};

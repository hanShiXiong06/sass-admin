import{d as T,r as c,aJ as N,h as n,c as m,e as t,w as a,a as h,v as y,i,C as V,R as M,t as A,a5 as F,U as v,E as S,ac as $,ak as j,ad as q,aa as I,a7 as J,Y as L}from"./index-0e396751.js";/* empty css                   *//* empty css                *//* empty css                 *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css               *//* empty css                        *//* empty css                  */import{o as U,p as Y,q as z}from"./site-368fa7aa.js";import G from"./edit-recycle-9cc9c1a3.js";/* empty css                  *//* empty css                   *//* empty css                    *//* empty css                 *//* empty css                        *//* empty css                       *//* empty css                 *//* empty css                *//* empty css                  */import"./el-form-item-4ed993c7.js";import"./_plugin-vue_export-helper-c27b6911.js";const H={class:"flex justify-between items-center mb-4"},K=h("span",{class:"text-lg"},"回收商配置",-1),O={key:0},P={key:1},Ee=T({__name:"recycle_config",setup(Q){const o=c(),p=c(!1),_=c([]),l=c(!0),g=async()=>{try{return(await z()).code===0?(v.error("请先开通回收商套餐"),l.value=!1,!1):!0}catch(e){return console.error("检查角色失败:",e),!1}},u=async()=>{p.value=!0;try{const e=await U();_.value=e.data?[e.data]:[],e.data.length===0?l.value=!0:l.value=!1}catch(e){console.error("加载数据失败:",e)}finally{p.value=!1}},k=async()=>{await g()&&(o.value.setFormData(),o.value.showDialog=!0)},b=e=>{o.value.setFormData(e),o.value.showDialog=!0},E=e=>{F.confirm("确定要删除该回收商信息吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{await Y(e.id),v.success("删除成功"),u()}catch(f){console.error("删除失败:",f)}})};return N(()=>{u()}),(e,f)=>{const d=S,r=$,C=j,D=q,w=I,x=J,B=L;return n(),m("div",null,[t(x,null,{default:a(()=>[h("div",H,[K,l.value?(n(),y(d,{key:0,type:"primary",onClick:k},{default:a(()=>[i("配置回收商信息")]),_:1})):V("",!0)]),l.value?(n(),m("div",P,[t(w,{description:"当前站点没有配置回收商信息"})])):(n(),m("div",O,[M((n(),y(D,{data:_.value},{default:a(()=>[t(r,{prop:"contact_name",label:"联系人"}),t(r,{prop:"contact_mobile",label:"联系电话"}),t(r,{prop:"full_address",label:"地址"}),t(r,{prop:"status",label:"状态"},{default:a(({row:s})=>[t(C,{type:s.status===1?"success":"info"},{default:a(()=>[i(A(s.status===1?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),t(r,{label:"操作",width:"200"},{default:a(({row:s})=>[t(d,{type:"primary",link:"",onClick:R=>b(s)},{default:a(()=>[i("编辑")]),_:2},1032,["onClick"]),t(d,{type:"danger",link:"",onClick:R=>E(s)},{default:a(()=>[i("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[B,p.value]])]))]),_:1}),t(G,{ref_key:"editDialog",ref:o,onSuccess:u},null,512)])}}});export{Ee as default};

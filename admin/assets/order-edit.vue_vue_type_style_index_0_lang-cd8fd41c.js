import{d as Q,r as v,aO as Y,a2 as w,h as s,c as r,e as d,w as a,v as u,a as t,t as o,C as l,i,F as I,T as E,u as Z,B as ee,U as B,a1 as te,ak as oe,E as se,da as ae,cE as le,a8 as re,a9 as de,a7 as ne,X as ie,aW as ce,ab as _e,aC as ue}from"./index-0e396751.js";/* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                         *//* empty css                  *//* empty css                   *//* empty css                  */import{u as ve}from"./dict-2a424490.js";import{c as me,g as fe,a as pe}from"./order-0f3a14b2.js";/* empty css                   */const ye={class:"flex items-center mt-4"},he={key:0,class:"mr-[28px] p-4 pl-12 pr-12 rounded-md statistic-card bg-gradient-to-r from-indigo-50 from-10% via-sky-50 via-10% to-emerald-50 to-10%"},ge=t("div",{class:"font-bold text-slate-400"},"订单金额",-1),Ie={class:"text-2xl"},ke={key:1,class:"mr-[28px] p-4 pl-12 pr-12 rounded-md statistic-card bg-gradient-to-r from-indigo-50 from-10% via-sky-50 via-10% to-emerald-50 to-10%"},xe=t("div",{class:"font-bold text-slate-400"},"优惠金额",-1),be={class:"text-2xl"},we={class:"flex mt-4"},Ee={class:"mr-4"},De=t("span",null,"订单号：",-1),Ce={class:"font-bold"},Ve={class:"mr-4"},Ne=t("span",null,"运单号：",-1),Se={class:"font-bold"},Fe={class:"mr-2"},Be=t("span",null,"创建时间：",-1),Oe={class:""},Ue={key:0,class:"flex mt-6"},Le=t("span",null,"用户：",-1),Re={class:"font-bold"},Te={class:"bg-cyan-50 rounded-md pl-2 pr-2 mr-4"},je={key:0},Je={class:"mt-4 flex"},Me=t("div",{class:"mr-4"},"支付信息",-1),$e={key:2},Ae={key:0,class:"mt-4 flex items-center"},ze=t("div",{class:"mr-4"},"计价规则",-1),Pe={key:1,class:"mt-4 flex items-center"},We=t("div",{class:"mr-4"},"补差详情",-1),Xe={key:1,class:"flex mr-2"},qe={class:"mt-4 flex items-center"},Ge=t("div",{class:"mr-4"},"订单状态",-1),He={class:"ml-4 font-bold"},Ke={key:2,class:"mt-4 flex items-center"},Qe=t("div",{class:"mr-4"},"订单备注",-1),Ye={class:"ml-4 font-bold"},Ze={class:"flex items-center mt-4"},et={key:0,class:"mr-[28px] p-4 rounded-md statistic-card bg-gradient-to-r from-indigo-50 from-10% via-sky-50 via-10% to-emerald-50 to-10%"},tt={class:"font-bold"},ot={class:"flex text-xs text-current"},st={class:"mr-2"},at={class:"text-current font-bold"},lt={key:1,class:"p-4 rounded-md statistic-card bg-gradient-to-r from-indigo-50 from-10% via-sky-50 via-10% to-emerald-50 to-10%"},rt={class:"font-bold"},dt={class:"flex text-xs text-current"},nt={class:"mr-2"},it={class:"text-current font-bold"},ct={class:"mt-2"},_t={class:"flex items-center mb-4"},ut={class:"ml-1 p-2"},vt={key:0},mt={class:"font-bold"},ft={key:1,class:"ml-8"},pt={class:"flex"},yt={class:"mr-2"},ht={class:""},gt={key:0},It={class:"mb-2"},kt={class:"w-[320px]"},Wt=Q({__name:"order-edit",emits:["complete"],setup(xt,{expose:O,emit:bt}){const D=v([]);(async()=>{D.value=await(await ve("jhkd_order_status")).data.dictionary})();const k=v(),g=v(!1),U=()=>{g.value=!0},L=async()=>{await me({order_id:e.value.order_id,order_status:k.value}),g.value=!1},{copy:R,isSupported:T,copied:Et}=Y(),j=p=>{if(console.log("ddddddd"),!T.value){B({message:"当前浏览器不支持一键复制，请手动复制",type:"warning"});return}R(p),B({message:"复制成功",type:"success"})},x=v(!1),C=v(!1),e=v(),b=v(),y=v(),f=v(),h=v(),J=async p=>{const n=await pe(p);b.value=n.data};return O({showDialog:x,setFormData:async(p=null)=>{if(C.value=!0,p){const n=await(await fe(p.id)).data;e.value=n,f.value=JSON.parse(e.value.orderInfo.start_address),h.value=JSON.parse(e.value.orderInfo.end_address),e.value.orderInfo.courier_context&&(y.value=JSON.parse(e.value.orderInfo.courier_context)),e.value.orderInfo.delivery_id&&J(e.value.orderInfo.delivery_id)}C.value=!1}}),(p,n)=>{const M=w("DocumentCopy"),V=te,_=oe,$=w("block"),N=se,A=w("Right"),z=ae,P=le,W=re,X=de,q=ne,S=ie,G=ce,H=_e,K=ue;return s(),r(I,null,[d(S,{modelValue:x.value,"onUpdate:modelValue":n[2]||(n[2]=c=>x.value=c),title:"订单详情",width:"55%",class:"diy-dialog-wrap","destroy-on-close":""},{default:a(()=>[e.value?(s(),u(q,{key:0},{default:a(()=>{var c;return[t("div",null,[t("div",ye,[f.value?(s(),r("div",he,[ge,t("div",Ie,o(e.value.order_money),1)])):l("",!0),f.value?(s(),r("div",ke,[xe,t("div",be,o(e.value.order_discount_money),1)])):l("",!0)]),t("div",we,[t("div",Ee,[De,t("span",Ce,o(e.value.order_id),1)]),t("div",Ve,[Ne,t("span",Se,o(e.value.orderInfo.delivery_id),1),d(V,{class:"ml-2",onClick:n[0]||(n[0]=m=>j(e.value.orderInfo.delivery_id))},{default:a(()=>[d(M)]),_:1})]),t("div",Fe,[Be,t("span",Oe,o(e.value.create_time),1)])]),e.value.memberInfo?(s(),r("div",Ue,[Le,t("span",Re,o(e.value.memberInfo.nickname),1),d(_,{class:"ml-2 mr-12"},{default:a(()=>[i(o(e.value.order_from),1)]),_:1}),t("span",Te,o(e.value.orderInfo.goods)+"-"+o(e.value.orderInfo.weight)+"kg-"+o(e.value.orderInfo.long)+"x"+o(e.value.orderInfo.width)+"x"+o(e.value.orderInfo.height)+"cm ",1),e.value.orderInfo.bj_price?(s(),r("div",je," 保价："+o(e.value.orderInfo.bj_price),1)):l("",!0)])):l("",!0)]),t("div",Je,[Me,e.value.payInfo.status_name?(s(),u(_,{key:0,class:"mr-4",type:"info"},{default:a(()=>[i(o(e.value.payInfo.status_name),1)]),_:1})):l("",!0),e.value.payInfo.type_name?(s(),u(_,{key:1,class:"mr-4",type:"success"},{default:a(()=>[i(o(e.value.payInfo.type_name),1)]),_:1})):l("",!0),e.value.payInfo.pay_time?(s(),r("div",$e,o(e.value.payInfo.pay_time),1)):l("",!0)]),e.value.orderInfo.price_rule?(s(),r("div",Ae,[ze,d(_,{class:"mr-2"},{default:a(()=>[i(" 首重： "+o(e.value.orderInfo.price_rule.start)+"kg;价格:"+o(e.value.orderInfo.price_rule.first)+"元 ",1)]),_:1}),d(_,{class:"mr-2"},{default:a(()=>[i(" 续重： "+o(e.value.orderInfo.price_rule.add)+"元/kg ",1)]),_:1})])):l("",!0),e.value.addorderInfo?(s(),r("div",Pe,[We,e.value.orderInfo.notice_num>0?(s(),u(_,{key:0,class:"mr-2"},{default:a(()=>[i(" 通知次数: "+o(e.value.orderInfo.notice_num)+"次 ",1)]),_:1})):l("",!0),d(_,{class:"mr-2"},{default:a(()=>[i(" 下单重量: "+o(e.value.orderInfo.weight)+"kg ",1)]),_:1}),e.value.addorderInfo?(s(),r("div",Xe,[t("div",null," 超重: "+o(Math.ceil(Number((e.value.deliveryRealInfo.fee_weight-e.value.orderInfo.weight).toFixed(2))))+"kg;￥"+o((Math.ceil(Number((e.value.deliveryRealInfo.fee_weight-e.value.orderInfo.weight).toFixed(2)))*(((c=e.value.orderInfo.price_rule)==null?void 0:c.add)??3)).toFixed(2)),1),(s(!0),r(I,null,E(e.value.deliveryRealInfo.fee_blockList,(m,F)=>(s(),u($,null,{default:a(()=>[t("div",null,o(m.name)+":"+o(m.fee)+"元;",1)]),_:2},1024))),256)),d(_,{class:"mr-2",type:"error"},{default:a(()=>[i(" 需补金额： "+o(e.value.addorderInfo.order_money)+"元 ",1)]),_:1})])):l("",!0)])):l("",!0),t("div",qe,[Ge,d(_,{class:"mr-2"},{default:a(()=>[i(o(e.value.order_status_arr.name),1)]),_:1}),e.value.is_send==1?(s(),u(_,{key:0},{default:a(()=>[i(" 已发单 ")]),_:1})):l("",!0),e.value.is_send==0?(s(),u(_,{key:1,type:"info"},{default:a(()=>[i(" 未发单 ")]),_:1})):l("",!0),t("span",He,o(e.value.close_reason),1),d(N,{class:"ml-4",onClick:n[1]||(n[1]=m=>U())},{default:a(()=>[i("更改状态")]),_:1})]),e.value.remark?(s(),r("div",Ke,[Qe,t("span",Ye,o(e.value.remark),1)])):l("",!0),t("div",Ze,[f.value?(s(),r("div",et,[t("div",tt,o(f.value.address),1),t("div",null,o(f.value.full_address),1),t("div",ot,[t("div",st,o(f.value.name),1),t("div",at,o(f.value.mobile),1)])])):l("",!0),d(V,{class:"mr-[28px]",size:"28"},{default:a(()=>[d(A)]),_:1}),h.value?(s(),r("div",lt,[t("div",rt,o(h.value.address),1),t("div",null,o(h.value.full_address),1),t("div",dt,[t("div",nt,o(h.value.name),1),t("div",it,o(h.value.mobile),1)])])):l("",!0)]),b.value?(s(),u(z,{key:3,class:"mt-4","content-position":"left"},{default:a(()=>[i("轨迹跟踪")]),_:1})):l("",!0),t("div",ct,[t("div",_t,[e.value&&e.value.orderInfo&&e.value.orderInfo.delivery_arry&&e.value.orderInfo.delivery_arry.logo?(s(),u(P,{key:0,src:Z(ee)(e.value.orderInfo.delivery_arry.logo)},null,8,["src"])):l("",!0),t("div",ut,[e.value&&e.value.orderInfo&&e.value.orderInfo.delivery_arry?(s(),r("div",vt,o(e.value.orderInfo.delivery_arry.name),1)):l("",!0),t("div",mt,o(e.value.orderInfo.delivery_id),1)]),y.value?(s(),r("div",ft,[t("div",pt,[t("div",yt,"揽件员:"+o(y.value.courierName),1),t("div",ht,"联系电话:"+o(y.value.courierPhone),1)]),y.value.pickUpCode?(s(),r("div",gt," 取件码:"+o(y.value.pickUpCode),1)):l("",!0)])):l("",!0)]),d(X,null,{default:a(()=>[(s(!0),r(I,null,E(b.value,(m,F)=>(s(),u(W,{key:F,timestamp:m.time},{default:a(()=>[i(o(m.desc),1)]),_:2},1032,["timestamp"]))),128))]),_:1})])]}),_:1})):l("",!0)]),_:1},8,["modelValue"]),d(S,{modelValue:g.value,"onUpdate:modelValue":n[5]||(n[5]=c=>g.value=c),title:"更改状态",width:"400"},{default:a(()=>[t("div",It,[d(G,{type:"info",title:"这里更改状态仅更新订单状态，不会有额外操作，请谨慎修改",closable:!1,"show-icon":""})]),t("div",kt,[d(K,{modelValue:k.value,"onUpdate:modelValue":n[3]||(n[3]=c=>k.value=c),placeholder:"请选择订单状态"},{default:a(()=>[(s(!0),r(I,null,E(D.value,(c,m)=>(s(),u(H,{key:m,label:c.name,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),d(N,{type:"primary",onClick:n[4]||(n[4]=c=>L()),class:"mt-4"},{default:a(()=>[i("确定")]),_:1})]),_:1},8,["modelValue"])],64)}}});export{Wt as _};

import{d as S,y as j,f as q,q as K,r as E,h as g,c as W,e as l,w as r,a as u,t as p,u as n,i as c,s,R as Y,v as b,j as h,C as L,a5 as A,ap as H,U as J,E as O,ax as Q,ay as X,K as Z,L as ee,M as ae,a7 as te,ac as oe,ad as le,W as ne,Y as se}from"./index-0e396751.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                    *//* empty css                  */import{_ as re,$ as ie,a0 as pe}from"./goods-4d7d064c.js";import{_ as de}from"./label-group-edit.vue_vue_type_style_index_0_lang-79cc61f0.js";/* empty css                  *//* empty css                   */const me={class:"main-container"},ue={class:"flex justify-between items-center"},ce={class:"text-page-title"},_e={class:"mt-[10px]"},ge={class:"mt-[16px] flex justify-end"},Me=S({__name:"label_group_list",setup(fe){const G=j(),P=q(),T=G.meta.title,V=t=>{P.push({path:t})},a=K({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{group_name:"",order:"",sort:""}}),v=E(),B=t=>{let e="";t.order=="ascending"?e="asc":t.order=="descending"&&(e="desc"),e&&(a.searchParam.order=t.prop,a.searchParam.sort=e),i()},i=(t=1)=>{a.loading=!0,a.page=t,re({page:a.page,limit:a.limit,...a.searchParam}).then(e=>{a.loading=!1,a.data=e.data.data,a.total=e.data.total}).catch(()=>{a.loading=!1})};i();const m=E(null),D=()=>{m.value.setFormData(),m.value.showDialog=!0},N=t=>{m.value.setFormData(t),m.value.showDialog=!0},$=t=>{A.confirm(s("labelGroupDeleteTips"),s("warning"),{confirmButtonText:s("confirm"),cancelButtonText:s("cancel"),type:"warning"}).then(()=>{ie(t).then(()=>{i()}).catch(()=>{})})},w=H((t,e)=>{if(isNaN(t)||!/^\d{0,8}$/.test(t)){J({type:"warning",message:`${s("sortTips")}`});return}t>99999999&&(e.sort=99999999),pe({group_id:e.group_id,sort:t}).then(d=>{})}),F=t=>{t&&(t.resetFields(),i())};return(t,e)=>{const d=O,y=Q,U=X,C=Z,x=ee,z=ae,k=te,f=oe,I=le,M=ne,R=se;return g(),W("div",me,[l(k,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[u("div",ue,[u("span",ce,p(n(T)),1),l(d,{type:"primary",onClick:D},{default:r(()=>[c(p(n(s)("addLabelGroup")),1)]),_:1})]),l(U,{"model-value":"/phone_shop/goods/label/group",onTabChange:V},{default:r(()=>[l(y,{label:n(s)("tabGoodsLabel"),name:"/phone_shop/goods/label"},null,8,["label"]),l(y,{label:n(s)("tabGoodsLabelGroup"),name:"/phone_shop/goods/label/group"},null,8,["label"])]),_:1}),l(k,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:r(()=>[l(z,{inline:!0,model:a.searchParam,ref_key:"searchFormRef",ref:v},{default:r(()=>[l(x,{label:n(s)("groupName"),prop:"group_name"},{default:r(()=>[l(C,{modelValue:a.searchParam.group_name,"onUpdate:modelValue":e[0]||(e[0]=o=>a.searchParam.group_name=o),modelModifiers:{trim:!0},placeholder:n(s)("groupNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(x,null,{default:r(()=>[l(d,{type:"primary",onClick:e[1]||(e[1]=o=>i())},{default:r(()=>[c(p(n(s)("search")),1)]),_:1}),l(d,{onClick:e[2]||(e[2]=o=>F(v.value))},{default:r(()=>[c(p(n(s)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),u("div",_e,[Y((g(),b(I,{data:a.data,size:"large",onSortChange:B},{empty:r(()=>[u("span",null,p(a.loading?"":n(s)("emptyData")),1)]),default:r(()=>[l(f,{prop:"group_name",label:n(s)("groupName"),"min-width":"120"},null,8,["label"]),l(f,{prop:"sort",label:n(s)("sort"),"min-width":"120",sortable:"custom"},{default:r(({row:o})=>[l(C,{modelValue:o.sort,"onUpdate:modelValue":_=>o.sort=_,modelModifiers:{trim:!0},disabled:n(h)().siteInfo.site_id!==o.site_id,class:"!w-[100px]",maxlength:"8",onBlur:_=>n(w)(o.sort,o)},null,8,["modelValue","onUpdate:modelValue","disabled","onBlur"])]),_:1},8,["label"]),l(f,{label:n(s)("operation"),fixed:"right",align:"right","min-width":"120"},{default:r(({row:o})=>[n(h)().siteInfo.site_id==o.site_id?(g(),b(d,{key:0,type:"primary",link:"",onClick:_=>N(o)},{default:r(()=>[c(p(n(s)("edit")),1)]),_:2},1032,["onClick"])):L("",!0),n(h)().siteInfo.site_id==o.site_id?(g(),b(d,{key:1,type:"primary",link:"",onClick:_=>$(o.group_id)},{default:r(()=>[c(p(n(s)("delete")),1)]),_:2},1032,["onClick"])):L("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[R,a.loading]]),u("div",ge,[l(M,{"current-page":a.page,"onUpdate:current-page":e[3]||(e[3]=o=>a.page=o),"page-size":a.limit,"onUpdate:page-size":e[4]||(e[4]=o=>a.limit=o),layout:"total, sizes, prev, pager, next, jumper",total:a.total,onSizeChange:e[5]||(e[5]=o=>i()),onCurrentChange:i},null,8,["current-page","page-size","total"])])]),l(de,{ref_key:"editLabelGroupDialog",ref:m,onComplete:i},null,512)]),_:1})])}}});export{Me as default};

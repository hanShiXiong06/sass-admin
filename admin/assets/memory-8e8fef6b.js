import{d as W,y as Y,f as A,q as M,r as V,h as d,c as N,e as l,w as r,a as u,t as m,u as n,i as _,s,F as H,T as J,v as f,R as Q,j as v,C as P,a5 as X,ap as Z,U as ee,E as ae,ax as te,ay as oe,K as le,L as ne,ab as se,aC as re,M as ie,a7 as me,ac as de,ad as pe,W as ce,Y as ue}from"./index-0e396751.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                    *//* empty css                  */import{N as _e,w as ge,ae as fe}from"./goods-4d7d064c.js";import{_ as he}from"./memory-edit.vue_vue_type_script_setup_true_lang-0ac3510e.js";/* empty css                  *//* empty css                   */const be={class:"main-container"},ye={class:"flex justify-between items-center"},ve={class:"text-page-title"},Ce={class:"mt-[10px]"},xe={class:"mt-[16px] flex justify-end"},Ye=W({__name:"memory",setup(ke){const w=Y(),D=A(),T=w.meta.title,B=o=>{D.push({path:o})},t=M({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{spec_name:"",group_id:"",order:"",sort:""}}),h=M([]),C=V(),F=o=>{let e="";o.order=="ascending"?e="asc":o.order=="descending"&&(e="desc"),e&&(t.searchParam.order=o.prop,t.searchParam.sort=e),i()},i=(o=1)=>{t.loading=!0,t.page=o,_e({page:t.page,limit:t.limit,...t.searchParam}).then(e=>{t.loading=!1,t.data=e.data.data,t.total=e.data.total}).catch(()=>{t.loading=!1})};(async()=>{await ge({}).then(o=>{console.log(o);const e=o.data.data;e&&h.push(...e)}),await i()})();const p=V(null),L=()=>{p.value.setFormData(),p.value.showDialog=!0},$=o=>{p.value.setFormData(o),p.value.showDialog=!0},U=o=>{X.confirm(s("memoryDeleteTips"),s("warning"),{confirmButtonText:s("confirm"),cancelButtonText:s("cancel"),type:"warning"}).then(()=>{fe(o).then(()=>{i()}).catch(()=>{})})},z=Z((o,e)=>{if(isNaN(o)||!/^\d{0,8}$/.test(o)){ee({type:"warning",message:`${s("sortTips")}`});return}o>99999999&&(e.sort=99999999)}),I=o=>{o&&(o.resetFields(),i())};return(o,e)=>{const c=ae,x=te,R=oe,k=le,b=ne,S=se,j=re,G=ie,E=me,y=de,q=pe,K=ce,O=ue;return d(),N("div",be,[l(E,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[u("div",ye,[u("span",ve,m(n(T)),1),l(c,{type:"primary",onClick:L},{default:r(()=>[_(m(n(s)("addMemory")),1)]),_:1})]),l(R,{"model-value":"/phone_shop/goods/memory",onTabChange:B},{default:r(()=>[l(x,{label:n(s)("tabMemoryGroup"),name:"/phone_shop/goods/memory_group"},null,8,["label"]),l(x,{label:n(s)("tabMemory"),name:"/phone_shop/goods/memory"},null,8,["label"])]),_:1}),l(E,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:r(()=>[l(G,{inline:!0,model:t.searchParam,ref_key:"searchFormRef",ref:C},{default:r(()=>[l(b,{label:n(s)("specName"),prop:"spec_name"},{default:r(()=>[l(k,{modelValue:t.searchParam.spec_name,"onUpdate:modelValue":e[0]||(e[0]=a=>t.searchParam.spec_name=a),modelModifiers:{trim:!0},placeholder:n(s)("specNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(b,{label:n(s)("groupName"),prop:"group_id"},{default:r(()=>[l(j,{modelValue:t.searchParam.group_id,"onUpdate:modelValue":e[1]||(e[1]=a=>t.searchParam.group_id=a),placeholder:n(s)("groupNamePlaceholder"),clearable:""},{default:r(()=>[(d(!0),N(H,null,J(h,a=>(d(),f(S,{key:a.group_id,label:a.group_name,value:a.group_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(b,null,{default:r(()=>[l(c,{type:"primary",onClick:e[2]||(e[2]=a=>i())},{default:r(()=>[_(m(n(s)("search")),1)]),_:1}),l(c,{onClick:e[3]||(e[3]=a=>I(C.value))},{default:r(()=>[_(m(n(s)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),u("div",Ce,[Q((d(),f(q,{data:t.data,size:"large",onSortChange:F},{empty:r(()=>[u("span",null,m(t.loading?"":n(s)("emptyData")),1)]),default:r(()=>[l(y,{prop:"spec_name",label:n(s)("specName"),"min-width":"120"},null,8,["label"]),l(y,{prop:"sort",label:n(s)("sort"),"min-width":"120",sortable:"custom"},{default:r(({row:a})=>[l(k,{modelValue:a.sort,"onUpdate:modelValue":g=>a.sort=g,modelModifiers:{trim:!0},disabled:n(v)().siteInfo.site_id!==a.site_id,class:"!w-[100px]",maxlength:"8",onBlur:g=>n(z)(a.sort,a)},null,8,["modelValue","onUpdate:modelValue","disabled","onBlur"])]),_:1},8,["label"]),l(y,{label:n(s)("operation"),fixed:"right",align:"right","min-width":"120"},{default:r(({row:a})=>[n(v)().siteInfo.site_id==a.site_id?(d(),f(c,{key:0,type:"primary",link:"",onClick:g=>$(a)},{default:r(()=>[_(m(n(s)("edit")),1)]),_:2},1032,["onClick"])):P("",!0),n(v)().siteInfo.site_id==a.site_id?(d(),f(c,{key:1,type:"primary",link:"",onClick:g=>U(a.spec_id)},{default:r(()=>[_(m(n(s)("delete")),1)]),_:2},1032,["onClick"])):P("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[O,t.loading]]),u("div",xe,[l(K,{"current-page":t.page,"onUpdate:current-page":e[4]||(e[4]=a=>t.page=a),"page-size":t.limit,"onUpdate:page-size":e[5]||(e[5]=a=>t.limit=a),layout:"total, sizes, prev, pager, next, jumper",total:t.total,onSizeChange:e[6]||(e[6]=a=>i()),onCurrentChange:i},null,8,["current-page","page-size","total"])])]),l(he,{ref_key:"editMemoryDialog",ref:p,onComplete:i,groupList:h},null,8,["groupList"])]),_:1})])}}});export{Ye as default};

import{d as H,y as J,f as Q,q as $,r as x,h as i,c as g,e as n,w as r,a as u,t as p,u as a,i as _,s as o,F as X,T as Z,v as f,R as ee,$ as te,B as ae,C,j as L,a5 as oe,ap as le,U as se,E as ne,ax as re,ay as ie,K as pe,L as de,ab as me,aC as ce,M as ue,a7 as _e,ac as be,ak as ge,ad as fe,W as he,Y as ye}from"./index-0e396751.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                    *//* empty css                  */import{a1 as ve,a2 as ke,a3 as xe,a4 as Ce,a5 as Le}from"./goods-4d7d064c.js";import{_ as Ee}from"./label-edit.vue_vue_type_style_index_0_lang-00ade2fe.js";/* empty css                  *//* empty css                   *//* empty css                  */import"./index-11d71036.js";/* empty css                        */import"./index.vue_vue_type_style_index_0_lang-d82568af.js";import"./attachment-c52133c7.js";import"./index.vue_vue_type_script_setup_true_lang-34f8a01a.js";/* empty css                 *//* empty css               *//* empty css               *//* empty css                  *//* empty css                    *//* empty css                    */import"./el-dropdown-item-4ed993c7.js";import"./index.vue_vue_type_script_setup_true_lang-077a27b1.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-5014406f.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./sortable.esm-be94e56d.js";/* empty css                        *//* empty css                       *//* empty css                 */const Pe={class:"main-container"},Te={class:"flex justify-between items-center"},Ve={class:"text-page-title"},De={class:"mt-[10px]"},Ne=["src"],$e={key:0},Be={key:1},Fe={class:"mt-[16px] flex justify-end"},Et=H({__name:"label_list",setup(je){const B=J(),F=Q(),j=B.meta.title,S=s=>{F.push({path:s})},l=$({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{label_name:"",group_id:"",order:"",sort:""}}),y=$([]),E=x(),U=s=>{let t="";s.order=="ascending"?t="asc":s.order=="descending"&&(t="desc"),t&&(l.searchParam.order=s.prop,l.searchParam.sort=t),d()},d=(s=1)=>{l.loading=!0,l.page=s,ve({page:l.page,limit:l.limit,...l.searchParam}).then(t=>{l.loading=!1,l.data=t.data.data,l.total=t.data.total}).catch(()=>{l.loading=!1})};(()=>{ke({}).then(s=>{const t=s.data;t&&y.push(...t)}),d()})();const h=x(null),z=()=>{h.value.setFormData(),h.value.showDialog=!0},w=s=>{h.value.setFormData(s),h.value.showDialog=!0},I=s=>{oe.confirm(o("labelDeleteTips"),o("warning"),{confirmButtonText:o("confirm"),cancelButtonText:o("cancel"),type:"warning"}).then(()=>{xe(s).then(()=>{d()}).catch(()=>{})})},R=le((s,t)=>{if(isNaN(s)||!/^\d{0,8}$/.test(s)){se({type:"warning",message:`${o("sortTips")}`});return}s>99999999&&(t.sort=99999999),Ce({label_id:t.label_id,sort:s}).then(m=>{})}),v=x(!1),P=(s,t)=>{v.value||(v.value=!0,Le({label_id:s,status:t}).then(m=>{d(),v.value=!1}))},M=s=>{s&&(s.resetFields(),d())};return(s,t)=>{const m=ne,T=re,G=ie,V=pe,k=de,O=me,q=ce,K=ue,D=_e,c=be,N=ge,W=fe,Y=he,A=ye;return i(),g("div",Pe,[n(D,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[u("div",Te,[u("span",Ve,p(a(j)),1),n(m,{type:"primary",onClick:z},{default:r(()=>[_(p(a(o)("addLabel")),1)]),_:1})]),n(G,{"model-value":"/phone_shop/goods/label",onTabChange:S},{default:r(()=>[n(T,{label:a(o)("tabGoodsLabel"),name:"/phone_shop/goods/label"},null,8,["label"]),n(T,{label:a(o)("tabGoodsLabelGroup"),name:"/phone_shop/goods/label/group"},null,8,["label"])]),_:1}),n(D,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:r(()=>[n(K,{inline:!0,model:l.searchParam,ref_key:"searchFormRef",ref:E},{default:r(()=>[n(k,{label:a(o)("labelName"),prop:"label_name"},{default:r(()=>[n(V,{modelValue:l.searchParam.label_name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.searchParam.label_name=e),modelModifiers:{trim:!0},placeholder:a(o)("labelNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(k,{label:a(o)("groupName"),prop:"group_id"},{default:r(()=>[n(q,{modelValue:l.searchParam.group_id,"onUpdate:modelValue":t[1]||(t[1]=e=>l.searchParam.group_id=e),placeholder:a(o)("groupNamePlaceholder"),clearable:""},{default:r(()=>[(i(!0),g(X,null,Z(y,e=>(i(),f(O,{key:e.group_id,label:e.group_name,value:e.group_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(k,null,{default:r(()=>[n(m,{type:"primary",onClick:t[2]||(t[2]=e=>d())},{default:r(()=>[_(p(a(o)("search")),1)]),_:1}),n(m,{onClick:t[3]||(t[3]=e=>M(E.value))},{default:r(()=>[_(p(a(o)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),u("div",De,[ee((i(),f(W,{data:l.data,size:"large",onSortChange:U},{empty:r(()=>[u("span",null,p(l.loading?"":a(o)("emptyData")),1)]),default:r(()=>[n(c,{prop:"label_name",label:a(o)("label"),"min-width":"120"},{default:r(({row:e})=>[e.style_type=="diy"?(i(),g("div",{key:0,class:"inline-block px-[10px] text-[12px] rounded-[4px] box-border whitespace-nowrap h-[28px] leading-[28px]",style:te({color:e.color_json.text_color,backgroundColor:e.color_json.bg_color,border:e.color_json.border_color?"1px solid "+e.color_json.border_color:"none"})},[u("span",null,p(e.label_name),1)],4)):e.style_type=="icon"?(i(),g("img",{key:1,class:"block h-[28px] rounded-[4px] object-cover",src:a(ae)(e.icon)},null,8,Ne)):C("",!0)]),_:1},8,["label"]),n(c,{prop:"group_name",label:a(o)("groupName"),"min-width":"120"},{default:r(({row:e})=>[e.group?(i(),g("span",$e,p(e.group.group_name),1)):(i(),g("span",Be,"--"))]),_:1},8,["label"]),n(c,{prop:"status",label:a(o)("status"),"min-width":"80","show-overflow-tooltip":!0},{default:r(({row:e})=>[e.status==1?(i(),f(N,{key:0,type:"success",onClick:b=>P(e.label_id,0),class:"cursor-pointer"},{default:r(()=>[_(p(a(o)("statusOn")),1)]),_:2},1032,["onClick"])):(i(),f(N,{key:1,type:"info",onClick:b=>P(e.label_id,1),class:"cursor-pointer"},{default:r(()=>[_(p(a(o)("statusOff")),1)]),_:2},1032,["onClick"]))]),_:1},8,["label"]),n(c,{prop:"memo",label:a(o)("memo"),"min-width":"200"},null,8,["label"]),n(c,{prop:"sort",label:a(o)("sort"),"min-width":"120",sortable:"custom"},{default:r(({row:e})=>[n(V,{modelValue:e.sort,"onUpdate:modelValue":b=>e.sort=b,modelModifiers:{trim:!0},disabled:a(L)().siteInfo.site_id!==e.site_id,class:"!w-[100px]",maxlength:"8",onBlur:b=>a(R)(e.sort,e)},null,8,["modelValue","onUpdate:modelValue","disabled","onBlur"])]),_:1},8,["label"]),n(c,{prop:"create_time",label:a(o)("createTime"),"min-width":"100",sortable:"custom"},{default:r(({row:e})=>[u("div",null,p(e.create_time),1)]),_:1},8,["label"]),n(c,{label:a(o)("operation"),fixed:"right",align:"right","min-width":"120"},{default:r(({row:e})=>[a(L)().siteInfo.site_id==e.site_id?(i(),f(m,{key:0,type:"primary",link:"",onClick:b=>w(e)},{default:r(()=>[_(p(a(o)("edit")),1)]),_:2},1032,["onClick"])):C("",!0),a(L)().siteInfo.site_id==e.site_id?(i(),f(m,{key:1,type:"primary",link:"",onClick:b=>I(e.label_id)},{default:r(()=>[_(p(a(o)("delete")),1)]),_:2},1032,["onClick"])):C("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[A,l.loading]]),u("div",Fe,[n(Y,{"current-page":l.page,"onUpdate:current-page":t[4]||(t[4]=e=>l.page=e),"page-size":l.limit,"onUpdate:page-size":t[5]||(t[5]=e=>l.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:l.total,onSizeChange:t[6]||(t[6]=e=>d()),onCurrentChange:d},null,8,["current-page","page-size","total"])])]),n(Ee,{ref_key:"editLabelDialog",ref:h,onComplete:d,groupList:y},null,8,["groupList"])]),_:1})])}}});export{Et as default};

import{d as $,y as j,r as g,q as A,m as K,s as a,h as _,c as h,e as o,w as i,u as r,i as n,t as u,v as b,a as w,C as V,F as O,T as G,bU as H,aQ as Q,a7 as X,K as Z,L as z,bF as J,at as W,au as ee,bR as le,M as ae,E as oe}from"./index-0e396751.js";/* empty css                  *//* empty css                */import{_ as te}from"./index.vue_vue_type_script_setup_true_lang-406de1d6.js";/* empty css                       *//* empty css                 *//* empty css                     *//* empty css                  *//* empty css                       *//* empty css                 */import re from"./index-11d71036.js";/* empty css                          *//* empty css               *//* empty css                    */import"./el-form-item-4ed993c7.js";/* empty css                *//* empty css                   *//* empty css                       */import{X as ie,f as de,b as se,Y as ne,Z as ue}from"./vipcard-7f8d9659.js";import"./index.vue_vue_type_style_index_0_lang-d82568af.js";/* empty css                  *//* empty css                   */import"./attachment-c52133c7.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-34f8a01a.js";/* empty css                        *//* empty css                  *//* empty css                  *//* empty css                      */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css               *//* empty css               *//* empty css                  *//* empty css                    *//* empty css                    */import"./el-dropdown-item-4ed993c7.js";import"./index.vue_vue_type_script_setup_true_lang-077a27b1.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-5014406f.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./sortable.esm-be94e56d.js";const me={class:"main-container"},pe=w("p",{class:"text-[12px] text-[#a9a9a9]"},"预约支付指会员预约项目的同时需要支付项目费用,如果不进行预约支付,会员只是生成预约单,到店后根据消费支付核销",-1),_e={key:1,class:"w-[300px]"},ce={class:"fixed-footer-wrap"},ye={class:"fixed-footer"},sl=$({__name:"edit",setup(ve){const D=j(),v=parseInt(D.query.id),c=g(!1),P={goods_id:0,goods_name:"",goods_type:0,goods_cover:"",goods_image:"",category_id:"",goods_content:"",buy_info:"",verify_validity_type:0,verify_validity:0,status:1,card_type:0,common_num:0,price:"",stock:"",is_reserve:0,is_reserve_pay:0,virtually_sale:""},e=A({...P});v&&(async(s=0)=>{Object.assign(e,P);const l=await(await ie(s)).data;Object.keys(e).forEach(m=>{l[m]!=null&&(e[m]=l[m])})})(v);const U=g([]);(async(s=null)=>{U.value=await(await de({type:2})).data,c.value=!1})();const S=s=>{e.verify_validity=""},k=g([]);(async()=>{const s=await(await se()).data;k.value=s,e.verify_validity_type=k.value[0].type})();const x=g(),T=K(()=>({goods_name:[{required:!0,message:a("goodsNamePlaceholder"),trigger:"blur"}],goods_cover:[{required:!0,message:a("goodsCoverPlaceholder"),trigger:"blur"}],category_id:[{required:!0,message:a("categoryIdPlaceholder"),trigger:"blur"}],price:[{required:!0,message:a("pricePlaceholder"),trigger:"blur"}],stock:[{required:!0,message:a("stockPlaceholder"),trigger:"blur"}],verify_validity:[{required:!0,validator:q}]})),q=(s,l,m)=>{e.verify_validity_type!=0&&e.verify_validity==""&&m(new Error(a("serviceTimePlaceholder"))),Number(e.verify_validity)<=0&&m(new Error(a("serviceTimeRangePlaceholder"))),m()},I=async s=>{c.value||!s||await s.validate(async l=>{l&&(c.value=!0,(v?ne:ue)(e).then(y=>{c.value=!1,history.back()}).catch(()=>{c.value=!1}))})},E=()=>{history.back()};return(s,l)=>{const m=Q,C=X,y=Z,d=z,B=J,F=re,p=W,f=ee,M=le,N=te,Y=ae,R=oe;return _(),h("div",me,[o(C,{class:"card !border-none mb-[15px]",shadow:"never"},{default:i(()=>[o(m,{content:r(v)?r(a)("editService"):r(a)("addService"),icon:s.ArrowLeft,onBack:E},null,8,["content","icon"])]),_:1}),o(C,{class:"box-card !border-none",shadow:"never"},{default:i(()=>[o(Y,{model:e,"label-width":"90px",ref_key:"formRef",ref:x,rules:r(T),class:"page-form"},{default:i(()=>[o(d,{label:r(a)("goodsName"),prop:"goods_name"},{default:i(()=>[o(y,{modelValue:e.goods_name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.goods_name=t),modelModifiers:{trim:!0},maxlength:"30","show-word-limit":"",clearable:"",placeholder:r(a)("goodsNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(d,{label:r(a)("categoryId"),prop:"category_id"},{default:i(()=>[o(B,{class:"input-width",modelValue:e.category_id,"onUpdate:modelValue":l[1]||(l[1]=t=>e.category_id=t),options:U.value,props:{value:"category_id",label:"category_name"}},null,8,["modelValue","options"])]),_:1},8,["label"]),o(d,{label:r(a)("price"),prop:"price"},{default:i(()=>[o(y,{modelValue:e.price,"onUpdate:modelValue":l[2]||(l[2]=t=>e.price=t),modelModifiers:{trim:!0},placeholder:r(a)("pricePlaceholder"),class:"input-width"},{append:i(()=>[n(u(r(a)("unit")),1)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),o(d,{label:r(a)("virtuallySale")},{default:i(()=>[o(y,{modelValue:e.virtually_sale,"onUpdate:modelValue":l[3]||(l[3]=t=>e.virtually_sale=t),clearable:"",placeholder:r(a)("virtuallySalePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(d,{label:r(a)("goodsCover"),prop:"goods_cover"},{default:i(()=>[o(F,{modelValue:e.goods_cover,"onUpdate:modelValue":l[4]||(l[4]=t=>e.goods_cover=t)},null,8,["modelValue"])]),_:1},8,["label"]),o(d,{label:r(a)("goodsImage")},{default:i(()=>[o(F,{modelValue:e.goods_image,"onUpdate:modelValue":l[5]||(l[5]=t=>e.goods_image=t)},null,8,["modelValue"])]),_:1},8,["label"]),o(d,{label:r(a)("status")},{default:i(()=>[o(f,{modelValue:e.status,"onUpdate:modelValue":l[6]||(l[6]=t=>e.status=t),class:"ml-4"},{default:i(()=>[o(p,{label:1},{default:i(()=>[n(u(r(a)("up")),1)]),_:1}),o(p,{label:0},{default:i(()=>[n(u(r(a)("down")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(d,{label:r(a)("reserve")},{default:i(()=>[o(f,{modelValue:e.is_reserve,"onUpdate:modelValue":l[7]||(l[7]=t=>e.is_reserve=t),class:"ml-4"},{default:i(()=>[o(p,{label:0},{default:i(()=>[n(u(r(a)("notNeedReserve")),1)]),_:1}),o(p,{label:1},{default:i(()=>[n(u(r(a)("needReserve")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),e.is_reserve==1?(_(),b(d,{key:0,label:r(a)("reservePay")},{default:i(()=>[w("div",null,[o(f,{modelValue:e.is_reserve_pay,"onUpdate:modelValue":l[8]||(l[8]=t=>e.is_reserve_pay=t),class:"ml-4"},{default:i(()=>[o(p,{label:0},{default:i(()=>[n(u(r(a)("no")),1)]),_:1}),o(p,{label:1},{default:i(()=>[n(u(r(a)("yes")),1)]),_:1})]),_:1},8,["modelValue"]),pe])]),_:1},8,["label"])):V("",!0),o(d,{label:r(a)("serviceDate")},{default:i(()=>[o(f,{modelValue:e.verify_validity_type,"onUpdate:modelValue":l[9]||(l[9]=t=>e.verify_validity_type=t),onChange:S,class:"ml-4"},{default:i(()=>[(_(!0),h(O,null,G(k.value,(t,L)=>(_(),b(p,{label:t.type,key:L},{default:i(()=>[n(u(t.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),e.verify_validity_type!=0?(_(),b(d,{key:1,label:r(a)("serviceValidity"),prop:"verify_validity"},{default:i(()=>[e.verify_validity_type==1?(_(),b(y,{key:0,onKeyup:l[10]||(l[10]=t=>r(H)(t)),maxlength:"4","show-word-limit":"",modelValue:e.verify_validity,"onUpdate:modelValue":l[11]||(l[11]=t=>e.verify_validity=t),placeholder:r(a)("serviceTimePlaceholder"),class:"input-width"},{append:i(()=>[n(u(r(a)("day")),1)]),_:1},8,["modelValue","placeholder"])):V("",!0),e.verify_validity_type==2?(_(),h("div",_e,[o(M,{modelValue:e.verify_validity,"onUpdate:modelValue":l[12]||(l[12]=t=>e.verify_validity=t),"value-format":"YYYY-MM-DD",type:"date"},null,8,["modelValue"])])):V("",!0)]),_:1},8,["label"])):V("",!0),o(d,{label:r(a)("goodsContent")},{default:i(()=>[o(N,{modelValue:e.goods_content,"onUpdate:modelValue":l[13]||(l[13]=t=>e.goods_content=t)},null,8,["modelValue"])]),_:1},8,["label"]),o(d,{label:r(a)("buyInfo")},{default:i(()=>[o(N,{modelValue:e.buy_info,"onUpdate:modelValue":l[14]||(l[14]=t=>e.buy_info=t)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1}),w("div",ce,[w("div",ye,[o(R,{type:"primary",onClick:l[15]||(l[15]=t=>I(x.value))},{default:i(()=>[n(u(r(a)("save")),1)]),_:1}),o(R,{onClick:l[16]||(l[16]=t=>E())},{default:i(()=>[n(u(r(a)("cancel")),1)]),_:1})])])])}}});export{sl as default};

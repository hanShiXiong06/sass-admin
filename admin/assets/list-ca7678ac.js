import{d as j,y as I,f as q,q as K,r as x,h as T,c as O,e,w as s,a as f,t as r,u as i,i as c,s as l,R as W,v as Y,a5 as A,ap as G,U as H,E as J,K as Q,L as X,ab as Z,aC as ee,M as te,a7 as ae,ac as le,ak as oe,ad as ne,W as se,Y as ie}from"./index-0e396751.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                  */import{c as re,d as me,m as ce,f as de,h as pe}from"./topic-ac64237f.js";import{_ as ue}from"./topic-edit.vue_vue_type_style_index_0_lang-eea39c1b.js";/* empty css                  *//* empty css                   *//* empty css                  */const _e={class:"main-container"},fe={class:"flex justify-between items-center"},ge={class:"text-page-title"},he={class:"mt-[10px]"},be={class:"mt-[16px] flex justify-end"},qe=j({__name:"list",setup(ve){const E=I(),V=q(),P=E.meta.title,o=K({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{topic_name:"",status:"",is_recommend:""}}),b=x(),d=(a=1)=>{o.loading=!0,o.page=a,re({page:o.page,limit:o.limit,...o.searchParam}).then(n=>{o.loading=!1,o.data=n.data.data,o.total=n.data.total}).catch(()=>{o.loading=!1})};d();const _=x(null),$=()=>{_.value.setFormData(),_.value.showDialog=!0},N=a=>{_.value.setFormData(a),_.value.showDialog=!0},B=a=>{A.confirm(l("topicDeleteTips"),l("warning"),{confirmButtonText:l("confirm"),cancelButtonText:l("cancel"),type:"warning"}).then(()=>{me(a).then(()=>{d()}).catch(()=>{})})},D=a=>{if(a.status==0)return!1;a.is_recommend=a.is_recommend===1?0:1,ce({topic_id:a.topic_id,is_recommend:a.is_recommend}).then(n=>{})},R=a=>{a.status=a.status===1?0:1,de({topic_id:a.topic_id,status:a.status}).then(n=>{})},F=G((a,n)=>{if(isNaN(a)||!/^\d{0,8}$/.test(a)){H({type:"warning",message:`${l("sortTips")}`});return}a>99999999&&(n.sort=99999999),pe({topic_id:n.topic_id,sort:a}).then(p=>{})}),U=a=>{a&&(a.resetFields(),d())},w=a=>{V.push(`/sow_community/content/list?topic_id=${a.topic_id}`)};return(a,n)=>{const p=J,v=Q,g=X,h=Z,y=ee,z=te,k=ae,m=le,C=oe,L=ne,M=se,S=ie;return T(),O("div",_e,[e(k,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[f("div",fe,[f("span",ge,r(i(P)),1),e(p,{type:"primary",onClick:$},{default:s(()=>[c(r(i(l)("addTopic")),1)]),_:1})]),e(k,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:s(()=>[e(z,{inline:!0,model:o.searchParam,ref_key:"searchFormRef",ref:b},{default:s(()=>[e(g,{label:i(l)("topicName"),prop:"topic_name"},{default:s(()=>[e(v,{modelValue:o.searchParam.topic_name,"onUpdate:modelValue":n[0]||(n[0]=t=>o.searchParam.topic_name=t),modelModifiers:{trim:!0},placeholder:i(l)("topicNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(g,{label:i(l)("status"),prop:"status"},{default:s(()=>[e(y,{modelValue:o.searchParam.status,"onUpdate:modelValue":n[1]||(n[1]=t=>o.searchParam.status=t),placeholder:i(l)("statusPlaceholder"),clearable:""},{default:s(()=>[e(h,{label:"开启",value:1}),e(h,{label:"关闭",value:0})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(g,{label:i(l)("isRecommend"),prop:"is_recommend"},{default:s(()=>[e(y,{modelValue:o.searchParam.is_recommend,"onUpdate:modelValue":n[2]||(n[2]=t=>o.searchParam.is_recommend=t),placeholder:i(l)("isRecommendPlaceholder"),clearable:""},{default:s(()=>[e(h,{label:"推荐",value:1}),e(h,{label:"不推荐",value:0})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(g,null,{default:s(()=>[e(p,{type:"primary",onClick:n[3]||(n[3]=t=>d())},{default:s(()=>[c(r(i(l)("search")),1)]),_:1}),e(p,{onClick:n[4]||(n[4]=t=>U(b.value))},{default:s(()=>[c(r(i(l)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),f("div",he,[W((T(),Y(L,{data:o.data,size:"large"},{empty:s(()=>[f("span",null,r(o.loading?"":i(l)("emptyData")),1)]),default:s(()=>[e(m,{prop:"topic_name",label:i(l)("topicName"),"min-width":"120"},null,8,["label"]),e(m,{prop:"content_num",label:i(l)("contentNum"),"min-width":"120"},null,8,["label"]),e(m,{prop:"member_num",label:i(l)("memberNum"),"min-width":"120"},null,8,["label"]),e(m,{label:i(l)("isRecommend"),"min-width":"120"},{default:s(({row:t})=>[e(C,{class:"cursor-pointer",type:t.status==0?"info":t.is_recommend!=0?"success":"danger",onClick:u=>D(t)},{default:s(()=>[c(r(t.is_recommend!=0?"推荐":"不推荐"),1)]),_:2},1032,["type","onClick"])]),_:1},8,["label"]),e(m,{label:i(l)("status"),"min-width":"120"},{default:s(({row:t})=>[e(C,{class:"cursor-pointer",type:t.status!=0?"success":"danger",onClick:u=>R(t)},{default:s(()=>[c(r(t.status!=0?"开启":"关闭"),1)]),_:2},1032,["type","onClick"])]),_:1},8,["label"]),e(m,{prop:"sort",label:i(l)("sort"),"min-width":"120"},{default:s(({row:t})=>[e(v,{modelValue:t.sort,"onUpdate:modelValue":u=>t.sort=u,modelModifiers:{trim:!0},class:"!w-[100px]",maxlength:"8",onBlur:u=>i(F)(t.sort,t)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1},8,["label"]),e(m,{prop:"create_time",label:i(l)("createTime"),"min-width":"120"},null,8,["label"]),e(m,{label:i(l)("operation"),fixed:"right",align:"right","min-width":"120"},{default:s(({row:t})=>[e(p,{type:"primary",link:"",onClick:u=>w(t)},{default:s(()=>[c(r(i(l)("show")),1)]),_:2},1032,["onClick"]),e(p,{type:"primary",link:"",onClick:u=>N(t)},{default:s(()=>[c(r(i(l)("edit")),1)]),_:2},1032,["onClick"]),e(p,{type:"primary",link:"",onClick:u=>B(t.topic_id)},{default:s(()=>[c(r(i(l)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[S,o.loading]]),f("div",be,[e(M,{"current-page":o.page,"onUpdate:current-page":n[5]||(n[5]=t=>o.page=t),"page-size":o.limit,"onUpdate:page-size":n[6]||(n[6]=t=>o.limit=t),layout:"total, sizes, prev, pager, next, jumper",total:o.total,onSizeChange:n[7]||(n[7]=t=>d()),onCurrentChange:d},null,8,["current-page","page-size","total"])])]),e(ue,{ref_key:"editTopicDialog",ref:_,onComplete:d},null,512)]),_:1})])}}});export{qe as default};

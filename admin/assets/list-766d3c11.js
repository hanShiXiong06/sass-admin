import{d as M,f as O,x as q,n as I,r as b,bO as K,h as d,c as E,e as l,w as o,a as m,t as r,u as n,i as _,q as e,F as W,T as Y,s as g,R as G,B as y,bP as H,a5 as P,E as J,K as Q,L as X,ac as Z,aD as ee,M as te,a7 as ae,ad as le,ae as ne,W as ie,Y as oe}from"./index-904cb7a2.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                  */import{x as se,y as re,z as ce,A as me}from"./marketing-fa4978d8.js";import{_ as pe}from"./discount-detail.vue_vue_type_style_index_0_lang-18cb5a1e.js";/* empty css                  *//* empty css                   *//* empty css                       *//* empty css                 *//* empty css                        *//* empty css               *//* empty css               *//* empty css                    */import"./goods_default-664bb559.js";import"./member_head-d9fd7b2c.js";const ue={class:"main-container"},de={class:"flex justify-between items-center"},_e={class:"text-page-title"},ve={class:"mt-[16px] flex justify-end"},Ge=M({__name:"list",setup(ge){const k=O(),T=q().meta.title,t=I({page:1,limit:10,total:0,loading:!1,data:[],searchParam:{active_name:"",active_status:""}}),C=b(),p=(s=1)=>{t.loading=!0,t.page=s,se({page:t.page,limit:t.limit,...t.searchParam}).then(i=>{t.loading=!1,t.data=i.data.data,t.total=i.data.total,H(t.page,t.limit,t.searchParam)}).catch(()=>{t.loading=!1})};p(K(t.searchParam).page);const w=s=>{s&&(s.resetFields(),p())},x=b({});(()=>{re().then(s=>{x.value=s.data})})();const B=()=>{k.push("/shop/marketing/discount/add")},f=b(null),F=s=>{let i={id:s};f.value.setFormData(i),f.value.showDialog=!0},V=s=>{k.push({path:"/shop/marketing/discount/edit",query:{id:s}})},S=s=>{P.confirm(e("closeTips"),e("warning"),{confirmButtonText:e("confirm"),cancelButtonText:e("cancel"),type:"warning"}).then(()=>{ce(s).then(()=>{p()}).catch(()=>{})})},A=s=>{P.confirm(e("deleteTips"),e("warning"),{confirmButtonText:e("confirm"),cancelButtonText:e("cancel"),type:"warning"}).then(()=>{me(s).then(()=>{p()}).catch(()=>{})})};return(s,i)=>{const u=J,L=Q,h=X,$=Z,z=ee,N=te,D=ae,c=le,R=ne,U=ie,j=oe;return d(),E("div",ue,[l(D,{class:"box-card !border-none",shadow:"never"},{default:o(()=>[m("div",de,[m("span",_e,r(n(T)),1),l(u,{type:"primary",onClick:B},{default:o(()=>[_(r(n(e)("addDiscount")),1)]),_:1})]),l(D,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:o(()=>[l(N,{inline:!0,model:t.searchParam,ref_key:"searchFormRef",ref:C},{default:o(()=>[l(h,{label:n(e)("name"),prop:"active_name"},{default:o(()=>[l(L,{modelValue:t.searchParam.active_name,"onUpdate:modelValue":i[0]||(i[0]=a=>t.searchParam.active_name=a),modelModifiers:{trim:!0},placeholder:n(e)("namePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(h,{label:n(e)("status"),prop:"active_status"},{default:o(()=>[l(z,{modelValue:t.searchParam.active_status,"onUpdate:modelValue":i[1]||(i[1]=a=>t.searchParam.active_status=a),clearable:"",placeholder:n(e)("statusPlaceholder"),class:"input-item"},{default:o(()=>[(d(!0),E(W,null,Y(x.value,(a,v)=>(d(),g($,{key:v,label:a,value:v},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(h,null,{default:o(()=>[l(u,{type:"primary",onClick:i[2]||(i[2]=a=>p())},{default:o(()=>[_(r(n(e)("search")),1)]),_:1}),l(u,{onClick:i[3]||(i[3]=a=>w(C.value))},{default:o(()=>[_(r(n(e)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),m("div",null,[G((d(),g(R,{data:t.data,size:"large"},{empty:o(()=>[m("span",null,r(t.loading?"":n(e)("emptyData")),1)]),default:o(()=>[l(c,{prop:"active_name",label:n(e)("name"),"min-width":"130"},null,8,["label"]),l(c,{prop:"active_desc",label:n(e)("title"),"min-width":"130"},null,8,["label"]),l(c,{prop:"active_status_name",label:n(e)("status"),"min-width":"130"},null,8,["label"]),l(c,{prop:"active_order_money",label:n(e)("paymentAmount"),"min-width":"130"},null,8,["label"]),l(c,{prop:"active_order_num",label:n(e)("orderCount"),"min-width":"130"},null,8,["label"]),l(c,{prop:"active_member_num",label:n(e)("memberCount"),"min-width":"130"},null,8,["label"]),l(c,{label:n(e)("discountTime"),"min-width":"150"},{default:o(({row:a})=>[m("div",null,[m("p",null,"开始："+r(a.start_time),1),m("p",null,"结束："+r(a.end_time),1)])]),_:1},8,["label"]),l(c,{label:n(e)("operation"),fixed:"right",align:"right","min-width":"160"},{default:o(({row:a})=>[a.active_status=="not_active"||a.active_status=="active"?(d(),g(u,{key:0,type:"primary",link:"",onClick:v=>V(a.active_id)},{default:o(()=>[_(r(n(e)("edit")),1)]),_:2},1032,["onClick"])):y("",!0),l(u,{type:"primary",link:"",onClick:v=>F(a.active_id)},{default:o(()=>[_(r(n(e)("detail")),1)]),_:2},1032,["onClick"]),a.active_status=="active"?(d(),g(u,{key:1,type:"primary",link:"",onClick:v=>S(a.active_id)},{default:o(()=>[_(r(n(e)("close")),1)]),_:2},1032,["onClick"])):y("",!0),a.active_status!="active"?(d(),g(u,{key:2,type:"primary",link:"",onClick:v=>A(a.active_id)},{default:o(()=>[_(r(n(e)("delete")),1)]),_:2},1032,["onClick"])):y("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[j,t.loading]]),m("div",ve,[l(U,{"current-page":t.page,"onUpdate:current-page":i[4]||(i[4]=a=>t.page=a),"page-size":t.limit,"onUpdate:page-size":i[5]||(i[5]=a=>t.limit=a),layout:"total, sizes, prev, pager, next, jumper",total:t.total,onSizeChange:i[6]||(i[6]=a=>p()),onCurrentChange:p},null,8,["current-page","page-size","total"])])])]),_:1}),l(pe,{ref_key:"discountDetailDialog",ref:f},null,512)])}}});export{Ge as default};

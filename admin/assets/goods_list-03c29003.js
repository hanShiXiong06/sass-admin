import{d as O,x as q,f as H,n as J,r as b,bO as K,h as d,c as f,e as n,w as o,a as c,t as i,u as l,i as p,q as t,F as W,T as Q,s as h,R as X,A as Z,B as x,bP as ee,a5 as V,E as te,K as ae,L as le,ac as oe,aD as ne,bR as se,M as ie,a7 as re,J as ce,ad as de,ae as me,W as pe,Y as ue}from"./index-904cb7a2.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                 *//* empty css                        *//* empty css                *//* empty css                *//* empty css                       *//* empty css                  */import"./el-form-item-4ed993c7.js";import{_ as S}from"./goods_default-664bb559.js";import{_ as _e}from"./goods-spread-popup.vue_vue_type_script_setup_true_lang-aa5d5770.js";import{a as ge,b as he,E as fe,F as ve}from"./marketing-fa4978d8.js";/* empty css                  *//* empty css                   */import"./browser-a1ac24ac.js";const be={class:"main-container"},xe={class:"flex justify-between items-center"},ke={class:"text-page-title"},ye={class:"mt-[10px]"},Ee={class:"flex items-center cursor-pointer"},Ce={class:"min-w-[60px] h-[60px] flex items-center justify-center"},Pe=c("div",{class:"image-slot"},[c("img",{class:"w-[60px] h-[60px]",src:S})],-1),Te={key:1,class:"w-[70px] h-[60px]",src:S,fit:"contain"},Ve={class:"ml-2"},Se=["title"],we={key:0},Be={key:1},Fe={class:"mt-[16px] flex justify-end"},st=O({__name:"goods_list",setup(De){const w=q(),k=H(),B=w.meta.title,a=J({page:1,limit:10,total:0,loading:!1,data:[],searchParam:{names:"",status:"",create_time:[]}}),y=b(),u=(r=1)=>{a.loading=!0,a.page=r,ge({page:a.page,limit:a.limit,...a.searchParam}).then(s=>{a.loading=!1,a.data=s.data.data,a.total=s.data.total,ee(a.page,a.limit,a.searchParam)}).catch(()=>{a.loading=!1})};u(K(a.searchParam).page);const E=b([]);(()=>{he().then(r=>{E.value=r.data})})();const F=()=>{k.push("/shop/marketing/exchange/goods_add")},D=r=>{k.push({path:"/shop/marketing/exchange/goods_edit",query:{id:r}})},C=b(null),$=r=>{C.value.show(r,"point")},P=(r,s)=>{V.confirm(s?t("upTips"):t("downTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{fe({id:r,status:s}).then(()=>{u()}).catch(()=>{})})},A=r=>{V.confirm(t("deleteTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{ve(r).then(()=>{u()}).catch(()=>{})})},R=r=>{r&&(r.resetFields(),u())};return(r,s)=>{const m=te,N=ae,v=le,U=oe,z=ne,L=se,M=ie,T=re,Y=ce,g=de,j=me,G=pe,I=ue;return d(),f("div",be,[n(T,{class:"box-card !border-none",shadow:"never"},{default:o(()=>[c("div",xe,[c("span",ke,i(l(B)),1),n(m,{type:"primary",onClick:F},{default:o(()=>[p(i(l(t)("addGoods")),1)]),_:1})]),n(T,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:o(()=>[n(M,{inline:!0,model:a.searchParam,ref_key:"searchFormRef",ref:y},{default:o(()=>[n(v,{label:l(t)("goodsName"),prop:"names"},{default:o(()=>[n(N,{modelValue:a.searchParam.names,"onUpdate:modelValue":s[0]||(s[0]=e=>a.searchParam.names=e),modelModifiers:{trim:!0},placeholder:l(t)("goodsNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(v,{label:l(t)("status"),prop:"status"},{default:o(()=>[n(z,{modelValue:a.searchParam.status,"onUpdate:modelValue":s[1]||(s[1]=e=>a.searchParam.status=e),clearable:"",placeholder:l(t)("statusPlaceholder"),class:"input-item"},{default:o(()=>[(d(!0),f(W,null,Q(E.value,(e,_)=>(d(),h(U,{key:_,label:e,value:_},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(v,{label:l(t)("createTime"),prop:"create_time"},{default:o(()=>[n(L,{modelValue:a.searchParam.create_time,"onUpdate:modelValue":s[2]||(s[2]=e=>a.searchParam.create_time=e),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":l(t)("startDate"),"end-placeholder":l(t)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),n(v,null,{default:o(()=>[n(m,{type:"primary",onClick:s[3]||(s[3]=e=>u())},{default:o(()=>[p(i(l(t)("search")),1)]),_:1}),n(m,{onClick:s[4]||(s[4]=e=>R(y.value))},{default:o(()=>[p(i(l(t)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),c("div",ye,[X((d(),h(j,{data:a.data,size:"large"},{empty:o(()=>[c("span",null,i(a.loading?"":l(t)("emptyData")),1)]),default:o(()=>[n(g,{label:l(t)("goods"),"min-width":"130"},{default:o(({row:e})=>[c("div",Ee,[c("div",Ce,[e.goods_cover_thumb_small?(d(),h(Y,{key:0,class:"w-[60px] h-[60px]",src:l(Z)(e.goods_cover_thumb_small),fit:"contain"},{error:o(()=>[Pe]),_:2},1032,["src"])):(d(),f("img",Te))]),c("div",Ve,[c("span",{title:e.names,class:"multi-hidden"},i(e.names),9,Se)])])]),_:1},8,["label"]),n(g,{label:l(t)("exchangePrice"),"min-width":"130"},{default:o(({row:e})=>[e.point?(d(),f("p",we,i(e.point)+i(l(t)("pointUnit")),1)):x("",!0),e.price?(d(),f("p",Be,i(e.price)+i(l(t)("priceUnit")),1)):x("",!0)]),_:1},8,["label"]),n(g,{label:l(t)("redeemedAndSurplus"),"min-width":"130"},{default:o(({row:e})=>[c("span",null,i(e.total_exchange_num)+"/"+i(e.stock),1)]),_:1},8,["label"]),n(g,{prop:"create_time",label:l(t)("createTime"),"min-width":"150"},{default:o(({row:e})=>[c("div",null,i(e.create_time),1)]),_:1},8,["label"]),n(g,{prop:"status_name",label:l(t)("status"),"min-width":"130"},null,8,["label"]),n(g,{label:l(t)("operation"),fixed:"right",align:"right","min-width":"160"},{default:o(({row:e})=>[n(m,{type:"primary",link:"",onClick:_=>D(e.id)},{default:o(()=>[p(i(l(t)("edit")),1)]),_:2},1032,["onClick"]),n(m,{type:"primary",link:"",onClick:_=>$(e)},{default:o(()=>[p(i(l(t)("spreadGoods")),1)]),_:2},1032,["onClick"]),e.status?(d(),h(m,{key:0,type:"primary",link:"",onClick:_=>P(e.id,0)},{default:o(()=>[p(i(l(t)("down")),1)]),_:2},1032,["onClick"])):(d(),h(m,{key:1,type:"primary",link:"",onClick:_=>P(e.id,1)},{default:o(()=>[p(i(l(t)("up")),1)]),_:2},1032,["onClick"])),e.status?x("",!0):(d(),h(m,{key:2,type:"primary",link:"",onClick:_=>A(e.id)},{default:o(()=>[p(i(l(t)("delete")),1)]),_:2},1032,["onClick"]))]),_:1},8,["label"])]),_:1},8,["data"])),[[I,a.loading]]),c("div",Fe,[n(G,{"current-page":a.page,"onUpdate:current-page":s[5]||(s[5]=e=>a.page=e),"page-size":a.limit,"onUpdate:page-size":s[6]||(s[6]=e=>a.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:a.total,onSizeChange:s[7]||(s[7]=e=>u()),onCurrentChange:u},null,8,["current-page","page-size","total"])])])]),_:1}),n(_e,{ref_key:"goodsSpreadPopupRef",ref:C},null,512)])}}});export{st as default};

import{bw as De,r as g,d as Oe,f as Fe,y as Me,j as le,q as G,a2 as Ae,h as p,c as x,e as n,w as r,a as c,t as d,u as s,i as _,s as t,v as y,C,F as ne,T as re,R as M,bS as ie,b6 as de,B as je,a5 as U,U as E,ap as qe,a3 as Ke,E as He,K as Je,L as We,bF as Ye,ab as Qe,aC as Xe,av as Ze,M as ea,a7 as aa,ax as ta,ay as oa,ac as sa,J as la,ak as na,a1 as ra,ad as ia,W as da,Y as ca,p as pa,g as ua}from"./index-0e396751.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                        *//* empty css                    *//* empty css                *//* empty css                *//* empty css                          *//* empty css                 */import"./el-form-item-4ed993c7.js";/* empty css                  */import{_ as pe}from"./goods_default-664bb559.js";import ma from"./goods-member-price-popup-e73e9802.js";import _a from"./goods-stock-edit-popup-dbaa1d8d.js";import ga from"./goods-price-edit-popup-df7bd50e.js";import{_ as fa}from"./goods-spread-popup.vue_vue_type_script_setup_true_lang-0b4986cf.js";import{g as ha,b as ba,a6 as va,a7 as ya,a8 as A,a9 as ce,aa as ka,ab as Pa,ac as xa,ad as Ca}from"./goods-4d7d064c.js";import{a as Ea}from"./member-fcb60d7e.js";import{_ as Ta}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                       */import"./site-368fa7aa.js";import"./browser-a1ac24ac.js";const Sa=De("pagination",()=>{const S=g(1),w=g(10),V=g(0),B=g(!0);function f(k){S.value=k}function u(k){w.value=k}function R(k){V.value=k}function l(k){B.value=k}return{page:S,limit:w,total:V,loading:B,setPage:f,setLimit:u,setTotal:R,setLoading:l}}),ue=S=>(pa("data-v-c75078c7"),S=S(),ua(),S),wa={class:"main-container"},Va={class:"flex justify-between items-center"},$a={class:"text-page-title"},La={class:"region-input"},Ga=["placeholder"],Ba=ue(()=>c("span",{class:"separator"},"-",-1)),Ia=["placeholder"],Na={class:"mt-[10px]"},Ua={class:"mb-[10px] flex items-center"},Ra=["onClick"],za={class:"min-w-[70px] h-[70px] flex items-center justify-center"},Da=ue(()=>c("div",{class:"image-slot"},[c("img",{class:"w-[70px] h-[70px]",src:pe})],-1)),Oa={key:1,class:"w-[70px] h-[70px]",src:pe,fit:"contain"},Fa={class:"ml-2"},Ma=["title"],Aa={class:"text-[12px] multi-hidden"},ja={key:1,class:"tag text-[12px]"},qa={class:"text-primary text-[12px]"},Ka=["title"],Ha=["onClick"],Ja={key:0},Wa=["onClick"],Ya=["onClick"],Qa={key:0},Xa={key:1},Za={key:0},et={key:1},at={class:"mt-[16px] flex justify-end"},tt=Oe({__name:"list",setup(S){var ee;const w=Fe(),V=Me(),B=V.meta.title,f=g(!1),u=Sa(),R=(ee=le().siteInfo)==null?void 0:ee.site_id,l=G({page:u.page,limit:u.limit,total:u.total,loading:u.loading,data:[],searchParam:{goods_name:"",goods_category:[],goods_type:"",brand_id:"",label_ids:"",start_sale_num:"",end_sale_num:"",start_price:"",end_price:"",status:V.query.status||"1",order:"",sort:"",sku_no:""}}),k=g(),$={number:/^\d{0,10}$/,digit:/^\d{0,10}(.?\d{0,2})$/},z=G([]),me=G([]),j=G([]),q=G([]);(()=>{ha({flag:1}).then(o=>{const a=o.data;if(a){const i=[];a.forEach(P=>{const v=[];P.child_list&&(v.push({value:P.category_id,label:t("全部")}),P.child_list.forEach(L=>{v.push({value:L.category_id,label:L.category_name+" ("+L.goods_count+")"})})),i.push({value:P.category_id,label:P.category_name+" ("+P.goods_count+")",children:v})}),z.splice(0,z.length,...i)}}),ba().then(o=>{const a=o.data;if(a)for(const i in a)me.push(a[i])}),va({}).then(o=>{const a=o.data;a&&j.push(...a)}),ya({}).then(o=>{const a=o.data;a&&q.push(...a)})})();const _e=(o,a)=>{l.searchParam.status=o.props.name,m()},I=g(),N=g(!1),ge=o=>{N.value=!1,K.value.toggleAllSelection()},K=g(),T=g([]),fe=o=>{T.value=o,I.value=!1,T.value.length>0&&T.value.length<l.data.length?N.value=!0:N.value=!1,T.value.length==l.data.length&&(I.value=!0)},he=o=>{const a=w.resolve({path:"/preview/wap",query:{page:`/addon/phone_shop/pages/goods/detail?goods_id=${o.goods_id}`}});window.open(a.href)},be=o=>{let a="";o.order=="ascending"?a="asc":o.order=="descending"&&(a="desc"),a&&(l.searchParam.order=o.prop,l.searchParam.sort=a),m()},H=(o,a)=>{a?A({goods_ids:o.goods_id,status:a}).then(i=>{m()}):U.confirm(t("statusChangeTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{A({goods_ids:o.goods_id,status:a}).then(i=>{m()})})},J=o=>{if(T.value.length==0){E({type:"warning",message:`${t("batchEmptySelectedGoodsTips")}`});return}const a=[];T.value.forEach(i=>{a.push(i.goods_id)}),A({goods_ids:a,status:o}).then(i=>{m()})},ve=()=>{if(T.value.length==0){E({type:"warning",message:`${t("batchEmptySelectedGoodsTips")}`});return}U.confirm(t("batchGoodsDeleteTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{if(f.value)return;f.value=!0;const o=[];T.value.forEach(a=>{o.push(a.goods_id)}),ce({goods_ids:o}).then(()=>{m(),f.value=!1}).catch(()=>{f.value=!1})})},ye=qe((o,a)=>{if(isNaN(o)||!$.number.test(o)){E({type:"warning",message:`${t("sortTips")}`});return}o>99999999&&(a.sort=99999999),ka({goods_id:a.goods_id,sort:o}).then(i=>{})}),m=(o=1)=>{if(l.searchParam.start_sale_num&&!$.digit.test(l.searchParam.start_sale_num)){E({type:"warning",message:`${t("startSaleNumTips")}`});return}if(l.searchParam.end_sale_num&&!$.digit.test(l.searchParam.end_sale_num)){E({type:"warning",message:`${t("endSaleNumTips")}`});return}if(Number(l.searchParam.start_sale_num)>Number(l.searchParam.end_sale_num)){E({type:"warning",message:`${t("shopSaleNumTips")}`});return}if(l.searchParam.start_price&&!$.digit.test(l.searchParam.start_price)){E({type:"warning",message:`${t("startPriceTips")}`});return}if(l.searchParam.end_price&&!$.digit.test(l.searchParam.end_price)){E({type:"warning",message:`${t("endPriceTips")}`});return}if(Number(l.searchParam.start_price)>Number(l.searchParam.end_price)){E({type:"warning",message:`${t("shopPriceTips")}`});return}l.loading=!0,l.page=o;const a=Ke(l.searchParam);Pa({page:u.page,limit:u.limit,...a}).then(i=>{l.loading=!1,l.data=i.data.data,l.total=i.data.total,u.setLoading(!1),u.setTotal(i.data.total)}).catch(()=>{l.loading=!1})};function ke(o){u.setLimit(o),m()}function Pe(o){u.setPage(o),m()}m();const xe=()=>{w.push("/phone_shop/goods/real_edit")},Ce=o=>{w.push(o.goods_edit_path+"?goods_id="+o.goods_id)},W=g(null),Y=o=>{W.value.show(o)},Q=g(null),Ee=o=>{Q.value.show(o)},X=g(null),Z=o=>{X.value.show(o)},Te=g([]);(()=>{Ea().then(o=>{Te.value=o.data?o.data:[]})})();const Se=g(null),we=o=>{U.confirm(t("goodsCopyTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{f.value||(f.value=!0,xa({goods_id:o.goods_id}).then(a=>{a.code==1&&m(),f.value=!1}).catch(a=>{f.value=!1}))})},Ve=o=>{U.confirm(t("goodsDeleteTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{f.value||(f.value=!0,ce({goods_ids:o}).then(()=>{m(),f.value=!1}).catch(()=>{f.value=!1}))})},$e=o=>{o&&(o.resetFields(),l.searchParam.start_price="",l.searchParam.end_price="",l.searchParam.start_sale_num="",l.searchParam.end_sale_num="",l.searchParam.only_self=0,m())},Le=()=>{l.loading=!0;const o=E({message:"同步中...",type:"warning",duration:0});Ca().then(a=>{a.code==1&&m()}).finally(()=>{l.loading=!1,o.close()})};return(o,a)=>{const i=He,P=Je,v=We,L=Ye,ae=Qe,te=Xe,oe=Ze,Ge=ea,se=aa,D=ta,Be=oa,h=sa,Ie=la,Ne=na,O=Ae("EditPen"),F=ra,Ue=ia,Re=da,ze=ca;return p(),x("div",wa,[n(se,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[c("div",Va,[c("span",$a,d(s(B)),1),c("span",null,[n(i,{type:"primary",onClick:xe},{default:r(()=>[_(d(s(t)("addGoods")),1)]),_:1}),s(le)().siteInfo.site_id!==100005?(p(),y(i,{key:0,onClick:a[0]||(a[0]=e=>Le())},{default:r(()=>[_(d(s(t)("一键同步")),1)]),_:1})):C("",!0)])]),n(se,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:r(()=>[n(Ge,{inline:!0,model:l.searchParam,ref_key:"searchFormRef",ref:k},{default:r(()=>[n(v,{label:s(t)("商品sn"),prop:"goods_name"},{default:r(()=>[n(P,{modelValue:l.searchParam.sku_no,"onUpdate:modelValue":a[1]||(a[1]=e=>l.searchParam.sku_no=e),style:{width:"600px"},placeholder:s(t)("请输入商品sn编号,如有多个请以空格隔开,最多支持100个字符"),maxlength:"100",clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(v,{label:s(t)("goodsName"),prop:"goods_name"},{default:r(()=>[n(P,{modelValue:l.searchParam.goods_name,"onUpdate:modelValue":a[2]||(a[2]=e=>l.searchParam.goods_name=e),modelModifiers:{trim:!0},placeholder:s(t)("goodsNamePlaceholder"),maxlength:"60"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(v,{label:s(t)("goodsCategory"),prop:"goods_category"},{default:r(()=>[n(L,{modelValue:l.searchParam.goods_category,"onUpdate:modelValue":a[3]||(a[3]=e=>l.searchParam.goods_category=e),options:z,placeholder:s(t)("goodsCategoryPlaceholder"),clearable:"",props:{value:"value",label:"label",emitPath:!1}},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"]),n(v,{label:s(t)("brand"),prop:"brand_id"},{default:r(()=>[n(te,{modelValue:l.searchParam.brand_id,"onUpdate:modelValue":a[4]||(a[4]=e=>l.searchParam.brand_id=e),placeholder:s(t)("brandPlaceholder"),clearable:""},{default:r(()=>[(p(!0),x(ne,null,re(j,e=>(p(),y(ae,{key:e.brand_id,label:e.brand_name,value:e.brand_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(v,{label:s(t)("labelIds"),prop:"label_ids"},{default:r(()=>[n(te,{modelValue:l.searchParam.label_ids,"onUpdate:modelValue":a[5]||(a[5]=e=>l.searchParam.label_ids=e),placeholder:s(t)("labelIdsPlaceholder"),clearable:""},{default:r(()=>[(p(!0),x(ne,null,re(q,e=>(p(),y(ae,{key:e.label_id,label:e.label_name,value:e.label_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(v,{label:s(t)("skuPrice"),prop:"sku_price"},{default:r(()=>[c("div",La,[M(c("input",{type:"text",placeholder:s(t)("startPricePlaceholder"),maxlength:"10","onUpdate:modelValue":a[6]||(a[6]=e=>l.searchParam.start_price=e),onKeyup:a[7]||(a[7]=e=>s(ie)(e))},null,40,Ga),[[de,l.searchParam.start_price,void 0,{trim:!0}]]),Ba,M(c("input",{type:"text",placeholder:s(t)("endPricePlaceholder"),maxlength:"10","onUpdate:modelValue":a[8]||(a[8]=e=>l.searchParam.end_price=e),onKeyup:a[9]||(a[9]=e=>s(ie)(e))},null,40,Ia),[[de,l.searchParam.end_price,void 0,{trim:!0}]])])]),_:1},8,["label"]),n(v,null,{default:r(()=>[n(oe,{modelValue:l.searchParam.only_self,"onUpdate:modelValue":a[10]||(a[10]=e=>l.searchParam.only_self=e),label:s(t)("只看自己")},null,8,["modelValue","label"])]),_:1}),n(v,null,{default:r(()=>[n(i,{type:"primary",onClick:a[11]||(a[11]=e=>m())},{default:r(()=>[_(d(s(t)("search")),1)]),_:1}),n(i,{onClick:a[12]||(a[12]=e=>$e(k.value))},{default:r(()=>[_(d(s(t)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),c("div",Na,[n(Be,{modelValue:l.searchParam.status,"onUpdate:modelValue":a[13]||(a[13]=e=>l.searchParam.status=e),class:"goods-tabs",onTabClick:_e},{default:r(()=>[n(D,{label:s(t)("statusOn"),name:"1"},null,8,["label"]),n(D,{label:s(t)("statusOff"),name:"0"},null,8,["label"]),n(D,{label:s(t)("statusAll"),name:""},null,8,["label"])]),_:1},8,["modelValue"]),c("div",Ua,[n(oe,{modelValue:I.value,"onUpdate:modelValue":a[14]||(a[14]=e=>I.value=e),size:"large",class:"px-[14px]",onChange:ge,indeterminate:N.value},null,8,["modelValue","indeterminate"]),l.searchParam.status!="1"?(p(),y(i,{key:0,onClick:a[15]||(a[15]=e=>J(1)),size:"small"},{default:r(()=>[_(d(s(t)("batchOnGoods")),1)]),_:1})):C("",!0),l.searchParam.status!="0"?(p(),y(i,{key:1,onClick:a[16]||(a[16]=e=>J(0)),size:"small"},{default:r(()=>[_(d(s(t)("batchOffGoods")),1)]),_:1})):C("",!0),n(i,{onClick:ve,size:"small"},{default:r(()=>[_(d(s(t)("batchDeleteGoods")),1)]),_:1})]),M((p(),y(Ue,{data:l.data,size:"large",ref_key:"goodsListTableRef",ref:K,onSortChange:be,onSelectionChange:fe},{empty:r(()=>[c("span",null,d(l.loading?"":s(t)("emptyData")),1)]),default:r(()=>[n(h,{type:"selection",width:"55"}),n(h,{prop:"goods_id",label:s(t)("goodsInfo"),"min-width":"300"},{default:r(({row:e})=>[c("div",{class:"flex items-center cursor-pointer",onClick:b=>he(e)},[c("div",za,[e.goods_cover?(p(),y(Ie,{key:0,class:"w-[70px] h-[70px]",src:s(je)(e.goods_cover),fit:"contain"},{error:r(()=>[Da]),_:2},1032,["src"])):(p(),x("img",Oa))]),c("div",Fa,[c("span",{title:e.goods_name,class:"multi-hidden"},d(e.goods_name),9,Ma),c("view",Aa,d(e.sub_title),1),c("view",null,[e.brand_name?(p(),y(Ne,{key:0,type:"success",size:"small"},{default:r(()=>[_(d(e.brand_name),1)]),_:2},1024)):C("",!0),e.brand_name?(p(),x("span",ja," | ")):C("",!0),c("span",qa,d(e.goods_type_name),1)])])],8,Ra)]),_:1},8,["label"]),n(h,{prop:"sku_no",label:s(t)("sn"),"min-width":"130"},{default:r(({row:e})=>[c("span",{title:e.sku_no},d(e.goodsSku.sku_no),9,Ka)]),_:1},8,["label"]),n(h,{prop:"price",label:s(t)("同行价"),"min-width":"120",align:"right",sortable:"custom"},{default:r(({row:e})=>[c("div",{class:"cursor-pointer price-wrap",onClick:b=>Y(e)},[e.goodsSku.market_price?(p(),x("span",Ja,"￥"+d(e.goodsSku.market_price),1)):C("",!0),n(F,{class:"icon-wrap ml-[5px] invisible"},{default:r(()=>[n(O)]),_:1})],8,Ha)]),_:1},8,["label"]),n(h,{prop:"price",label:s(t)("skuPrice"),"min-width":"120",align:"right",sortable:"custom"},{default:r(({row:e})=>[c("div",{class:"cursor-pointer price-wrap",onClick:b=>Y(e)},[c("span",null,"￥"+d(e.goodsSku.price),1),n(F,{class:"icon-wrap ml-[5px] invisible"},{default:r(()=>[n(O)]),_:1})],8,Wa)]),_:1},8,["label"]),n(h,{prop:"cost_price",label:s(t)("成本价"),"min-width":"120",align:"right",sortable:"custom"},null,8,["label"]),n(h,{prop:"stock",label:s(t)("stock"),"min-width":"120",sortable:"custom"},{default:r(({row:e})=>[c("div",{class:"cursor-pointer stock-wrap",onClick:b=>Ee(e)},[c("span",null,d(e.stock),1),n(F,{class:"icon-wrap ml-[5px] invisible"},{default:r(()=>[n(O)]),_:1})],8,Ya)]),_:1},8,["label"]),n(h,{prop:"status",label:s(t)("status"),"min-width":"100"},{default:r(({row:e})=>[e.status==1?(p(),x("div",Qa,d(s(t)("statusOn")),1)):C("",!0),e.status==0?(p(),x("div",Xa,d(s(t)("statusOff")),1)):C("",!0)]),_:1},8,["label"]),n(h,{prop:"sort",label:s(t)("sort"),"min-width":"120",sortable:"custom"},{default:r(({row:e})=>[n(P,{modelValue:e.sort,"onUpdate:modelValue":b=>e.sort=b,class:"w-[70px]",maxlength:"8",onBlur:b=>s(ye)(e.sort,e)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1},8,["label"]),n(h,{prop:"site_name",label:s(t)("来源"),"min-width":"120"},null,8,["label"]),l.searchParam.status==1?(p(),y(h,{key:0,prop:"join_time",label:s(t)("库龄"),"min-width":"120"},null,8,["label"])):C("",!0),n(h,{prop:"create_time",label:s(t)("createTime"),"min-width":"150",sortable:"custom"},{default:r(({row:e})=>[c("div",null,d(e.create_time),1)]),_:1},8,["label"]),n(h,{prop:"update_time",label:s(t)("updateTime"),"min-width":"150",sortable:"custom"},{default:r(({row:e})=>[c("div",null,d(e.update_time),1)]),_:1},8,["label"]),n(h,{label:s(t)("operation"),fixed:"right",align:"right","min-width":"120"},{default:r(({row:e})=>[s(R)==e.site_id?(p(),x("div",Za,[n(i,{type:"primary",link:"",onClick:b=>Ce(e)},{default:r(()=>[_(d(s(t)("edit")),1)]),_:2},1032,["onClick"]),n(i,{type:"primary",link:"",onClick:b=>Z(e)},{default:r(()=>[_(d(s(t)("spreadGoods")),1)]),_:2},1032,["onClick"]),e.status==1?(p(),y(i,{key:0,type:"primary",link:"",onClick:b=>H(e,0)},{default:r(()=>[_(d(s(t)("statusActionOff")),1)]),_:2},1032,["onClick"])):(p(),y(i,{key:1,type:"primary",link:"",onClick:b=>H(e,1)},{default:r(()=>[_(d(s(t)("statusActionOn")),1)]),_:2},1032,["onClick"])),n(i,{type:"primary",link:"",onClick:b=>we(e)},{default:r(()=>[_(d(s(t)("copyGoods")),1)]),_:2},1032,["onClick"]),e.status!=1?(p(),y(i,{key:2,type:"primary",link:"",onClick:b=>Ve(e.goods_id)},{default:r(()=>[_(d(s(t)("delete")),1)]),_:2},1032,["onClick"])):C("",!0)])):(p(),x("div",et,[n(i,{type:"primary",link:"",onClick:b=>Z(e)},{default:r(()=>[_(d(s(t)("spreadGoods")),1)]),_:2},1032,["onClick"])]))]),_:1},8,["label"])]),_:1},8,["data"])),[[ze,l.loading]]),c("div",at,[n(Re,{"current-page":s(u).page,"onUpdate:current-page":a[17]||(a[17]=e=>s(u).page=e),"page-size":s(u).limit,"onUpdate:page-size":a[18]||(a[18]=e=>s(u).limit=e),layout:"total, sizes, prev, pager, next, jumper",total:s(u).total,onSizeChange:ke,onCurrentChange:Pe},null,8,["current-page","page-size","total"])])])]),_:1}),n(_a,{ref_key:"goodsStockEditPopupRef",ref:Q,onLoad:m},null,512),n(ga,{ref_key:"goodsPriceEditPopupRef",ref:W,onLoad:m},null,512),n(fa,{ref_key:"goodsSpreadPopupRef",ref:X},null,512),n(ma,{ref_key:"memberPricePopupRef",ref:Se,onLoad:m},null,512)])}}});const Ot=Ta(tt,[["__scopeId","data-v-c75078c7"]]);export{Ot as default};

import{d as z,r,h as m,v as D,w as u,a as d,e as f,i as k,R as M,c as x,F as E,T as U,x as _,$ as X,C as T,t as Y,a3 as y,L as q,M as A,E as G,X as H,Y as J}from"./index-0e396751.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                */import"./el-form-item-4ed993c7.js";import{b as K,s as O}from"./diy-e7cda029.js";import{_ as P}from"./edit-theme.vue_vue_type_script_setup_true_lang-375e19d7.js";import{u as Q}from"./diy-0604e925.js";const W={class:"flex items-center flex-wrap"},Z=["onClick"],I={class:"dialog-footer"},ce=z({__name:"theme-list",emits:["confirm"],setup(ee,{expose:V,emit:w}){Q();const b=r(null),s=r(!1);let v=!1;const c=r(""),t=r(""),n=r(""),i=r([]),C=r("default"),l=r({}),$=e=>{v=!1,l.value=y(e),n.value=e.value,t.value=e.color_mark,c.value=e.color_name,i.value.forEach((a,p)=>{a.name==l.value.color_mark&&(a.diy_value=l.value.diy_value,a.title=e.color_name)}),C.value=e.mode,s.value=!0};(()=>{K().then(e=>{i.value=e.data||[];let a={name:"diy",theme:"",title:""};i.value.push(a)})})();const g=e=>{e.name==l.value.color_mark?(c.value=l.value.color_name,t.value=l.value.color_mark,n.value=l.value.value):typeof e=="object"?(c.value=e.title,t.value=e.name,n.value=e.theme):(c.value="自定义",t.value=e,n.value="")},F=()=>{let e={default:{},data:{},title:"",mark:"",diy_value:[]};e.data=y(n.value)||{},e.mark=t.value,i.value.forEach((a,p)=>{a.name==t.value&&(e.default=a.theme?y(a.theme):"",e.diy_value=a.diy_value||[],e.title=a.title)}),b.value.open(e)},B=e=>{t.value==l.value.color_mark&&(l.value.value=e.theme),i.value.forEach((a,p)=>{a.name==t.value&&(a.diy_value=e.diy_value||[])}),l.value.title=e.title,n.value=e.theme},N=()=>{if(v)return;v=!0;let e={};e.id=l.value.id,e.mode=C.value,e.color_mark=t.value,e.value=n.value,e.key=l.value.key,e.color_name=t.value=="diy"?l.value.title||"自定义":c.value,i.value.forEach((a,p)=>{a.name==t.value&&(e.diy_value=y(a.diy_value))}),O(e).then(a=>{w("confirm",l),v=!1,s.value=!1}).catch(()=>{v=!1})};return V({dialogThemeVisible:s,open:$}),(e,a)=>{const p=q,R=A,h=G,L=H,S=J;return m(),D(L,{modelValue:s.value,"onUpdate:modelValue":a[4]||(a[4]=o=>s.value=o),title:l.value.addon_title,width:"550px","align-center":""},{footer:u(()=>[d("div",I,[f(h,{onClick:a[1]||(a[1]=o=>s.value=!1)},{default:u(()=>[k("取消")]),_:1}),f(h,{type:"primary",plain:"",onClick:a[2]||(a[2]=o=>F())},{default:u(()=>[k("编辑")]),_:1}),f(h,{type:"primary",onClick:a[3]||(a[3]=o=>N())},{default:u(()=>[k("确定")]),_:1})])]),default:u(()=>[M((m(),D(R,{class:"page-form mt-[15px]",model:e.formData,"label-width":"90px"},{default:u(()=>[f(p,{label:"选择配色"},{default:u(()=>[d("div",W,[(m(!0),x(E,null,U(i.value,(o,j)=>(m(),x(E,null,[o.name!="diy"?(m(),x("div",{key:j,class:_(["flex items-center border-[1px] border-solid border-[#dcdee2] rounded-[5px] h-[40px] px-[15px] mr-[10px] cursor-pointer my-[5px]",{"!border-[var(--el-color-primary)]":t.value==o.name}]),onClick:le=>g(o)},[l.value.theme?(m(),x("span",{key:0,class:"w-[20px] h-[20px] mr-[5px] rounded-[3px]",style:X({backgroundColor:l.value.theme["--primary-color"]})},null,4)):T("",!0),d("span",{class:_(["text-[14px]",{"!text-[var(--el-color-primary)]":t.value==o.name}])},Y(o.title),3)],10,Z)):T("",!0)],64))),256)),d("div",{class:_(["flex items-center border-[1px] border-solid border-[#dcdee2] rounded-[5px] h-[40px] px-[15px] cursor-pointer",{"!border-[var(--el-color-primary)]":t.value=="diy"}]),onClick:a[0]||(a[0]=o=>g("diy"))},[d("span",{class:_(["nc-iconfont nc-icon-tianjiaV6xx mr-[5px]",{"!text-[var(--el-color-primary)]":t.value=="diy"}])},null,2),d("span",{class:_(["text-[14px]",{"!text-[var(--el-color-primary)]":t.value=="diy"}])},"自定义",2)],2)])]),_:1})]),_:1},8,["model"])),[[S,e.loading]]),f(P,{ref_key:"editThemeRef",ref:b,onConfirm:B},null,512)]),_:1},8,["modelValue","title"])}}});export{ce as _};

import{d as Q,y as W,f as X,r as y,q as Z,a2 as ee,h as m,c as w,e as o,w as s,a as n,t as i,u as a,R as le,v as x,s as l,bU as F,C as g,F as N,T as B,i as p,x as te,U as oe,av as se,L as ae,K as ne,a7 as re,ab as ie,aC as ue,at as de,au as _e,a1 as pe,E as me,c8 as ce,M as fe,Y as ve}from"./index-0e396751.js";/* empty css                   *//* empty css                *//* empty css                          *//* empty css                  *//* empty css                       *//* empty css                 *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                    */import{A as he,B as xe}from"./order-3f7fd991.js";import{u as ge}from"./diy_form-e1ce8c59.js";const be={class:"main-container"},Ve={class:"flex justify-between items-center"},ye={class:"text-page-title"},we={class:"flex justify-start items-center"},Ee={class:"panel-title !text-sm pl-[15px]"},Ce={class:"!text-sm"},Ie={class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},Fe={class:"flex justify-start items-center"},Le={class:"panel-title !text-sm pl-[15px]"},Re={class:"!text-sm"},Ue={class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},Oe={class:"flex justify-start items-center"},Ne={class:"panel-title !text-sm pl-[15px]"},Be={class:"!text-sm"},De={class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},ke={class:"panel-title !text-sm pl-[15px]"},Me={class:"ml-[10px]"},Te={class:"panel-title !text-sm pl-[15px]"},Pe={class:"panel-title !text-sm pl-[15px]"},je={class:"flex"},Se={class:"mx-[10px]"},Ke={class:"mr-[10px]"},$e={key:0,class:"fixed-footer-wrap"},Ye={class:"fixed-footer"},ml=Q({__name:"config",setup(Ae){const D=W(),k=X(),M=D.meta.title,t=y({close_length:"10",finish_length:"1",invoice_content:[""],invoice_type:[],is_close:"1",is_finish:"1",is_invoice:"1",no_allow_refund:"1",refund_length:"1",is_evaluate:1,evaluate_is_to_examine:1,evaluate_is_show:1,form_id:""}),T=y({close_length:[{validator:(d,e,u)=>t.value.is_close!="2"?e==""?u(new Error(l("CloseLengthPlaceholder"))):Number(e)>=10&&Number(e)<=1440?u():u(new Error(l("closeOrderInfoBottom"))):u(),trigger:"blur"}],finish_length:[{validator:(d,e,u)=>t.value.is_finish!="2"?e==""?u(new Error(l("finishLengthPlaceholder"))):Number(e)>=1&&Number(e)<=30?u():u(new Error(l("confirmBottom"))):u(),trigger:"blur"}],refund_length:[{validator:(d,e,u)=>t.value.no_allow_refund!="2"?e==""?u(new Error(l("validRefundLengthPlaceholder"))):Number(e)>=1&&Number(e)<=30?u():u(new Error(l("refundBottom"))):u(),trigger:"blur"}],invoice_type:[{validator:(d,e,u)=>t.value.is_invoice==="1"?e.length?u():u(new Error(l("invoiceTypePlaceholder"))):u(),trigger:"change"}]}),E=Z([]),P=()=>{const d=k.resolve({path:"/diy_form/list"});window.open(d.href)},L=(d=!1)=>{ge({type:"DIY_FROM_ORDER_PAYMENT",status:1}).then(e=>{const u=e.data;u&&(E.splice(0,E.length,...u),d&&oe({message:l("refreshSuccess"),type:"success"}))})};L();const f=y(!1),R=()=>{f.value=!0,he().then(d=>{Object.values(d.data).forEach(e=>{t.value=Object.assign(t.value,e)}),t.value.form_id=d.data.form_id,t.value.invoice_content.length||t.value.invoice_content.push(""),f.value=!1}).catch(()=>{f.value=!1})},j=()=>{t.value.invoice_content.push("")},S=d=>{t.value.invoice_content.splice(d,1)};R();const U=y(),K=async d=>{await d.validate(async e=>{e&&(f.value=!0,xe(t.value).then(u=>{R()}).catch(()=>{f.value=!1}))})};return(d,e)=>{const u=se,_=ae,b=ne,v=re,$=ie,Y=ue,c=de,V=_e,A=ee("CircleCloseFilled"),G=pe,O=me,q=ce,z=fe,H=ve;return m(),w("div",be,[o(v,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[n("div",Ve,[n("span",ye,i(a(M)),1)]),le((m(),x(z,{model:t.value,"label-width":"95",ref_key:"formRef",ref:U,rules:T.value,class:"page-form"},{default:s(()=>[o(v,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[n("div",we,[n("h3",Ee,i(a(l)("closeOrderInfo")),1),o(_,{class:"ml-[-80px]",prop:"is_close"},{default:s(()=>[o(u,{modelValue:t.value.is_close,"onUpdate:modelValue":e[0]||(e[0]=r=>t.value.is_close=r),"true-label":"1","false-label":"2"},null,8,["modelValue"])]),_:1})]),t.value.is_close=="1"?(m(),x(_,{key:0,prop:"close_length"},{default:s(()=>[n("div",null,[n("p",Ce,[n("span",null,i(a(l)("closeOrderInfoLeft")),1),o(b,{modelValue:t.value.close_length,"onUpdate:modelValue":e[1]||(e[1]=r=>t.value.close_length=r),modelModifiers:{trim:!0},class:"!w-[120px] mx-[10px]",onKeyup:e[2]||(e[2]=r=>a(F)(r)),clearable:""},null,8,["modelValue"]),n("span",null,i(a(l)("closeOrderInfoRight")),1)]),n("p",Ie,i(a(l)("closeOrderInfoBottom")),1)])]),_:1})):g("",!0)]),_:1}),o(v,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[n("div",Fe,[n("h3",Le,i(a(l)("confirm")),1),o(_,{class:"ml-[-80px]",prop:"is_finish"},{default:s(()=>[o(u,{modelValue:t.value.is_finish,"onUpdate:modelValue":e[3]||(e[3]=r=>t.value.is_finish=r),"true-label":"1","false-label":"2"},null,8,["modelValue"])]),_:1})]),t.value.is_finish=="1"?(m(),x(_,{key:0,prop:"finish_length"},{default:s(()=>[n("div",null,[n("p",Re,[n("span",null,i(a(l)("confirmLeft")),1),o(b,{modelValue:t.value.finish_length,"onUpdate:modelValue":e[4]||(e[4]=r=>t.value.finish_length=r),modelModifiers:{trim:!0},class:"!w-[120px] mx-[10px]",onKeyup:e[5]||(e[5]=r=>a(F)(r)),clearable:""},null,8,["modelValue"]),n("span",null,i(a(l)("confirmRight")),1)]),n("p",Ue,i(a(l)("confirmBottom")),1)])]),_:1})):g("",!0)]),_:1}),o(v,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[n("div",Oe,[n("h3",Ne,i(a(l)("refund")),1),o(_,{class:"ml-[-80px]",prop:"no_allow_refund"},{default:s(()=>[o(u,{modelValue:t.value.no_allow_refund,"onUpdate:modelValue":e[6]||(e[6]=r=>t.value.no_allow_refund=r),"true-label":1,"false-label":2},null,8,["modelValue"])]),_:1})]),t.value.no_allow_refund=="1"?(m(),x(_,{key:0,prop:"refund_length"},{default:s(()=>[n("div",null,[n("p",Be,[n("span",null,i(a(l)("refundLeft")),1),o(b,{modelValue:t.value.refund_length,"onUpdate:modelValue":e[7]||(e[7]=r=>t.value.refund_length=r),modelModifiers:{trim:!0},class:"!w-[120px] mx-[10px]",onKeyup:e[8]||(e[8]=r=>a(F)(r)),clearable:""},null,8,["modelValue"]),n("span",null,i(a(l)("refundRight")),1)]),n("p",De,i(a(l)("refundBottom")),1)])]),_:1})):g("",!0)]),_:1}),o(v,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[n("h3",ke,i(a(l)("diyForm")),1),o(_,null,{default:s(()=>[o(Y,{modelValue:t.value.form_id,"onUpdate:modelValue":e[9]||(e[9]=r=>t.value.form_id=r),placeholder:a(l)("diyFormPlaceholder"),clearable:""},{default:s(()=>[(m(!0),w(N,null,B(E,r=>(m(),x($,{key:r.form_id,label:r.page_title,value:r.form_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),n("div",Me,[n("span",{class:"cursor-pointer text-primary mr-[10px]",onClick:e[10]||(e[10]=r=>L(!0))},i(a(l)("refresh")),1),n("span",{class:"cursor-pointer text-primary",onClick:P},i(a(l)("addDiyForm")),1)])]),_:1})]),_:1}),o(v,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[n("h3",Te,i(a(l)("evaluate")),1),o(_,{prop:"refund_length"},{default:s(()=>[n("span",null,i(a(l)("isEvaluate")),1),o(V,{class:"mx-[10px]",modelValue:t.value.is_evaluate,"onUpdate:modelValue":e[11]||(e[11]=r=>t.value.is_evaluate=r)},{default:s(()=>[o(c,{label:1},{default:s(()=>[p(i(a(l)("isEvaluateOpen")),1)]),_:1}),o(c,{label:0},{default:s(()=>[p(i(a(l)("isEvaluateClose")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(_,{prop:"refund_length"},{default:s(()=>[n("span",null,i(a(l)("evaluateIsToExamine")),1),o(V,{class:"mx-[10px]",modelValue:t.value.evaluate_is_to_examine,"onUpdate:modelValue":e[12]||(e[12]=r=>t.value.evaluate_is_to_examine=r)},{default:s(()=>[o(c,{label:1},{default:s(()=>[p(i(a(l)("isEvaluateOpen")),1)]),_:1}),o(c,{label:0},{default:s(()=>[p(i(a(l)("isEvaluateClose")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(_,{prop:"refund_length"},{default:s(()=>[n("span",null,i(a(l)("evaluateIsShow")),1),o(V,{class:"mx-[10px]",modelValue:t.value.evaluate_is_show,"onUpdate:modelValue":e[13]||(e[13]=r=>t.value.evaluate_is_show=r)},{default:s(()=>[o(c,{label:1},{default:s(()=>[p(i(a(l)("isEvaluateOpen")),1)]),_:1}),o(c,{label:0},{default:s(()=>[p(i(a(l)("isEvaluateClose")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(v,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[n("h3",Pe,i(a(l)("invoice")),1),o(_,null,{default:s(()=>[n("span",null,i(a(l)("isInvoice")),1),o(V,{class:"mx-[10px]",modelValue:t.value.is_invoice,"onUpdate:modelValue":e[14]||(e[14]=r=>t.value.is_invoice=r)},{default:s(()=>[o(c,{label:"2"},{default:s(()=>[p(i(a(l)("isInvoiceClose")),1)]),_:1}),o(c,{label:"1"},{default:s(()=>[p(i(a(l)("isInvoiceOpen")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(_,{class:"invoice"},{default:s(()=>[n("div",je,[n("div",null,i(a(l)("invoiceContent")),1),n("div",Se,[(m(!0),w(N,null,B(t.value.invoice_content,(r,h)=>(m(),x(_,{prop:`invoice_content[${h}]`,key:h,rules:[{validator:(C,J,I)=>t.value.is_invoice==="1"&&J===""?I(a(l)("invoicePlaceholder")):I(),trigger:"blur"}]},{default:s(()=>[n("div",{class:te(["w-[120px] relative",h?"mt-[15px]":""])},[o(b,{modelValue:t.value.invoice_content[h],"onUpdate:modelValue":C=>t.value.invoice_content[h]=C,modelModifiers:{trim:!0},class:"!w-[120px]",clearable:""},null,8,["modelValue","onUpdate:modelValue"]),h?(m(),x(G,{key:0,color:"rgba(0, 0, 0, 0.3)",class:"!absolute right-[-6px] top-[-5px]",onClick:C=>S(h)},{default:s(()=>[o(A)]),_:2},1032,["onClick"])):g("",!0)],2)]),_:2},1032,["prop","rules"]))),128))]),o(O,{onClick:j},{default:s(()=>[p(i(a(l)("insert")),1)]),_:1})])]),_:1}),o(_,{prop:"invoice_type"},{default:s(()=>[n("span",Ke,i(a(l)("invoiceType")),1),o(q,{modelValue:t.value.invoice_type,"onUpdate:modelValue":e[15]||(e[15]=r=>t.value.invoice_type=r)},{default:s(()=>[o(u,{label:"1"},{default:s(()=>[p(i(a(l)("electronicInvoice")),1)]),_:1}),o(u,{label:"2"},{default:s(()=>[p(i(a(l)("paperInvoice")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[H,f.value]]),f.value?g("",!0):(m(),w("div",$e,[n("div",Ye,[o(O,{type:"primary",onClick:e[16]||(e[16]=r=>K(U.value))},{default:s(()=>[p(i(a(l)("save")),1)]),_:1})])]))]),_:1})])}}});export{ml as default};

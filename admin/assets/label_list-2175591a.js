import{d as Y,y as A,f as H,q as D,r as k,h as p,c as g,e as t,w as s,a as u,t as i,u as r,i as _,s as o,F as J,T as Q,v as h,R as X,$ as Z,B as ee,C as ae,a5 as te,ap as oe,U as le,E as ne,ax as re,ay as se,K as ie,L as pe,ab as me,aC as de,M as ce,a7 as ue,ac as _e,ak as be,ad as ge,W as fe,Y as he}from"./index-0e396751.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                    *//* empty css                  */import{a1 as ye,a2 as ve,a3 as xe,a4 as ke,a5 as Ce}from"./goods-995cb067.js";import{_ as Le}from"./label-edit.vue_vue_type_style_index_0_lang-3c5e9634.js";/* empty css                  *//* empty css                   *//* empty css                  */import"./index-11d71036.js";/* empty css                        */import"./index.vue_vue_type_style_index_0_lang-d82568af.js";import"./attachment-c52133c7.js";import"./index.vue_vue_type_script_setup_true_lang-34f8a01a.js";/* empty css                 *//* empty css               *//* empty css               *//* empty css                  *//* empty css                    *//* empty css                    */import"./el-dropdown-item-4ed993c7.js";import"./index.vue_vue_type_script_setup_true_lang-077a27b1.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-5014406f.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./sortable.esm-be94e56d.js";/* empty css                        *//* empty css                       *//* empty css                 */const Ee={class:"main-container"},Pe={class:"flex justify-between items-center"},Te={class:"text-page-title"},Ve={class:"mt-[10px]"},De=["src"],Ne={key:0},$e={key:1},Be={class:"mt-[16px] flex justify-end"},La=Y({__name:"label_list",setup(Fe){const N=A(),$=H(),B=N.meta.title,F=n=>{$.push({path:n})},l=D({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{label_name:"",group_id:"",order:"",sort:""}}),y=D([]),C=k(),w=n=>{let a="";n.order=="ascending"?a="asc":n.order=="descending"&&(a="desc"),a&&(l.searchParam.order=n.prop,l.searchParam.sort=a),m()},m=(n=1)=>{l.loading=!0,l.page=n,ye({page:l.page,limit:l.limit,...l.searchParam}).then(a=>{l.loading=!1,l.data=a.data.data,l.total=a.data.total}).catch(()=>{l.loading=!1})};(()=>{ve({}).then(n=>{const a=n.data;a&&y.push(...a)}),m()})();const f=k(null),j=()=>{f.value.setFormData(),f.value.showDialog=!0},S=n=>{f.value.setFormData(n),f.value.showDialog=!0},z=n=>{te.confirm(o("labelDeleteTips"),o("warning"),{confirmButtonText:o("confirm"),cancelButtonText:o("cancel"),type:"warning"}).then(()=>{xe(n).then(()=>{m()}).catch(()=>{})})},U=oe((n,a)=>{if(isNaN(n)||!/^\d{0,8}$/.test(n)){le({type:"warning",message:`${o("sortTips")}`});return}n>99999999&&(a.sort=99999999),ke({label_id:a.label_id,sort:n}).then(d=>{})}),v=k(!1),L=(n,a)=>{v.value||(v.value=!0,Ce({label_id:n,status:a}).then(d=>{m(),v.value=!1}))},R=n=>{n&&(n.resetFields(),m())};return(n,a)=>{const d=ne,E=re,M=se,P=ie,x=pe,G=me,I=de,O=ce,T=ue,c=_e,V=be,q=ge,K=fe,W=he;return p(),g("div",Ee,[t(T,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[u("div",Pe,[u("span",Te,i(r(B)),1),t(d,{type:"primary",onClick:j},{default:s(()=>[_(i(r(o)("addLabel")),1)]),_:1})]),t(M,{"model-value":"/shop/goods/label",onTabChange:F},{default:s(()=>[t(E,{label:r(o)("tabGoodsLabel"),name:"/shop/goods/label"},null,8,["label"]),t(E,{label:r(o)("tabGoodsLabelGroup"),name:"/shop/goods/label/group"},null,8,["label"])]),_:1}),t(T,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:s(()=>[t(O,{inline:!0,model:l.searchParam,ref_key:"searchFormRef",ref:C},{default:s(()=>[t(x,{label:r(o)("labelName"),prop:"label_name"},{default:s(()=>[t(P,{modelValue:l.searchParam.label_name,"onUpdate:modelValue":a[0]||(a[0]=e=>l.searchParam.label_name=e),modelModifiers:{trim:!0},placeholder:r(o)("labelNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(x,{label:r(o)("groupName"),prop:"group_id"},{default:s(()=>[t(I,{modelValue:l.searchParam.group_id,"onUpdate:modelValue":a[1]||(a[1]=e=>l.searchParam.group_id=e),placeholder:r(o)("groupNamePlaceholder"),clearable:""},{default:s(()=>[(p(!0),g(J,null,Q(y,e=>(p(),h(G,{key:e.group_id,label:e.group_name,value:e.group_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(x,null,{default:s(()=>[t(d,{type:"primary",onClick:a[2]||(a[2]=e=>m())},{default:s(()=>[_(i(r(o)("search")),1)]),_:1}),t(d,{onClick:a[3]||(a[3]=e=>R(C.value))},{default:s(()=>[_(i(r(o)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),u("div",Ve,[X((p(),h(q,{data:l.data,size:"large",onSortChange:w},{empty:s(()=>[u("span",null,i(l.loading?"":r(o)("emptyData")),1)]),default:s(()=>[t(c,{prop:"label_name",label:r(o)("label"),"min-width":"120"},{default:s(({row:e})=>[e.style_type=="diy"?(p(),g("div",{key:0,class:"inline-block px-[10px] text-[12px] rounded-[4px] box-border whitespace-nowrap h-[28px] leading-[28px]",style:Z({color:e.color_json.text_color,backgroundColor:e.color_json.bg_color,border:e.color_json.border_color?"1px solid "+e.color_json.border_color:"none"})},[u("span",null,i(e.label_name),1)],4)):e.style_type=="icon"?(p(),g("img",{key:1,class:"block h-[28px] rounded-[4px] object-cover",src:r(ee)(e.icon)},null,8,De)):ae("",!0)]),_:1},8,["label"]),t(c,{prop:"group_name",label:r(o)("groupName"),"min-width":"120"},{default:s(({row:e})=>[e.group?(p(),g("span",Ne,i(e.group.group_name),1)):(p(),g("span",$e,"--"))]),_:1},8,["label"]),t(c,{prop:"status",label:r(o)("status"),"min-width":"80","show-overflow-tooltip":!0},{default:s(({row:e})=>[e.status==1?(p(),h(V,{key:0,type:"success",onClick:b=>L(e.label_id,0),class:"cursor-pointer"},{default:s(()=>[_(i(r(o)("statusOn")),1)]),_:2},1032,["onClick"])):(p(),h(V,{key:1,type:"info",onClick:b=>L(e.label_id,1),class:"cursor-pointer"},{default:s(()=>[_(i(r(o)("statusOff")),1)]),_:2},1032,["onClick"]))]),_:1},8,["label"]),t(c,{prop:"memo",label:r(o)("memo"),"min-width":"200"},null,8,["label"]),t(c,{prop:"sort",label:r(o)("sort"),"min-width":"120",sortable:"custom"},{default:s(({row:e})=>[t(P,{modelValue:e.sort,"onUpdate:modelValue":b=>e.sort=b,modelModifiers:{trim:!0},class:"!w-[100px]",maxlength:"8",onBlur:b=>r(U)(e.sort,e)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1},8,["label"]),t(c,{prop:"create_time",label:r(o)("createTime"),"min-width":"100",sortable:"custom"},{default:s(({row:e})=>[u("div",null,i(e.create_time),1)]),_:1},8,["label"]),t(c,{label:r(o)("operation"),fixed:"right",align:"right","min-width":"120"},{default:s(({row:e})=>[t(d,{type:"primary",link:"",onClick:b=>S(e)},{default:s(()=>[_(i(r(o)("edit")),1)]),_:2},1032,["onClick"]),t(d,{type:"primary",link:"",onClick:b=>z(e.label_id)},{default:s(()=>[_(i(r(o)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[W,l.loading]]),u("div",Be,[t(K,{"current-page":l.page,"onUpdate:current-page":a[4]||(a[4]=e=>l.page=e),"page-size":l.limit,"onUpdate:page-size":a[5]||(a[5]=e=>l.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:l.total,onSizeChange:a[6]||(a[6]=e=>m()),onCurrentChange:m},null,8,["current-page","page-size","total"])])]),t(Le,{ref_key:"editLabelDialog",ref:f,onComplete:m,groupList:y},null,8,["groupList"])]),_:1})])}}});export{La as default};

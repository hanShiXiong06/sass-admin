import{d as U,r as p,q as $,m as q,s as a,h as b,v as w,w as i,a as B,e as s,i as V,t as h,u as r,R as C,K as I,L as P,aS as S,M as k,E as M,X as j,Y as L}from"./index-0e396751.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                  */import"./el-form-item-4ed993c7.js";/* empty css                 */import{e as O,a as K,b as X}from"./topic-ac64237f.js";const Y={class:"dialog-footer"},le=U({__name:"topic-edit",emits:["complete"],setup(z,{expose:y,emit:E}){const u=p(!1),n=p(!1),c=p(""),f={topic_id:"",topic_name:"",is_recommend:1,status:1,sort:""},t=$({...f}),v=p(),x={required:/[\S]+/,number:/^\d{0,10}$/,digit:/^\d{0,10}(.?\d{0,2})$/,special:/^\d{0,10}(.?\d{0,3})$/},D=q(()=>({topic_id:[{required:!0,message:a("topicIdPlaceholder"),trigger:"blur"}],topic_name:[{required:!0,message:a("topicNamePlaceholder"),trigger:"blur"}],sort:[{trigger:"blur",validator:(d,e,o)=>{isNaN(e)||!x.number.test(e)?o(new Error(a("sortTips"))):o()}}]})),N=async d=>{if(n.value||!d)return;const e=t.topic_id?O:K;await d.validate(async o=>{o&&(n.value=!0,e(t).then(_=>{n.value=!1,u.value=!1,E("complete")}).catch(()=>{n.value=!1}))})};return y({showDialog:u,setFormData:async(d=null)=>{if(Object.assign(t,f),n.value=!0,d){c.value=a("updateTopic");const e=await(await X(d.topic_id)).data;e&&Object.keys(t).forEach(o=>{e[o]!=null&&(t[o]=e[o])})}else c.value=a("addTopic");n.value=!1}}),(d,e)=>{const o=I,m=P,_=S,T=k,g=M,F=j,R=L;return b(),w(F,{modelValue:u.value,"onUpdate:modelValue":e[6]||(e[6]=l=>u.value=l),title:c.value,width:"480",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:i(()=>[B("span",Y,[s(g,{onClick:e[4]||(e[4]=l=>u.value=!1)},{default:i(()=>[V(h(r(a)("cancel")),1)]),_:1}),s(g,{type:"primary",loading:n.value,onClick:e[5]||(e[5]=l=>N(v.value))},{default:i(()=>[V(h(r(a)("confirm")),1)]),_:1},8,["loading"])])]),default:i(()=>[C((b(),w(T,{model:t,"label-width":"120px",ref_key:"formRef",ref:v,rules:r(D),class:"page-form"},{default:i(()=>[s(m,{label:r(a)("topicName"),prop:"topic_name"},{default:i(()=>[s(o,{modelValue:t.topic_name,"onUpdate:modelValue":e[0]||(e[0]=l=>t.topic_name=l),modelModifiers:{trim:!0},clearable:"",placeholder:r(a)("topicNamePlaceholder"),class:"input-width",maxlength:"10","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(m,{label:r(a)("sort"),prop:"sort"},{default:i(()=>[s(o,{modelValue:t.sort,"onUpdate:modelValue":e[1]||(e[1]=l=>t.sort=l),modelModifiers:{trim:!0},clearable:"",placeholder:r(a)("sortPlaceholder"),class:"input-width",maxlength:"8"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(m,{label:r(a)("isRecommend"),prop:"is_recommend"},{default:i(()=>[s(_,{modelValue:t.is_recommend,"onUpdate:modelValue":e[2]||(e[2]=l=>t.is_recommend=l),class:"input-width","active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1},8,["label"]),s(m,{label:r(a)("status"),prop:"status"},{default:i(()=>[s(_,{modelValue:t.status,"onUpdate:modelValue":e[3]||(e[3]=l=>t.status=l),class:"input-width","active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[R,n.value]])]),_:1},8,["modelValue","title"])}}});export{le as _};

import{O as V,d as $,j as ee,q as te,P as se,m as oe,r as w,H as P,Q as ae,c as o,a as t,u as l,t as c,C,e as p,w as d,D as le,R as F,F as v,T as y,U as E,E as ne,V as ie,K as re,W as pe,X as ce,Y as de,p as xe,g as me,h as a,B as G,i as X,x as I,Z as ue,_ as _e,$ as he,a0 as Z,k as fe,G as U,a1 as ge,L as ve,M as we}from"./index-0e396751.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                  */import{_ as ye}from"./icon-addon-339e16d0.js";import{g as Ae}from"./addon-0f88c35d.js";import{_ as ke}from"./_plugin-vue_export-helper-c27b6911.js";const be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASXSURBVHgB7Zxrb1pHEIansevYxoUGB1/SEjlKokZq/v8/6MdK/dCoVdsoUW71pYZCjS+N3WZf7FWOiSFwzs7uu2geybLAGBaes7M7s7t88cNPv/0vBg23xKDChJBhQsgwIWSYEDJMCBkmhAwTQoYJIcOEkGFCyDAhZJgQMkwIGSaEDBNChgkhw4SQYULIMCFkmBAyFiVjtltfS6O2IrWV5eHts3/fy163JwedfyRXshRye+lLefrwW/d7ceT+RamvrUh7c12ePX/jBJ1LbmQXssbJKLLsHvP9Zx7DSlZCppHhyVVKNkJmkeHJUUoWQsrI8OQmhV7I4sItebKzXekDzUkKtRDIwAdZW7ktVfFS8JzM0LYupAxPDlJoWxZahgfPySyFslWP7m+pyPAwS6FrEWRs3PlKtIGUh+1NYYNKSCwZnvXGmjwik0IjJLYMz0azTiWFQkh7az2YjPOL/2RWmKQkFwIZ7c2mhKJ3dCJlgBS0JTVJhYSXcSx991MWtCW1lGRCQstAqPrj9Z403HpIFVJLSSIktAzwavdwuCCFbLwqKaVEF6IhA6Fq96+/h4neaqCEMpWUqEI0ZPhQBUJn9ymkRBOiIQP4UAVWl8OXW9DmVjNefhRFSAtTSgUZPlR5qg7o43jc3oomRV0IZDxWSLqKocrjtwNpEEuKqhAtGaAYqgAGdO0VQUipK/VCj5oQrINryRgNVUCzXF/kyc49VfFqQjTGDHBTqAL1mu6V60FP1HpvQE3ImtIVOxqqPI21VYmF5mupCVlYWJDQ3BSqPKuRQhYoU1GeFrVg2OkdDTdDh2JcqAIII4OT02v3jSuh4EKpunQ7ODkTLdSEvHNXMmZZodatx4UqAFnPnr+VafjODcrrjZpU4fXeoWihFrJwNODnQDvQJ4WqWUC1oIoMiP/91a7qrnrVifux69o//vJCmvWa6ykfx5Sdb1pT95xJoWoWmk7ELLMjvO7LtwfX7uv0j1THDxBlb2WnP7h2G1fqtEImhappQU704N7GTP9zcXEh+92+xIZ6X2WoUPU0o83W1K1EmMOHCU7dmARw5RbDxtn78+Hf+mPW0h+48JjTcQTqlhbLIXUZn4m/cLH+JiHbrTuyfTfc1DsGc3EKtzf4VMbluHFXciN7IQhXxyOJmj/gkyPZC+m6isAoqDLneOATZC/ksPfplFp7zUKTrIUMZ1eF8WPW5I+RrIUUZ1Zlkj9GshbSuRo/kPXnlPxNIu8echWuMG7MgwyQrZDD3mWhL8fkbxLZCkG4yjX5m0S2QlDDyjX5m0SWQlAFvr85P+NGkSTvCBXbKi+9vLQ0lzJAkh7iS+lliSGjahvLkkRI2XOAMdnvxF8tBEmEHLilUe216Sqgdxx003xvYxIhkPHry3fCyGXb/pRUJJtloQ4FKUxfVHl6tXXpWHEj3OdIOlXpuNL54OTN8KtecfYixIHNMhw5AbhAGEJp8rkjNtTt46ebZhBlYy7W1OcJE0KGCSHDhJBhQsgwIWSYEDJMCBkmhAwTQoYJIcOEkGFCyDAhZJgQMkwIGSaEDBNChgkhw4SQYULI+ABB+n6usfwTFgAAAABJRU5ErkJggg==",Se=""+new URL("site_empty-d23c6e2a.png",import.meta.url).href;function Ce(m){return V.get("home/site",{params:m})}function Ie(){return V.get("home/site/group")}function De(m){return V.post("home/site/create",m)}const u=m=>(xe("data-v-ff20b36e"),m=m(),me(),m),Fe={class:"bg-[#F7F9FA] min-h-screen"},Ee={class:"flex justify-between items-center py-[24px] pl-[62px] pr-[64px] home-head"},Ue={key:0,class:"flex items-center"},Ve=["src"],We={key:1,class:"w-[32x] h-[32px] rounded-full",src:ye,alt:""},Je={class:"ml-[10px] text-[16px] font-bold"},Qe={class:"flex items-center"},je={class:"mr-[12px] text-[14px]"},Be={class:"w-[1400px] m-auto mt-[62px]"},Le={class:"flex justify-between items-center"},Pe=u(()=>t("span",{class:"text-[24px] font-bold"},"站点列表",-1)),Ge={class:"flex justify-between items-center mt-[18px]"},Xe={class:"w-[800px] text-[14px] whitespace-nowrap"},Ze=["onClick"],Re={class:"min-h-[580px]"},Ke={class:"flex flex-wrap mt-[30px]"},Me=["onClick"],Ne={class:"flex items-center px-[24px] pt-[22px] pb-[10px] home-item-head relative"},Oe=["src"],Te={key:2,class:"w-[46px] h-[46px] mr-[15px] rounded-[6px] img-shadow overflow-hidden",src:be},qe={class:"flex flex-col flex-1 justify-center"},He={class:"flex items-center flex-wrap"},Ye={class:"text-[16px] text-[#000] max-w-[160px] font-bold truncate mr-[10px]"},ze={key:0,class:"flex items-center justify-center min-w-[42px] h-[18px] bg-[#FF5500] rounded-tl-md rounded-br-md items-tab"},$e={class:"text-[12px] text-[#000]"},et={class:"text-[12px] mt-[3px] text-[#666]"},tt={class:"px-[24px] py-[20px] text-[#666]"},st={class:"text-[14px]"},ot={class:"text-[14px] mt-[2px]"},at={key:0,class:"m-auto mt-[100px]"},lt=u(()=>t("img",{src:Se,class:"w-[220px] h-[165px]"},null,-1)),nt=u(()=>t("p",{class:"text-center text-gray-400 text-[14px] mt-[20px]"},"暂无站点",-1)),it=[lt,nt],rt={class:"mt-[16px] flex justify-end"},pt=u(()=>t("div",{class:"text-[#333333] text-[22px] ml-[15px] leading-[1] mt-[10px]"},"创建站点",-1)),ct={class:"flex flex-col mx-[25px] h-[430px] mt-[15px]"},dt={class:"flex items-center"},xt=u(()=>t("div",{class:"text-[18px] text-[#333333]"},"站点名称",-1)),mt={class:"w-[350px] h-[34px] ml-[10px]"},ut={class:"flex-1 mt-[20px] h-[160px]"},_t=u(()=>t("div",{class:"text-[18px] text-[#333333]"},"店铺套餐",-1)),ht={class:"w-full whitespace-nowrap"},ft=["onClick"],gt={class:"w-[140px] h-[40px] px-[15px] truncate text-white text-[16px] text-center leading-[40px] creatBg relative -left-[1px] -top-[2px]"},vt={class:"flex mx-[30px] mt-[14px] leading-[1] items-center"},wt=u(()=>t("div",{class:"nc-iconfont nc-icon-duiV6mm text-[#466CEA]"},null,-1)),yt={class:"text-[14px] text-[#666666] ml-[3px] truncate"},At={class:"flex mx-[30px] mt-[14px] leading-[1] text-center"},kt=u(()=>t("div",{class:"nc-iconfont nc-icon-duiV6mm text-[#466CEA]"},null,-1)),bt={class:"text-[14px] text-[#666666] ml-[3px] truncate"},St={class:"dialog-footer"},Ct=$({__name:"index",setup(m){const W=ee(),r=te({params:{keywords:"",page:1,limit:12,app:"",sort:!1},loading:!1,tableData:[],total:0}),{params:A,loading:J,tableData:Q}=se(r),_=(i=1)=>{r.params.page=i,r.loading=!0,Ce(r.params).then(s=>{r.tableData=s.data.data,r.total=s.data.total,r.loading=!1}).catch(()=>{r.loading=!1})};_();const j=i=>{r.params.app=i,_()},k=oe(()=>fe().website),R=i=>{U.set({key:"siteId",data:i.site_id}),U.set({key:"siteInfo",data:i}),U.set({key:"comparisonSiteIdStorage",data:i.site_id}),location.href=`${location.origin}/site/`},K=()=>{W.logout()},B=w([]);Ae().then(({data:i})=>{const s=[];Object.keys(i).forEach(S=>{const f=i[S];f.type=="app"&&s.push(f)}),B.value=s}).catch();const D=w(!0),b=w([]);Ie().then(({data:i})=>{!P.empty(i)&&(b.value=i),D.value=!1}).catch(()=>{D.value=!1});const h=w(!1),M=()=>{if(!b.value.length){E("暂无店铺套餐");return}h.value=!0},n=w({step:1,loading:!1,formData:{group_id:0,site_name:""}}),N=()=>{if(!n.value.formData.group_id){E({message:"请先选择店铺套餐",type:"error"});return}if(P.empty(n.value.formData.site_name)){E({message:"请输入站点名称",type:"error"});return}n.value.loading||(n.value.loading=!0,De(n.value.formData).then(()=>{n.value.loading=!1,h.value=!1,_()}).catch(()=>{n.value.loading=!1}))};return ae(()=>h.value,()=>{h.value||(n.value={step:1,loading:!1,formData:{group_id:0,site_name:""}})}),(i,s)=>{const S=ne,f=ie,O=ge,L=re,T=pe,q=ve,H=we,Y=ce,z=de;return a(),o(v,null,[t("div",Fe,[t("div",Ee,[l(k)?(a(),o("div",Ue,[l(k).icon?(a(),o("img",{key:0,class:"w-[32x] h-[32px] rounded-full",src:l(G)(l(k).icon),alt:""},null,8,Ve)):(a(),o("img",We)),t("span",Je,c(l(k).site_name),1)])):C("",!0),t("div",Qe,[t("span",je,c(l(W).userInfo.username),1),t("span",{onClick:s[0]||(s[0]=e=>K()),class:"text-[14px] cursor-pointer text-[var(--el-color-primary)]"},"退出")])]),t("div",Be,[t("div",Le,[Pe,p(S,{type:"primary",class:"w-[90px] !h-[34px]",disabled:D.value,onClick:M},{default:d(()=>[X("创建站点")]),_:1},8,["disabled"])]),t("div",Ge,[t("div",Xe,[p(f,{always:!0},{default:d(()=>[t("span",{class:I(["px-[10px] cursor-pointer h-[35px] leading-[35px] inline-block",{"class-select text-[var(--el-color-primary)]":l(A).app==""}]),onClick:s[1]||(s[1]=e=>j(""))},"所有应用",2),(a(!0),o(v,null,y(B.value,(e,x)=>(a(),o("span",{class:I(["px-[10px] cursor-pointer h-[35px] leading-[35px] inline-block",{"class-select text-[var(--el-color-primary)]":l(A).app==e.key}]),onClick:g=>j(e.key),key:x},c(e.title),11,Ze))),128))]),_:1})]),p(L,{modelValue:l(A).keywords,"onUpdate:modelValue":s[3]||(s[3]=e=>l(A).keywords=e),modelModifiers:{trim:!0},class:"!w-[300px] !h-[34px]",placeholder:"请输入要搜索的站点名称/编号",onKeyup:s[4]||(s[4]=le(e=>_(),["enter","native"]))},{suffix:d(()=>[p(O,{onClick:s[2]||(s[2]=ue(e=>_(),["stop"])),class:"cursor-pointer"},{default:d(()=>[p(l(_e))]),_:1})]),_:1},8,["modelValue"])]),t("div",Re,[F((a(),o("div",Ke,[(a(!0),o(v,null,y(l(Q),(e,x)=>(a(),o("div",{key:x,onClick:g=>R(e),class:I(["home-item w-[327px] box-border mb-[30px] cursor-pointer",{"mr-[30px]":x==0||(x+1)%4!=0}])},[t("div",Ne,[e.theme_color?(a(),o("div",{key:0,class:"absolute h-[4px] w-full z-1 left-0 top-0",style:he({"background-color":e.theme_color})},null,4)):C("",!0),e.icon?(a(),o("img",{key:1,class:"w-[46px] h-[46px] mr-[15px] img-shadow rounded-[6px] overflow-hidden",src:l(G)(e.icon)},null,8,Oe)):(a(),o("img",Te)),t("div",qe,[t("div",He,[t("span",Ye,c(e.site_name),1),e.app_name?(a(),o("div",ze,[t("span",$e,c(e.app_name),1)])):C("",!0)]),t("span",et,c(e.create_time?e.create_time.split(" ")[0]:"--")+" 到 "+c(e.expire_time?e.expire_time.split(" ")[0]:"--"),1)])]),t("div",tt,[t("p",st,"站点编号："+c(e.site_id),1),t("p",ot,"站点套餐："+c(e.group_name||"--"),1)])],10,Me))),128)),!l(Q).length&&!l(J)?(a(),o("div",at,it)):C("",!0)])),[[z,l(J)]])]),t("div",rt,[p(T,{"current-page":r.params.page,"onUpdate:current-page":s[5]||(s[5]=e=>r.params.page=e),"page-size":r.params.limit,"onUpdate:page-size":s[6]||(s[6]=e=>r.params.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:r.total,onSizeChange:s[7]||(s[7]=e=>_()),onCurrentChange:_,"hide-on-single-page":!0},null,8,["current-page","page-size","total"])])])]),p(Y,{modelValue:h.value,"onUpdate:modelValue":s[9]||(s[9]=e=>h.value=e),width:"54vw","destroy-on-close":!0,style:{"border-radius":"25px"}},{title:d(()=>[pt]),footer:d(()=>[t("span",St,[p(S,{type:"primary",onClick:N,class:"w-[118px] h-[44px] mt-[10px] text-[16px]"},{default:d(()=>[X("创建站点")]),_:1})])]),default:d(()=>[t("div",ct,[t("div",dt,[xt,t("div",mt,[p(H,{model:n.value.formData,ref:"formRef",rules:i.formRules},{default:d(()=>[p(q,{prop:"username"},{default:d(()=>[p(L,{class:"create-site-name",modelValue:n.value.formData.site_name,"onUpdate:modelValue":s[8]||(s[8]=e=>n.value.formData.site_name=e),modelModifiers:{trim:!0},maxlength:"20",placeholder:"请输入站点名称",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])]),F(t("div",ut,[_t,p(f,{class:"w-full mt-[10px] meal-site -ml-[10px]",height:"350px"},{default:d(()=>[F(t("div",ht,[(a(!0),o(v,null,y(b.value,(e,x)=>(a(),o("div",{key:x,class:I(["inline-flex flex-col w-[300px] h-[330px] box-border rounded-[17px] border-transparent border-[2px] border-solid create-site-item my-[10px]",{"bg-[#F6F7FF] border-[#466CEA]":n.value.formData.group_id==e.group_id,"ml-[20px]":x>0," ml-[10px]":x==0,"mr-[10px]":b.value.length-1==x}]),onClick:g=>n.value.formData.group_id=e.group_id},[t("div",gt,c(e.site_group.group_name),1),p(f,{class:"flex pb-[20px] pt-[4px] box-border !h-[260px]"},{default:d(()=>[(a(!0),o(v,null,y(e.site_group.app_name,g=>(a(),o("div",vt,[wt,t("div",yt,c(g),1)]))),256)),(a(!0),o(v,null,y(e.site_group.addon_name,g=>(a(),o("div",At,[kt,t("div",bt,c(g),1)]))),256))]),_:2},1024)],10,ft))),128))],512),[[Z,n.value.step==1]])]),_:1})],512),[[Z,n.value.step==1]])])]),_:1},8,["modelValue"])],64)}}});const Kt=ke(Ct,[["__scopeId","data-v-ff20b36e"]]);export{Kt as default};

import{d as C,r as d,q as N,m as R,s,h as b,v as V,w as n,a as j,e as i,i as y,t as w,u as m,R as I,L as U,aE as q,M as L,E as O,X as $,Y as M}from"./index-0e396751.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                 *//* empty css                        */import"./el-form-item-4ed993c7.js";import S from"./index-11d71036.js";import{j as T,k as X,l as Y}from"./recycle_category-c8e0ff19.js";const z={class:"dialog-footer"},le=C({__name:"banner-edit",emits:["complete"],setup(A,{expose:D,emit:p}){const o=d(!1),t=d(!1),c=d(""),f={id:"",image:"",sort:0},a=N({...f}),_=d(),E=R(()=>({image:[{required:!0,message:s("请输入图片地址"),trigger:"blur"}]})),B=async r=>{t.value||!r||await r.validate(async e=>{e&&(t.value=!0,a.id?T(a.id,a).then(()=>{t.value=!1,o.value=!1,p("complete")}).catch(()=>{t.value=!1}):X(a).then(()=>{t.value=!1,o.value=!1,p("complete")}).catch(()=>{t.value=!1}))})};return D({showDialog:o,setFormData:async(r=null)=>{if(Object.assign(a,f),o.value=!0,t.value=!0,r){c.value=s("编辑轮播图");try{const{data:e}=await Y(r.id);e&&Object.keys(a).forEach(u=>{e[u]!==void 0&&(a[u]=e[u])})}catch(e){console.error(e),t.value=!1;return}}else c.value=s("添加轮播图");t.value=!1}}),(r,e)=>{const u=S,v=U,x=q,h=L,g=O,k=$,F=M;return b(),V(k,{modelValue:o.value,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value=l),title:c.value,width:"480",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:n(()=>[j("span",z,[i(g,{onClick:e[2]||(e[2]=l=>o.value=!1)},{default:n(()=>[y(w(m(s)("cancel")),1)]),_:1}),i(g,{type:"primary",loading:t.value,onClick:e[3]||(e[3]=l=>B(_.value))},{default:n(()=>[y(w(m(s)("confirm")),1)]),_:1},8,["loading"])])]),default:n(()=>[I((b(),V(h,{model:a,"label-width":"120px",ref_key:"formRef",ref:_,rules:m(E),class:"page-form"},{default:n(()=>[i(v,{label:m(s)("轮播图"),prop:"image"},{default:n(()=>[i(u,{modelValue:a.image,"onUpdate:modelValue":e[0]||(e[0]=l=>a.image=l)},null,8,["modelValue"])]),_:1},8,["label"]),i(v,{label:m(s)("排序"),prop:"sort"},{default:n(()=>[i(x,{modelValue:a.sort,"onUpdate:modelValue":e[1]||(e[1]=l=>a.sort=l),min:0,class:"input-width"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[F,t.value]])]),_:1},8,["modelValue","title"])}}});export{le as _};

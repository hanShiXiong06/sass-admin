import{d as de,r as _,y as pe,f as ce,h as n,v as b,w as p,R as _e,c as i,e as r,C as d,u as a,s as l,a as s,t,F as R,T as S,B as ue,i as w,a5 as I,a3 as L,ax as xe,ay as ve,L as me,aM as fe,aN as ye,ac as he,ad as be,M as ge,aa as ke,a7 as De,bZ as we,Y as Fe}from"./index-0e396751.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                 *//* empty css                *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                        *//* empty css               *//* empty css               *//* empty css               */import"./el-form-item-4ed993c7.js";/* empty css                    */import{n as Ce,p as Te,q as Ee}from"./order-3f7fd991.js";import{p as Ne}from"./printer-d56d0ae8.js";import{_ as Ae}from"./delivery-action.vue_vue_type_style_index_0_lang-f81dccd1.js";import{_ as $e}from"./order-notes.vue_vue_type_style_index_0_lang-462f6341.js";import{_ as Me}from"./order-edit-address.vue_vue_type_style_index_0_lang-ff2c662a.js";import{_ as Be}from"./delivery-package.vue_vue_type_style_index_0_lang-490068dc.js";import{_ as je}from"./adjust-money.vue_vue_type_style_index_0_lang-b7d688af.js";import{_ as Re}from"./electronic-sheet-print.vue_vue_type_style_index_0_lang-4b4b163e.js";import{_ as Ve}from"./shop-active-refund.vue_vue_type_style_index_0_lang-84d4f3bc.js";/* empty css                  *//* empty css                  *//* empty css                 *//* empty css                  *//* empty css                  *//* empty css                       *//* empty css                 *//* empty css                 */import"./delivery-fe1f6e47.js";import"./weapp-aa1cc52a.js";import"./electronic_sheet-29211c03.js";import"./lodop-18d3c062.js";import"./qqmap-011f3cfb.js";const Pe={class:"main-container"},Oe={key:0},Se={class:"input-width"},Ie={class:"input-width"},Le={class:"input-width"},Ge={class:"input-width"},qe={class:"input-width"},Ue={key:0},ze={class:"input-width"},We={class:"input-width"},Ye={class:"input-width"},Ze={key:1},He={class:"input-width"},Je={class:"input-width"},Ke={class:"input-width"},Qe={class:"input-width"},Xe={class:"input-width line-feed"},et={class:"input-width line-feed"},tt={key:1},st={class:"mb-[20px]"},lt={class:"ml-[30px] text-[14px] mr-[20px]"},at={class:"text-[14px]"},ot={class:"flex mt-[10px]"},nt={key:8,class:"flex"},it=["onClick"],rt=["onClick"],dt={class:"flex ml-[30px] mt-[15px]"},pt={class:"text-[14px] text-[#ff7f5b]"},ct={class:"ml-[10px]"},_t={class:"text-[14px] text-[#a4a4a4]"},ut={class:"text-[14px] text-[#a4a4a4]"},xt={class:"text-[14px] text-[#a4a4a4]"},vt={key:2},mt={class:"flex"},ft={class:"flex items-center shrink-0"},yt=["src"],ht={class:"flex flex-col items-start"},bt={class:"multi-hidden text-[14px]"},gt={class:"text-[12px] text-[#999]"},kt={key:0,class:"px-[4px] text-[12px] text-[#fff] rounded-[4px] bg-primary leading-[18px]"},Dt={class:"flex flex-col"},wt={key:0},Ft={key:0},Ct={key:1,class:"text-[13px]"},Tt={key:2,class:"text-[13px] mt-[5px]"},Et={key:0},Nt={class:"text-[#999]"},At={key:1},$t={key:3,class:"text-[13px] mt-[5px]"},Mt={class:"py-[12px] px-[16px] border-b border-color flex justify-end"},Bt={class:"w-[310px] flex flex-col text-right"},jt={class:"flex mb-[10px]"},Rt={class:"text-base flex-1"},Vt={class:"text-base flex-1 pl-[30px]"},Pt={key:0,class:"text-[14px]"},Ot={key:0},St={key:1,class:"text-[14px]"},It={key:0,class:"flex mb-[10px]"},Lt={class:"text-base flex-1"},Gt={class:"text-base flex-1 pl-[30px]"},qt={key:1,class:"flex mb-[10px]"},Ut={class:"text-base flex-1"},zt={class:"text-base flex-1 pl-[30px]"},Wt={class:"flex mb-[10px]"},Yt={class:"text-base flex-1"},Zt={class:"text-base flex-1 pl-[30px]"},Ht={class:"flex mb-[10px]"},Jt={class:"text-base flex-1"},Kt={class:"text-base flex-1 pl-[30px]"},Qt={class:"flex"},Xt={class:"text-base flex-1"},es={class:"text-base flex-1 pl-[30px] text-[red]"},ts={key:0,class:"text-[14px]"},ss={key:0},ls={key:1,class:"text-[14px]"},as={key:3},os={class:"mb-[100px] px-[20px]",style:{"min-height":"100px"}},ns={class:"mr-[20px] min-w-[71px]"},is={class:"leading-[1] w-full text-[14px] w-[100px] flex justify-end"},rs={class:"leading-[1] w-full text-[14px] w-[100px] flex justify-end mt-[15px]"},ds=s("div",{class:"w-[16px] h-[16px] flex items-center bg-[#D1EBFF] border-[1px] border-[#0091FF] rounded-[999px]"},[s("div",{class:"w-[8px] h-[8px] mx-auto bg-[#0091FF] rounded-[999px]"})],-1),ps={key:0,class:"w-[2px] h-[50px] bg-[#D1EBFF] mx-auto"},cs={class:"leading-[1] ml-[20px] text-[14px]"},_s={class:"leading-[1] ml-[20px] text-[14px] mt-[15px]"},us={class:"ml-[10px]"},tl=de({__name:"order-detail",emits:["load","close-event"],setup(xs,{expose:G,emit:V}){const g=_(!1),f=_(!1),D=_(!1);let q="订单详情",v="";pe(),ce(),_(!0),_(!0),_(!0);const U=u=>{g.value=!1,V("close-event")},m=_("order"),e=_(null),z=async()=>{f.value=!0,v?await Ee(v).then(({data:u})=>{e.value=u;let c=0;e.value.order_goods.forEach((h,O)=>{h.is_enable_refund==1&&c++}),e.value.is_refund_show=c>0,f.value=!1}).catch(()=>{}):f.value=!1},W=()=>{I.confirm(l("orderCloseTips"),l("warning"),{confirmButtonText:l("confirm"),cancelButtonText:l("cancel"),type:"warning"}).then(()=>{Ce(v).then(()=>{M(v)})})},F=_(null),Y=()=>{F.value.setFormData(e.value),F.value.showDialog=!0},C=_(null),Z=()=>{C.value.setFormData(e.value),C.value.showDialog=!0},T=_(null),H=()=>{T.value.setFormData(e.value),T.value.showDialog=!0},J=()=>{I.confirm(l("orderFinishTips"),l("warning"),{confirmButtonText:l("confirm"),cancelButtonText:l("cancel"),type:"warning"}).then(()=>{Te(v).then(()=>{M(v)})})},E=_(null),P=(u,c)=>{E.value.setFormData(u,c),E.value.showDialog=!0},N=_(null),K=()=>{let u={print_type:"single"};Object.assign(u,L(e.value)),N.value.setFormData(u),N.value.showDialog=!0},A=_(null),Q=async()=>{let u=L(e.value);A.value.showDialog=!0,A.value.setFormData(u)},X=()=>{e.value.order_id&&(D.value||(D.value=!0,Ne({type:"shopGoodsOrder",trigger:"manual",business:{order_id:e.value.order_id}}).then(u=>{D.value=!1}).catch(()=>{D.value=!1})))},$=_(null),ee=()=>{$.value.setFormData(e.value),$.value.showDialog=!0},M=async(u=null)=>{v=u.id,e.value=null,m.value="order",z()},y=()=>{g.value=!1,V("load")};return G({showDialog:g,setFormData:M}),(u,c)=>{const h=xe,O=ve,x=me,B=fe,te=ye,j=he,se=be,le=ge,ae=ke,oe=De,ne=we,ie=Fe;return n(),b(ne,{modelValue:g.value,"onUpdate:modelValue":c[7]||(c[7]=o=>g.value=o),title:a(q),direction:"rtl","before-close":U,class:"detail-drawer"},{default:p(()=>[_e((n(),i("div",Pe,[r(O,{modelValue:m.value,"onUpdate:modelValue":c[0]||(c[0]=o=>m.value=o),class:"pb-[10px]",onTabChange:u.tabChange},{default:p(()=>[r(h,{label:"订单信息",name:"order"}),r(h,{label:"订单状态",name:"state"}),r(h,{label:"商品信息",name:"goods"}),e.value&&e.value.order_log&&e.value.order_log.length>0?(n(),b(h,{key:0,label:"订单日志",name:"log"})):d("",!0)]),_:1},8,["modelValue","onTabChange"]),f.value?d("",!0):(n(),b(le,{key:0,model:e.value,"label-width":"100px",ref:"formRef",class:"page-form","label-position":"left"},{default:p(()=>[m.value=="order"?(n(),i("div",Oe,[r(te,{class:"row-bg px-[30px] mb-[20px]",gutter:20},{default:p(()=>[r(B,{span:8},{default:p(()=>[r(x,{label:a(l)("orderDetailNo")},{default:p(()=>[s("div",Se,t(e.value.order_no),1)]),_:1},8,["label"]),r(x,{label:a(l)("orderDetailForm")},{default:p(()=>[s("div",Ie,t(e.value.order_from_name),1)]),_:1},8,["label"]),e.value&&e.value.out_trade_no?(n(),b(x,{key:0,label:a(l)("orderDetailoutTradeNo")},{default:p(()=>[s("div",Le,t(e.value.out_trade_no),1)]),_:1},8,["label"])):d("",!0),e.value.pay?(n(),b(x,{key:1,label:a(l)("payWay")},{default:p(()=>[s("div",Ge,t(e.value.pay.type_name),1)]),_:1},8,["label"])):d("",!0)]),_:1}),r(B,{span:8},{default:p(()=>[r(x,{label:a(l)("deliveryType")},{default:p(()=>[s("div",qe,t(e.value.delivery_type_name),1)]),_:1},8,["label"]),e.value.delivery_type=="express"||e.value.delivery_type=="local_delivery"?(n(),i("div",Ue,[r(x,{label:a(l)("orderDetailTakerName")},{default:p(()=>[s("div",ze,t(e.value.taker_name),1)]),_:1},8,["label"]),r(x,{label:a(l)("orderDetailTakerMobile")},{default:p(()=>[s("div",We,t(e.value.taker_mobile),1)]),_:1},8,["label"]),r(x,{label:a(l)("orderDetailTakerFullAddress")},{default:p(()=>[s("div",Ye,t(e.value.taker_full_address),1)]),_:1},8,["label"])])):d("",!0),e.value.delivery_type=="store"?(n(),i("div",Ze,[r(x,{label:a(l)("storeName")},{default:p(()=>[s("div",He,t(e.value.store.store_name),1)]),_:1},8,["label"]),r(x,{label:a(l)("storeAddress")},{default:p(()=>[s("div",Je,t(e.value.store.full_address),1)]),_:1},8,["label"]),r(x,{label:a(l)("storeMobile")},{default:p(()=>[s("div",Ke,t(e.value.store.store_mobile),1)]),_:1},8,["label"]),r(x,{label:a(l)("tradeTime")},{default:p(()=>[s("div",Qe,t(e.value.store.trade_time),1)]),_:1},8,["label"])])):d("",!0)]),_:1}),r(B,{span:8},{default:p(()=>[r(x,{label:a(l)("memberRemark")},{default:p(()=>[s("div",Xe,t(e.value.member_remark??"--"),1)]),_:1},8,["label"]),r(x,{label:a(l)("notes")},{default:p(()=>[s("div",et,t(e.value.shop_remark??"--"),1)]),_:1},8,["label"])]),_:1})]),_:1})])):d("",!0),m.value=="state"?(n(),i("div",tt,[s("div",st,[s("p",null,[s("span",lt,t(a(l)("orderStatus"))+"：",1),s("span",at,t(e.value.status_name.name),1)]),s("div",ot,[s("span",{class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#ff7f5b] bg-[#fff0e5] cursor-pointer",onClick:H},t(a(l)("notes")),1),e.value.status==2?(n(),i("span",{key:0,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:Z},t(a(l)("delivery")),1)):d("",!0),e.value.status==1?(n(),i("span",{key:1,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:W},t(a(l)("close")),1)):d("",!0),e.value.status==1?(n(),i("span",{key:2,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:Y},t(a(l)("editPrice")),1)):d("",!0),e.value.status==3?(n(),i("span",{key:3,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:J},t(a(l)("finish")),1)):d("",!0),e.value.delivery_type=="express"&&e.value.status==3?(n(),i("span",{key:4,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:K},t(a(l)("electronicSheetPrintTitle")),1)):d("",!0),e.value.delivery_type=="virtual"&&(e.value.status==2||e.value.status==3||e.value.status==5)?(n(),i("span",{key:5,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:X},t(a(l)("printTicket")),1)):d("",!0),e.value.status==1&&e.value.delivery_type!="virtual"&&e.value.activity_type!="giftcard"?(n(),i("span",{key:6,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:Q},t(a(l)("editAddress")),1)):d("",!0),e.value.is_refund_show&&e.value.status!=1&&e.value.status!=-1?(n(),i("span",{key:7,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#5c96fc] bg-[#ebf3ff] cursor-pointer",onClick:ee},t(a(l)("voluntaryRefund")),1)):d("",!0),e.value.order_delivery?(n(),i("div",nt,[(n(!0),i(R,null,S(e.value.order_delivery,(o,k)=>(n(),i(R,{key:k},[o.delivery_type=="express"&&o.sub_delivery_type=="express"?(n(),i("span",{key:0,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#ff7f5b] bg-[#fff0e5] cursor-pointer",onClick:re=>P(o.id,e.value.taker_mobile)},t(a(l)("package"))+t(k+1),9,it)):d("",!0),o.delivery_type=="express"&&o.sub_delivery_type=="none_express"?(n(),i("span",{key:1,class:"text-[14px] px-[15px] py-[5px] ml-[30px] text-[#ff7f5b] bg-[#fff0e5] cursor-pointer",onClick:re=>P(o.id,e.value.taker_mobile)},t(a(l)("noLogisticsRequired")),9,rt)):d("",!0)],64))),128))])):d("",!0)]),s("div",dt,[s("span",pt,t(a(l)("remind"))+"：",1),s("div",ct,[s("p",_t,t(a(l)("remindTips1")),1),s("p",ut,t(a(l)("remindTips2")),1),s("p",xt,t(a(l)("remindTips3")),1)])])])])):d("",!0),m.value=="goods"?(n(),i("div",vt,[r(se,{data:e.value.order_goods,size:"large"},{default:p(()=>[r(j,{label:a(l)("orderDetailGoodsName"),align:"left",width:"300"},{default:p(({row:o})=>[s("div",mt,[s("div",ft,[s("img",{class:"w-[50px] h-[50px] mr-[10px]",src:a(ue)(o.goods_image)},null,8,yt)]),s("div",ht,[s("p",bt,t(o.goods_name),1),s("span",gt,t(o.sku_name),1),o.is_gift==1?(n(),i("span",kt,"赠品")):d("",!0)])])]),_:1},8,["label"]),r(j,{label:a(l)("orderDetailPrice"),"min-width":"50",align:"left"},{default:p(({row:o})=>[s("div",Dt,[e.value.activity_type=="exchange"?(n(),i("span",wt,[w(t(o.extend.point)+t(a(l)("point"))+" ",1),parseFloat(o.price)?(n(),i("span",Ft,"+￥"+t(o.price),1)):d("",!0)])):(n(),i("span",Ct,"￥"+t(o.price),1)),o.extend&&o.extend.newcomer_price?(n(),i("span",Tt,[parseFloat(o.extend.newcomer_price)&&o.num>1?(n(),i("span",Et,[w(t(o.num)+t(a(l)("piece")),1),s("span",Nt,"（第1"+t(a(l)("piece"))+"，￥"+t(parseFloat(o.extend.newcomer_price).toFixed(2))+"/"+t(a(l)("piece"))+"；第"+t(o.num>2?"2~"+o.num:"2")+t(a(l)("piece"))+"，￥"+t(parseFloat(o.price).toFixed(2))+"/"+t(a(l)("piece"))+"）",1)])):(n(),i("span",At,t(o.num)+t(a(l)("piece")),1))])):(n(),i("span",$t,t(o.num)+t(a(l)("piece")),1))])]),_:1},8,["label"]),r(j,{prop:"num",label:a(l)("detailNum"),"min-width":"50",align:"right"},null,8,["label"])]),_:1},8,["data"]),s("div",Mt,[s("div",Bt,[s("div",jt,[s("div",Rt,t(a(l)("orderDetailGoodsMoney")),1),s("div",Vt,[e.value.activity_type=="exchange"?(n(),i("span",Pt,[w(t(e.value.point)+t(a(l)("point"))+" ",1),parseFloat(e.value.goods_money)?(n(),i("span",Ot,"+￥"+t(e.value.goods_money),1)):d("",!0)])):(n(),i("span",St,"￥"+t(e.value.goods_money),1))])]),e.value.coupon_money>0?(n(),i("div",It,[s("div",Lt,t(a(l)("couponMoney")),1),s("div",Gt,t(e.value.coupon_money),1)])):d("",!0),e.value.manjian_discount_money>0?(n(),i("div",qt,[s("div",Ut,t(a(l)("manjianDiscountMoney")),1),s("div",zt,t(e.value.manjian_discount_money),1)])):d("",!0),s("div",Wt,[s("div",Yt,t(a(l)("discountMoney")),1),s("div",Zt,t(e.value.discount_money),1)]),s("div",Ht,[s("div",Jt,t(a(l)("orderDetailDeliveryMoney")),1),s("div",Kt,t(e.value.delivery_money),1)]),s("div",Qt,[s("div",Xt,t(a(l)("detailOrderMoney")),1),s("div",es,[e.value.activity_type=="exchange"?(n(),i("span",ts,[w(t(e.value.point)+t(a(l)("point"))+" ",1),parseFloat(e.value.order_money)?(n(),i("span",ss,"+￥"+t(e.value.order_money),1)):d("",!0)])):(n(),i("span",ls,"￥"+t(e.value.order_money),1))])])])])])):d("",!0),m.value=="log"&&e.value.order_log.length>0?(n(),i("div",as,[s("div",os,[(n(!0),i(R,null,S(e.value.order_log,(o,k)=>(n(),i("div",{class:"flex",key:k},[s("div",ns,[s("div",is,t(o.create_time&&o.create_time.split(" ")[0]),1),s("div",rs,t(o.create_time&&o.create_time.split(" ")[1]),1)]),s("div",null,[ds,k+1!=e.value.order_log.length?(n(),i("div",ps)):d("",!0)]),s("div",null,[s("div",cs,t(o.main_type_name)+t(o.main_name),1),s("div",_s,[s("span",null,t(o.type_name),1),s("span",us,t(o.content),1)])])]))),128))])])):d("",!0)]),_:1},8,["model"])),!f.value&&!e.value?(n(),b(oe,{key:1,class:"box-card !border-none relative",shadow:"never"},{default:p(()=>[r(ae,{description:a(l)("orderInfoEmpty")},null,8,["description"])]),_:1})):d("",!0),r(je,{ref_key:"orderAdjustMoneyActionDialog",ref:F,onComplete:c[1]||(c[1]=o=>y())},null,512),r(Ae,{ref_key:"deliveryActionDialog",ref:C,onComplete:c[2]||(c[2]=o=>y())},null,512),r($e,{ref_key:"orderNotesDialog",ref:T,onComplete:c[3]||(c[3]=o=>y())},null,512),r(Be,{ref_key:"packageDialog",ref:E},null,512),r(Re,{ref_key:"electronicSheetPrintDialog",ref:N,onComplete:c[4]||(c[4]=o=>y())},null,512),r(Me,{ref_key:"orderEditAddressDialog",ref:A,onComplete:c[5]||(c[5]=o=>y())},null,512),r(Ve,{ref_key:"shopActiveRefundDialog",ref:$,onComplete:c[6]||(c[6]=o=>y())},null,512)])),[[ie,f.value]])]),_:1},8,["modelValue","title"])}}});export{tl as default};

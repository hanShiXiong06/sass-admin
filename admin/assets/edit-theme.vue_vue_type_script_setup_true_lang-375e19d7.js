import{d as L,r as f,q as O,m as K,a3 as v,h as m,v as x,w as i,a as s,e as n,i as k,u as g,Z as P,c as C,F as w,T as F,t as T,U as X,K as Z,L as z,bv as G,M as H,E as J,X as Q}from"./index-0e396751.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                        *//* empty css                 */import"./el-form-item-4ed993c7.js";import{_ as W}from"./add-theme.vue_vue_type_script_setup_true_lang-55a88ae6.js";import{u as Y}from"./diy-0604e925.js";const ee={class:"form-tip"},le={class:"flex items-center"},ae=["onClick"],te=["onClick"],oe={class:"form-tip"},re=s("span",{class:"mr-[3px]"},"+",-1),ie=s("span",null,"新增颜色",-1),ne=[re,ie],se=s("div",{class:"form-tip"},"新增颜色key值不能与当前的存在的key值重复",-1),pe={class:"dialog-footer"},ke=L({__name:"edit-theme",emits:["confirm"],setup(ue,{expose:D,emit:U}){const V=Y(),u=f(!1),_=f(null),l=O({title:"",mark:"",diy_value:[],default:{},data:{}}),E=f(),$=K(()=>({title:[{required:!0,message:"请输入色调名称",trigger:"blur"}]})),y=[{title:"主色调",label:"--primary-color",value:"#333333",tip:"主色调在uiapp中使用：var(--primary-color)"},{title:"辅色调",label:"--primary-help-color",value:"#333333",tip:"辅色调在uiapp中使用：var(--primary-help-color)"},{title:"页面背景色",label:"--page-bg-color",value:"#ffffff",tip:"页面背景色在uiapp中使用：var(--page-bg-color)"},{title:"主色调浅色（淡）",label:"--primary-color-light",value:"",tip:"主色调浅色（淡）在uiapp中使用：var(--primary-color-light)"},{title:"主色调浅色（深）",label:"--primary-color-light2",value:"",tip:"主色调浅色（深）在uiapp中使用：var(--primary-color-light2)"},{title:"灰色调",label:"--primary-color-dark",value:"#cccccc",tip:"灰色调在uiapp中使用：var(--primary-color-dark)"},{title:"禁用色",label:"--primary-color-disabled",value:"#eeeeee",tip:"禁用色在uiapp中使用：var(--primary-color-disabled)"},{title:"价格颜色",label:"--price-text-color",value:"#333333",tip:"价格颜色在uiapp中使用：var(--price-text-color)"}],p=f([...v(y)]),B=a=>{Object.keys(l).forEach(e=>{l[e]=a[e]!=null?v(a[e]):""}),p.value.forEach((e,t)=>{y.forEach((r,d)=>{e.label==r.label&&(e.value=r.value)})}),p.value.forEach((e,t)=>{e.value=a.data[e.label]?a.data[e.label]:e.value}),u.value=!0},R=()=>{let a=[];p.value.forEach((t,r)=>{a.push(t.label)});let e={key:a};_.value.open(e)},j=a=>{let e=[];p.value.forEach((r,d)=>{e.push(r.label)});let t={key:e,data:a};_.value.open(t)},S=a=>{let e=-1;for(let t=0;t<l.diy_value.length;t++)l.diy_value[t].label==a.label&&(e=t);e>-1&&l.diy_value.splice(e,1)},M=a=>{for(let e=0;e<l.diy_value.length;e++)if(l.diy_value[e].label==a.label){l.diy_value[e]=a;return}l.diy_value.push(a)},N=()=>{l.default&&Object.keys(l.default).length?p.value.forEach((a,e)=>{a.value=v(l.default[a.label])}):p.value=v(y),l.diy_value=[],l.mark=="diy"&&(l.title=""),X({message:"重置成功",type:"success"})},q=async a=>{a&&await a.validate(async e=>{if(e){let t={theme:{},diy_value:[],title:""};t.title=l.title,p.value.forEach((r,d)=>{t.theme[r.label]=r.value}),l.diy_value.forEach((r,d)=>{t.theme[r.label]=r.value}),t.diy_value=l.diy_value||[],U("confirm",t),u.value=!1}})};return D({dialogThemeVisible:u,open:B}),(a,e)=>{const t=Z,r=z,d=G,A=H,h=J,I=Q;return m(),x(I,{modelValue:u.value,"onUpdate:modelValue":e[5]||(e[5]=o=>u.value=o),title:"编辑色调",width:"850px","align-center":""},{footer:i(()=>[s("div",pe,[n(h,{onClick:e[2]||(e[2]=o=>u.value=!1)},{default:i(()=>[k("取消")]),_:1}),n(h,{type:"primary",plain:"",onClick:e[3]||(e[3]=o=>N())},{default:i(()=>[k("重置")]),_:1}),n(h,{type:"primary",onClick:e[4]||(e[4]=o=>q(E.value))},{default:i(()=>[k("保存")]),_:1})])]),default:i(()=>[n(A,{model:l,"label-width":"150px",rules:g($),class:"h-[640px] overflow-auto",ref_key:"formRef",ref:E,onSubmit:e[1]||(e[1]=P(()=>{},["prevent"]))},{default:i(()=>[n(r,{label:"色调名称",prop:"title"},{default:i(()=>[n(t,{modelValue:l.title,"onUpdate:modelValue":e[0]||(e[0]=o=>l.title=o),placeholder:"请输入色调名称",maxlength:"15",class:"!w-[250px]",disabled:l.mark!="diy"},null,8,["modelValue","disabled"])]),_:1}),(m(!0),C(w,null,F(p.value,(o,b)=>(m(),x(r,{label:o.title,key:b},{default:i(()=>[n(d,{modelValue:o.value,"onUpdate:modelValue":c=>o.value=c,"show-alpha":"",predefine:g(V).predefineColors},null,8,["modelValue","onUpdate:modelValue","predefine"]),s("div",ee,T(o.tip),1)]),_:2},1032,["label"]))),128)),(m(!0),C(w,null,F(l.diy_value,(o,b)=>(m(),x(r,{label:o.title,key:b},{default:i(()=>[s("div",le,[n(d,{modelValue:o.value,"onUpdate:modelValue":c=>o.value=c,"show-alpha":"",predefine:g(V).predefineColors},null,8,["modelValue","onUpdate:modelValue","predefine"]),s("span",{class:"text-primary cursor-pointer text-[14px] ml-[20px]",onClick:c=>j(o)},"编辑",8,ae),s("span",{class:"text-primary cursor-pointer text-[14px] ml-[8px]",onClick:c=>S(o)},"删除",8,te)]),s("div",oe,T(o.tip),1)]),_:2},1032,["label"]))),128)),n(r,null,{default:i(()=>[s("div",{class:"flex items-center text-primary cursor-pointer text-[14px]",onClick:R},ne),se]),_:1})]),_:1},8,["model","rules"]),n(W,{ref_key:"addThemeRef",ref:_,onConfirm:M},null,512)]),_:1},8,["modelValue"])}}});export{ke as _};

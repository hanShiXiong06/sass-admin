import{d as q,y as K,f as W,q as A,r as u,bO as G,h as y,c as J,e,w as n,a as _,t as m,u as t,s as l,i as p,R as Q,v as w,C as X,bP as Z,K as ee,L as ae,bR as te,E as le,M as oe,a7 as ie,ax as ne,ay as re,ac as me,ad as se,W as pe,Y as de}from"./index-0e396751.js";/* empty css                   */import{_ as ce}from"./index.vue_vue_type_script_setup_true_lang-0825ba66.js";/* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                    *//* empty css                *//* empty css                *//* empty css                  *//* empty css                       */import"./el-form-item-4ed993c7.js";import{C as ue}from"./order-3f7fd991.js";import{_ as _e}from"./invoice-detail.vue_vue_type_script_setup_true_lang-f8f4121a.js";import{_ as ve}from"./invoice-dialog.vue_vue_type_script_setup_true_lang-d3afb244.js";/* empty css                  *//* empty css                   *//* empty css                        *//* empty css                             */import"./index-11d71036.js";import"./index.vue_vue_type_style_index_0_lang-d82568af.js";import"./attachment-c52133c7.js";import"./index.vue_vue_type_script_setup_true_lang-34f8a01a.js";/* empty css                 *//* empty css               *//* empty css               *//* empty css                  *//* empty css                    *//* empty css                    */import"./el-dropdown-item-4ed993c7.js";import"./index.vue_vue_type_script_setup_true_lang-077a27b1.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-5014406f.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./sortable.esm-be94e56d.js";const fe={class:"main-container"},be={class:"flex justify-between items-center"},he={class:"text-page-title"},ge={class:"mt-[16px] flex justify-end"},pa=q({__name:"invoice",setup(ye){const V=K(),E=W(),T=V.meta.title,a=A({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{is_invoice:"",create_time:"",invoice_time:"",header_name:""}}),k=u(),N=r=>{r&&(r.resetFields(),d())},C=u(""),$=r=>{a.searchParam.is_invoice=r,d()},d=(r=1)=>{a.loading=!0,a.page=r,ue({page:a.page,limit:a.limit,...a.searchParam}).then(o=>{a.loading=!1,a.data=o.data.data,a.total=o.data.total,Z(a.page,a.limit,a.searchParam)}).catch(()=>{a.loading=!1})};d(G(a.searchParam).page);const f=u(null),Y=r=>{f.value.setFormData(r),f.value.showDialog=!0},b=u(null),I=r=>{b.value.setInvoiceData(r),b.value.invoiceDialog=!0},F=r=>{if(r.trade_type==="shop"){const o=E.resolve({path:"/shop/order/detail",query:{order_id:r.trade_id}});window.open(o.href,"_blank")}},M=u(null),h=u(!1),U=r=>{h.value=r},z=r=>{h.value=!0};return(r,o)=>{const L=ee,v=ae,D=te,c=le,R=oe,P=ie,g=ne,S=re,s=me,B=se,H=pe,j=ce,O=de;return y(),J("div",fe,[e(P,{class:"box-card !border-none",shadow:"never"},{default:n(()=>[_("div",be,[_("span",he,m(t(T)),1)]),e(P,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:n(()=>[e(R,{inline:!0,model:a.searchParam,ref_key:"searchFormRef",ref:k},{default:n(()=>[e(v,{label:t(l)("headerName"),prop:"header_name"},{default:n(()=>[e(L,{modelValue:a.searchParam.header_name,"onUpdate:modelValue":o[0]||(o[0]=i=>a.searchParam.header_name=i),modelModifiers:{trim:!0},placeholder:t(l)("headerNamePlaceholder"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(v,{label:t(l)("createTime"),prop:"create_time"},{default:n(()=>[e(D,{modelValue:a.searchParam.create_time,"onUpdate:modelValue":o[1]||(o[1]=i=>a.searchParam.create_time=i),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":t(l)("startDate"),"end-placeholder":t(l)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),e(v,{label:t(l)("invoiceTime"),prop:"invoice_time"},{default:n(()=>[e(D,{modelValue:a.searchParam.invoice_time,"onUpdate:modelValue":o[2]||(o[2]=i=>a.searchParam.invoice_time=i),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":t(l)("startDate"),"end-placeholder":t(l)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),e(v,null,{default:n(()=>[e(c,{type:"primary",onClick:o[3]||(o[3]=i=>d())},{default:n(()=>[p(m(t(l)("search")),1)]),_:1}),e(c,{onClick:o[4]||(o[4]=i=>N(k.value))},{default:n(()=>[p(m(t(l)("reset")),1)]),_:1}),e(c,{type:"primary",onClick:z},{default:n(()=>[p(m(t(l)("export")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(S,{modelValue:C.value,"onUpdate:modelValue":o[5]||(o[5]=i=>C.value=i),class:"demo-tabs",onTabChange:$},{default:n(()=>[e(g,{label:t(l)("all"),name:""},null,8,["label"]),e(g,{label:t(l)("已开票"),name:"1"},null,8,["label"]),e(g,{label:t(l)("未开票"),name:"0"},null,8,["label"])]),_:1},8,["modelValue"]),_("div",null,[Q((y(),w(B,{data:a.data,size:"large"},{empty:n(()=>[_("span",null,m(a.loading?"":t(l)("emptyData")),1)]),default:n(()=>[e(s,{prop:"header_name",label:t(l)("headerName"),"min-width":"100"},null,8,["label"]),e(s,{prop:"header_type_name",label:t(l)("headerTypeName"),"min-width":"120"},null,8,["label"]),e(s,{prop:"tax_number",label:t(l)("taxNumber"),"min-width":"180"},null,8,["label"]),e(s,{prop:"name",label:t(l)("name"),"min-width":"120"},null,8,["label"]),e(s,{prop:"money",label:t(l)("money"),"min-width":"120",align:"right"},null,8,["label"]),e(s,{label:t(l)("createTime"),"min-width":"180"},{default:n(({row:i})=>[p(m(i.create_time||""),1)]),_:1},8,["label"]),e(s,{label:t(l)("invoiceTime"),"min-width":"180"},{default:n(({row:i})=>[p(m(i.invoice_time||""),1)]),_:1},8,["label"]),e(s,{label:t(l)("isInvoice"),"min-width":"120"},{default:n(({row:i})=>[p(m(i.is_invoice===1?t(l)("hasInvoice"):t(l)("noInvoice")),1)]),_:1},8,["label"]),e(s,{label:t(l)("operation"),fixed:"right",align:"center",width:"130"},{default:n(({row:i})=>[e(c,{type:"primary",link:"",onClick:x=>Y(i)},{default:n(()=>[p(m(t(l)("detail")),1)]),_:2},1032,["onClick"]),i.is_invoice===0?(y(),w(c,{key:0,type:"primary",link:"",onClick:x=>I(i)},{default:n(()=>[p(m(t(l)("invoice")),1)]),_:2},1032,["onClick"])):X("",!0),e(c,{type:"primary",link:"",onClick:x=>F(i)},{default:n(()=>[p(m(t(l)("viewOrder")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[O,a.loading]]),_("div",ge,[e(H,{"current-page":a.page,"onUpdate:current-page":o[6]||(o[6]=i=>a.page=i),"page-size":a.limit,"onUpdate:page-size":o[7]||(o[7]=i=>a.limit=i),layout:"total, sizes, prev, pager, next, jumper",total:a.total,onSizeChange:o[8]||(o[8]=i=>d()),onCurrentChange:d},null,8,["current-page","page-size","total"])]),e(_e,{ref_key:"invoiceDetailDialog",ref:f,onComplete:o[9]||(o[9]=i=>d())},null,512),e(ve,{ref_key:"invoiceListDialog",ref:b,onComplete:o[10]||(o[10]=i=>d())},null,512),e(j,{ref_key:"exportSureDialog",ref:M,show:h.value,type:"shop_invoice",searchParam:a.searchParam,onClose:U},null,8,["show","searchParam"])])]),_:1})])}}});export{pa as default};

import{d as L,y as M,q as S,r as C,h as x,c as R,e,w as n,a as _,t as i,u as r,i as c,s,R as j,v as I,a5 as q,ap as K,U as O,E as W,K as Y,L as A,ab as G,aC as H,M as J,a7 as Q,ac as X,ak as Z,ad as ee,W as te,Y as ae}from"./index-0e396751.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                  */import{b as oe,d as le,m as se,c as ne}from"./category-e2645452.js";import{_ as re}from"./category-edit.vue_vue_type_style_index_0_lang-92c9752c.js";/* empty css                  *//* empty css                   *//* empty css                  */const ie={class:"main-container"},de={class:"flex justify-between items-center"},me={class:"text-page-title"},ce={class:"mt-[10px]"},pe={class:"mt-[16px] flex justify-end"},Me=L({__name:"list",setup(ue){const k=M().meta.title,t=S({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{category_name:"",status:""}}),y=C(),d=(l=1)=>{t.loading=!0,t.page=l,oe({page:t.page,limit:t.limit,...t.searchParam}).then(o=>{t.loading=!1,t.data=o.data.data,t.total=o.data.total}).catch(()=>{t.loading=!1})};d();const p=C(null),E=()=>{p.value.setFormData(),p.value.showDialog=!0},V=l=>{p.value.setFormData(l),p.value.showDialog=!0},B=l=>{q.confirm(s("categoryDeleteTips"),s("warning"),{confirmButtonText:s("confirm"),cancelButtonText:s("cancel"),type:"warning"}).then(()=>{le(l).then(()=>{d()}).catch(()=>{})})},D=l=>{l.status=l.status===1?0:1,se({category_id:l.category_id,status:l.status}).then(o=>{})},P=K((l,o)=>{if(isNaN(l)||!/^\d{0,8}$/.test(l)){O({type:"warning",message:`${s("sortTips")}`});return}l>99999999&&(o.sort=99999999),ne({category_id:o.category_id,sort:l}).then(m=>{})}),$=l=>{l&&(l.resetFields(),d())};return(l,o)=>{const m=W,h=Y,f=A,b=G,N=H,T=J,v=Q,g=X,w=Z,F=ee,U=te,z=ae;return x(),R("div",ie,[e(v,{class:"box-card !border-none",shadow:"never"},{default:n(()=>[_("div",de,[_("span",me,i(r(k)),1),e(m,{type:"primary",onClick:E},{default:n(()=>[c(i(r(s)("addCategory")),1)]),_:1})]),e(v,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:n(()=>[e(T,{inline:!0,model:t.searchParam,ref_key:"searchFormRef",ref:y},{default:n(()=>[e(f,{label:r(s)("categoryName"),prop:"category_name"},{default:n(()=>[e(h,{modelValue:t.searchParam.category_name,"onUpdate:modelValue":o[0]||(o[0]=a=>t.searchParam.category_name=a),modelModifiers:{trim:!0},placeholder:r(s)("categoryNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(f,{label:r(s)("status"),prop:"status"},{default:n(()=>[e(N,{modelValue:t.searchParam.status,"onUpdate:modelValue":o[1]||(o[1]=a=>t.searchParam.status=a),placeholder:r(s)("statusPlaceholder"),clearable:""},{default:n(()=>[e(b,{label:"开启",value:1}),e(b,{label:"关闭",value:0})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),e(f,null,{default:n(()=>[e(m,{type:"primary",onClick:o[2]||(o[2]=a=>d())},{default:n(()=>[c(i(r(s)("search")),1)]),_:1}),e(m,{onClick:o[3]||(o[3]=a=>$(y.value))},{default:n(()=>[c(i(r(s)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),_("div",ce,[j((x(),I(F,{data:t.data,size:"large"},{empty:n(()=>[_("span",null,i(t.loading?"":r(s)("emptyData")),1)]),default:n(()=>[e(g,{prop:"category_name",label:r(s)("categoryName"),"min-width":"120"},null,8,["label"]),e(g,{label:r(s)("status"),"min-width":"120"},{default:n(({row:a})=>[e(w,{class:"cursor-pointer",type:a.status!=0?"success":"danger",onClick:u=>D(a)},{default:n(()=>[c(i(a.status!=0?"开启":"关闭"),1)]),_:2},1032,["type","onClick"])]),_:1},8,["label"]),e(g,{prop:"sort",label:r(s)("sort"),"min-width":"120"},{default:n(({row:a})=>[e(h,{modelValue:a.sort,"onUpdate:modelValue":u=>a.sort=u,modelModifiers:{trim:!0},class:"!w-[100px]",maxlength:"8",onBlur:u=>r(P)(a.sort,a)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1},8,["label"]),e(g,{label:r(s)("operation"),fixed:"right",align:"right","min-width":"120"},{default:n(({row:a})=>[e(m,{type:"primary",link:"",onClick:u=>V(a)},{default:n(()=>[c(i(r(s)("edit")),1)]),_:2},1032,["onClick"]),e(m,{type:"primary",link:"",onClick:u=>B(a.category_id)},{default:n(()=>[c(i(r(s)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[z,t.loading]]),_("div",pe,[e(U,{"current-page":t.page,"onUpdate:current-page":o[4]||(o[4]=a=>t.page=a),"page-size":t.limit,"onUpdate:page-size":o[5]||(o[5]=a=>t.limit=a),layout:"total, sizes, prev, pager, next, jumper",total:t.total,onSizeChange:o[6]||(o[6]=a=>d()),onCurrentChange:d},null,8,["current-page","page-size","total"])])]),e(re,{ref_key:"editCategoryDialog",ref:p,onComplete:d},null,512)]),_:1})])}}});export{Me as default};

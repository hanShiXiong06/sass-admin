import{d as ve,y as be,f as xe,r as h,q as T,a2 as ge,R as D,h as c,c as v,e as a,w as e,u as n,aP as he,v as x,a as t,t as d,s,B as K,C as k,de as g,x as Z,i as ee,F as ke,T as ye,a5 as we,U as ae,aQ as Fe,a7 as Ce,J as Ee,L as Le,aM as Te,a1 as ze,aN as Pe,M as Se,ax as De,ay as Ve,ac as Be,ad as $e,W as Ne,ab as je,aC as Re,E as Ue,X as Ie,Y as Oe,a3 as Me}from"./index-0e396751.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                      *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                    *//* empty css                *//* empty css               *//* empty css               */import"./el-form-item-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                *//* empty css                   *//* empty css                       */import{_ as z}from"./member_head-d9fd7b2c.js";import{c as Ae,a as qe,b as Ge,e as He}from"./fenxiao-521a7710.js";import{g as Je}from"./level-d00500ea.js";import{_ as Qe}from"./fenxiao-of-select-popup.vue_vue_type_script_setup_true_lang-c2c4a1ed.js";const We={class:"main-container"},Xe={class:"text text-[14px] leading-[25px]"},Ye={class:"flex px-[30px] mt-[20px] mb-[20px]"},Ke={class:"input-width"},Ze=t("div",{class:"image-slot"},[t("img",{class:"w-[70px] h-[70px] rounded-full",src:z,alt:""})],-1),ea={key:1,class:"w-[70px] h-[70px] rounded-full",src:z,alt:""},aa={class:"input-width"},ta=["title"],la=["title"],na={class:"input-width"},oa={class:"input-width"},sa={class:"text text-[14px] leading-[25px]"},ia={class:"flex px-[30px] mt-[20px] mb-[20px]"},da={class:"input-width"},ra={class:"input-width"},ma={class:"input-width"},ca={class:"input-width"},pa={class:"input-width"},ua={class:"input-width"},_a={class:"input-width"},fa={class:"input-width"},va={key:0},ba={class:"mt-[16px] flex justify-end"},xa={key:1},ga={class:"flex mb-[10px] text-[14px]"},ha={class:"flex items-center"},ka={class:"min-w-[50px] h-[50px] flex items-center justify-center"},ya=t("div",{class:"image-slot"},[t("img",{class:"w-[50px] h-[50px] rounded-full",src:z,alt:""})],-1),wa={key:1,class:"w-[50px] h-[50px] rounded-full",src:z,alt:""},Fa={class:"ml-2"},Ca=["title"],Ea=["title"],La={class:"text-[12px]"},Ta={class:"mt-[16px] flex justify-end"},za={class:"dialog-footer"},dt=ve({__name:"detail",setup(Pa){const V=be(),B=xe(),te=V.meta.title,le=()=>{B.push("/shop_fenxiao/lists")},r=h({}),C=h(!1),p=T({page:1,limit:10,total:0,loading:!1,data:[]}),m=T({page:1,limit:10,total:0,loading:!1,data:[],searchParam:{type:"direct"}}),$=i=>{C.value=!0,Ae(i).then(o=>{r.value=o.data,C.value=!1}).catch(()=>{C.value=!1})},E=Number(V.query.id);$(E);const P=()=>{p.loading=!0,qe({page:p.page,limit:p.limit,id:E}).then(i=>{p.data=i.data.data,p.total=i.data.total,p.loading=!1}).catch(()=>{p.loading=!1})};P();const L=(i=1)=>{m.loading=!0,m.page=i,Ge({page:m.page,limit:m.limit,...m.searchParam,id:E}).then(o=>{m.data=o.data.data,m.total=o.data.total,m.loading=!1}).catch(()=>{m.loading=!1})};L();const y=h("commission"),ne=i=>{y.value=i},N=i=>{m.searchParam.type=i,L()},j=T({not_in:r.parent,is_agent:"all"}),R=()=>{const i=Me(r.value);f.id=i.member_id,f.level_id=i.level_id,f.parent=i.parent,j.not_in=i.child_ids?[i.parent,i.member_id,...i.child_ids]:[i.parent,i.member_id],f.status=i.status},U=h(),oe=i=>{var o;R(),(o=U.value)==null||o.show()},se=i=>{f.parent=i.member.member_id,f.parent_name=i.member.nickname,we.confirm(s("editSupFenxiaoTip"),s("warning"),{confirmButtonText:s("confirm"),cancelButtonText:s("cancel"),type:"warning"}).then(()=>{M()})},I=h([]),f=T({id:0,level_id:null,parent:null,status:1}),O=(i=!1)=>{Je({page:1,limit:11}).then(o=>{I.value=o.data.data,i&&ae({message:s("refreshSuccess"),type:"success"})})};O();const w=h(!1),ie=i=>{R(),w.value=!0},de=()=>{if(w.value=!1,!f.level_id){ae.error(s("fenxiaoLevelPlaceholder"));return}M()},M=()=>{He(f).then(()=>{$(E)})},re=()=>{const i=B.resolve("/shop_fenxiao/management/level");window.open(i.href,"_blank")};return(i,o)=>{const me=Fe,F=Ce,A=Ee,u=Le,_=Te,q=ge("EditPen"),G=ze,H=Pe,ce=Se,J=De,pe=Ve,b=Be,Q=$e,W=Ne,ue=je,_e=Re,X=Ue,fe=Ie,S=Oe;return D((c(),v("div",We,[a(F,{class:"card !border-none",shadow:"never"},{default:e(()=>[a(me,{content:n(te),icon:n(he),onBack:o[0]||(o[0]=l=>le())},null,8,["content","icon"])]),_:1}),a(F,{class:"card mt-[15px] !border-none",shadow:"never"},{default:e(()=>[Object.keys(r.value).length?(c(),x(ce,{key:0,class:"page-form",model:r.value,"label-width":"100px",ref:"formRef","label-position":"left"},{default:e(()=>[r.value?(c(),x(F,{key:0,class:"card !border-none",shadow:"never"},{default:e(()=>[t("div",Xe,d(n(s)("baseInfo")),1),t("div",Ye,[a(H,null,{default:e(()=>[a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("logo")},{default:e(()=>[t("div",Ke,[r.value.member.headimg?(c(),x(A,{key:0,class:"w-[70px] h-[70px]",src:n(K)(r.value.member.headimg),fit:"contain"},{error:e(()=>[Ze]),_:1},8,["src"])):(c(),v("img",ea))])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("nickname")},{default:e(()=>[t("div",aa,[r.value.member.nickname?(c(),v("span",{key:0,title:r.value.member.nickname,class:"multi-hidden"},d(r.value.member.nickname),9,ta)):(c(),v("span",{key:1,title:r.value.member.nickname,class:"multi-hidden"},d(r.value.member.username),9,la))])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("mobile")},{default:e(()=>[t("div",na,[t("span",null,d(r.value.member.mobile),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("fenxiaoNo")},{default:e(()=>[t("div",oa,[t("span",null,d(r.value.fenxiao_no),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("fenxiaoLevel")},{default:e(()=>[t("div",{class:"cursor-pointer price-wrap input-width",onClick:o[1]||(o[1]=l=>ie(i.row))},[t("span",null,d(r.value.fenxiaoLevel.level_name||"--"),1),a(G,{class:"ml-[5px]",size:14},{default:e(()=>[a(q)]),_:1})])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("supFenxiao")},{default:e(()=>{var l,Y;return[t("div",{class:"cursor-pointer price-wrap input-width",onClick:o[2]||(o[2]=Sa=>oe(i.row))},[t("span",null,d(((l=r.value.parentFenxiao)==null?void 0:l.nickname)||((Y=r.value.parentFenxiao)==null?void 0:Y.username)||"无"),1),a(G,{class:"ml-[5px]",size:14},{default:e(()=>[a(q)]),_:1})])]}),_:1},8,["label"])]),_:1})]),_:1})])]),_:1})):k("",!0),r.value?(c(),x(F,{key:1,class:"card !border-none",shadow:"never"},{default:e(()=>[t("div",sa,d(n(s)("accountStatistics")),1),t("div",ia,[a(H,null,{default:e(()=>[a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("commission")},{default:e(()=>[t("div",da,[t("span",null,d(n(g)(r.value.member.commission)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("commissionGet")},{default:e(()=>[t("div",ra,[t("span",null,d(n(g)(r.value.member.commission_get)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("taking")},{default:e(()=>[t("div",ma,[t("span",null,d(n(g)(r.value.member.commission_cash_outing)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("distributionCommission")},{default:e(()=>[t("div",ca,[t("span",null,d(n(g)(r.value.fenxiao_commission)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("agentCommission")},{default:e(()=>[t("div",pa,[t("span",null,d(n(g)(r.value.agent_commission)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("reward")},{default:e(()=>[t("div",ua,[t("span",null,d(n(g)(r.value.sale_commission)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("teamDividends")},{default:e(()=>[t("div",_a,[t("span",null,d(n(g)(r.value.team_commission)),1)])]),_:1},8,["label"])]),_:1}),a(_,{span:8},{default:e(()=>[a(u,{label:n(s)("taskRewards")},{default:e(()=>[t("div",fa,[t("span",null,d(n(g)(r.value.task_commission)),1)])]),_:1},8,["label"])]),_:1})]),_:1})])]),_:1})):k("",!0)]),_:1},8,["model"])):k("",!0),Object.keys(r.value).length?(c(),x(F,{key:1,class:"card !border-none",shadow:"never"},{default:e(()=>[a(pe,{modelValue:y.value,"onUpdate:modelValue":o[3]||(o[3]=l=>y.value=l),onTabChange:ne},{default:e(()=>[a(J,{label:"佣金账户",name:"commission"}),a(J,{label:"团队信息",name:"team"})]),_:1},8,["modelValue"]),y.value=="commission"?(c(),v("div",va,[D((c(),x(Q,{data:p.data,size:"large"},{empty:e(()=>[t("span",null,d(p.loading?"":n(s)("emptyData")),1)]),default:e(()=>[a(b,{label:n(s)("accountMoney"),"min-width":"120"},{default:e(({row:l})=>[t("div",null,d(l.account_data),1)]),_:1},8,["label"]),a(b,{label:n(s)("source"),"min-width":"120"},{default:e(({row:l})=>[t("div",null,d(l.from_type_name),1)]),_:1},8,["label"]),a(b,{label:n(s)("accountSum"),"min-width":"120"},{default:e(({row:l})=>[t("div",null,d(l.account_sum),1)]),_:1},8,["label"]),a(b,{prop:"create_time",label:n(s)("createTime"),"min-width":"120"},null,8,["label"]),a(b,{prop:"memo",label:n(s)("memo"),"min-width":"120"},null,8,["label"])]),_:1},8,["data"])),[[S,p.loading]]),t("div",ba,[a(W,{"current-page":p.page,"onUpdate:current-page":o[4]||(o[4]=l=>p.page=l),"page-size":p.limit,"onUpdate:page-size":o[5]||(o[5]=l=>p.limit=l),layout:"total, sizes, prev, pager, next, jumper",total:p.total,onSizeChange:o[6]||(o[6]=l=>P()),onCurrentChange:P},null,8,["current-page","page-size","total"])])])):k("",!0),y.value=="team"?(c(),v("div",xa,[t("div",ga,[t("span",{class:Z(["px-[30px] py-[10px] border-[1px] border-solid border-[#f1f1f1] cursor-pointer",{"bg-[#F2F3F5] text-primary":m.searchParam.type=="direct"}]),onClick:o[7]||(o[7]=l=>N("direct"))},"直推",2),t("span",{class:Z(["px-[30px] py-[10px] border-[1px] border-solid border-[#f1f1f1] cursor-pointer",{"bg-[#F2F3F5] text-primary":m.searchParam.type=="indirect"}]),onClick:o[8]||(o[8]=l=>N("indirect"))},"间推",2)]),D((c(),x(Q,{data:m.data,size:"large"},{empty:e(()=>[t("span",null,d(m.loading?"":n(s)("emptyData")),1)]),default:e(()=>[a(b,{label:n(s)("accountInfo"),"min-width":"120"},{default:e(({row:l})=>[t("div",ha,[t("div",ka,[l.headimg&&l.headimg?(c(),x(A,{key:0,class:"w-[50px] h-[50px]",src:n(K)(l.headimg),fit:"contain"},{error:e(()=>[ya]),_:2},1032,["src"])):(c(),v("img",wa))]),t("div",Fa,[l.nickname?(c(),v("span",{key:0,title:l.nickname,class:"multi-hidden"},d(l.nickname),9,Ca)):(c(),v("span",{key:1,title:l.nickname,class:"multi-hidden"},d(l.username),9,Ea)),t("span",La,d(l.mobile?l.mobile:"--"),1)])])]),_:1},8,["label"]),a(b,{label:n(s)("isFenxiao"),"min-width":"150"},{default:e(({row:l})=>[t("div",null,d(Object.keys(l.fenxiao).length?"是":"否"),1)]),_:1},8,["label"]),a(b,{label:n(s)("type"),"min-width":"150"},{default:e(({row:l})=>[t("div",null,d(l.is_direct?"直推":"间推"),1)]),_:1},8,["label"]),a(b,{label:n(s)("addTime"),"min-width":"150"},{default:e(({row:l})=>[t("div",null,d(l.fenxiao.create_time?l.fenxiao.create_time:"--"),1)]),_:1},8,["label"])]),_:1},8,["data"])),[[S,m.loading]]),t("div",Ta,[a(W,{"current-page":m.page,"onUpdate:current-page":o[9]||(o[9]=l=>m.page=l),"page-size":m.limit,"onUpdate:page-size":o[10]||(o[10]=l=>m.limit=l),layout:"total, sizes, prev, pager, next, jumper",total:m.total,onSizeChange:o[11]||(o[11]=l=>L()),onCurrentChange:L},null,8,["current-page","page-size","total"])])])):k("",!0)]),_:1})):k("",!0)]),_:1}),a(fe,{modelValue:w.value,"onUpdate:modelValue":o[15]||(o[15]=l=>w.value=l),title:n(s)("editFenxiaoLevelTitle"),width:"470px","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1},{footer:e(()=>[t("span",za,[a(X,{onClick:o[14]||(o[14]=l=>w.value=!1)},{default:e(()=>[ee(d(n(s)("cancel")),1)]),_:1}),a(X,{type:"primary",onClick:de},{default:e(()=>[ee(d(n(s)("confirm")),1)]),_:1})])]),default:e(()=>[t("div",null,[a(u,{label:n(s)("fenxiaoLevel")},{default:e(()=>[a(_e,{modelValue:f.level_id,"onUpdate:modelValue":o[12]||(o[12]=l=>f.level_id=l),class:"input-width",clearable:"",placeholder:n(s)("fenxiaoLevelPlaceholder")},{default:e(()=>[(c(!0),v(ke,null,ye(I.value,l=>(c(),x(ue,{key:l.value,label:l.level_name,value:l.level_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"]),t("span",{class:"text-[var(--el-color-primary)] ml-[10px] cursor-pointer",onClick:o[13]||(o[13]=l=>O(!0))},"刷新"),t("span",{class:"text-[var(--el-color-primary)] ml-[10px] cursor-pointer",onClick:re},"添加等级")]),_:1},8,["label"])])]),_:1},8,["modelValue","title"]),a(Qe,{title:n(s)("editSupFenxiaoTitle"),ref_key:"fenxiaoOfSelectPopupRef",ref:U,params:j,onLoad:se},null,8,["title","params"])])),[[S,C.value]])}}});export{dt as default};

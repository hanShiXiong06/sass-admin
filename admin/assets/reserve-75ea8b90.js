import{O as E,d as B,y as N,r as V,q as F,h as x,c as j,a as c,t as d,u as l,R as I,v as S,w as o,e as a,s,i,bU as q,a3 as G,av as K,c8 as L,L as O,cT as Y,at as $,au as z,K as A,a7 as H,M as J,E as P,Y as Q}from"./index-0e396751.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                *//* empty css                 *//* empty css                       *//* empty css                 *//* empty css                       *//* empty css                     *//* empty css                  *//* empty css               *//* empty css                  *//* empty css                  */import"./el-form-item-4ed993c7.js";/* empty css                          *//* empty css                    */function W(){return E.get("/o2o/goods/reserve")}function X(v){return E.post("/o2o/goods/reserve",v,{showErrorMessage:!0,showSuccessMessage:!0})}const Z={class:"main-container bg-[#fff]"},ee={class:"flex ml-[18px] justify-between items-center pt-[20px] mb-[5px]"},te={class:"text-page-title"},ae=c("br",null,null,-1),oe={class:"demo-time-range"},le={class:"fixed-footer-wrap"},se={class:"fixed-footer"},Re=B({__name:"reserve",setup(v){const y=N().meta.title,m=V(!1),n=F({week:[],start:"",end:"",interval:"",advance:""});(async()=>{m.value=!0;const r=await(await W()).data;Object.keys(n).forEach(e=>{r[e]!=null&&(n[e]=r[e]),r[e]!=null&&e=="start"&&(n[e]=h(r[e])),r[e]!=null&&e=="end"&&(n[e]=h(r[e]))}),m.value=!1})();const b=V(),R=async r=>{m.value||!r||await r.validate(async e=>{if(e){m.value=!0;const t=G(n);if(t.week=t.week.join(","),t.start=g(t.start),t.end=g(t.end),t.start>t.end){const p=t.start;t.start=t.end,t.end=p}X(t).then(p=>{m.value=!1}).catch(()=>{m.value=!1})}})},g=r=>{const e=r.split(":");return e[0]*60*60+e[1]*60},h=r=>{let e=Math.floor(r/3600),t=Math.floor(r/60)-e*60;return e=e<10?"0"+e:e,t=t<10?"0"+t:t,e+":"+t};return(r,e)=>{const t=K,p=L,f=O,w=Y,_=$,T=z,C=A,D=H,M=J,U=P,k=Q;return x(),j("div",Z,[c("div",ee,[c("span",te,d(l(y)),1)]),I((x(),S(M,{model:n,"label-width":"150px",ref_key:"formRef",ref:b,rules:r.formRules,class:"page-form"},{default:o(()=>[a(D,{class:"box-card !border-none",shadow:"never"},{default:o(()=>[a(f,{label:l(s)("reserveTime")},{default:o(()=>[a(p,{modelValue:n.week,"onUpdate:modelValue":e[0]||(e[0]=u=>n.week=u)},{default:o(()=>[a(t,{label:"1"},{default:o(()=>[i(d(l(s)("monday")),1)]),_:1}),a(t,{label:"2"},{default:o(()=>[i(d(l(s)("tuesday")),1)]),_:1}),a(t,{label:"3"},{default:o(()=>[i(d(l(s)("wednesday")),1)]),_:1}),a(t,{label:"4"},{default:o(()=>[i(d(l(s)("thursday")),1)]),_:1}),a(t,{label:"5"},{default:o(()=>[i(d(l(s)("friday")),1)]),_:1}),a(t,{label:"6"},{default:o(()=>[i(d(l(s)("saturday")),1)]),_:1}),a(t,{label:"7"},{default:o(()=>[i(d(l(s)("sunday")),1)]),_:1}),ae]),_:1},8,["modelValue"])]),_:1},8,["label"]),a(f,null,{default:o(()=>[c("div",oe,[a(w,{modelValue:n.start,"onUpdate:modelValue":e[1]||(e[1]=u=>n.start=u),class:"mr-4",placeholder:l(s)("startTime"),start:"00:00",step:"00:15",end:"23:30"},null,8,["modelValue","placeholder"]),i("- "),a(w,{modelValue:n.end,"onUpdate:modelValue":e[2]||(e[2]=u=>n.end=u),placeholder:l(s)("endTime"),start:"00:15",step:"00:15",end:"23:45"},null,8,["modelValue","placeholder"])])]),_:1}),a(f,{label:l(s)("reserveTimeInterval")},{default:o(()=>[a(T,{modelValue:n.interval,"onUpdate:modelValue":e[3]||(e[3]=u=>n.interval=u)},{default:o(()=>[a(_,{label:30},{default:o(()=>[i("30"+d(l(s)("minute")),1)]),_:1}),a(_,{label:60},{default:o(()=>[i("1"+d(l(s)("hour")),1)]),_:1}),a(_,{label:90},{default:o(()=>[i("90"+d(l(s)("minute")),1)]),_:1}),a(_,{label:120},{default:o(()=>[i("2"+d(l(s)("hour")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),a(f,{label:l(s)("reserveEarly")},{default:o(()=>[a(C,{class:"input-width",modelValue:n.advance,"onUpdate:modelValue":e[4]||(e[4]=u=>n.advance=u),modelModifiers:{trim:!0},onKeyup:e[5]||(e[5]=u=>l(q)(u))},{append:o(()=>[i(d(l(s)("hour")),1)]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model","rules"])),[[k,m.value]]),c("div",le,[c("div",se,[a(U,{type:"primary",loading:m.value,onClick:e[6]||(e[6]=u=>R(b.value))},{default:o(()=>[i(d(l(s)("save")),1)]),_:1},8,["loading"])])])])}}});export{Re as default};

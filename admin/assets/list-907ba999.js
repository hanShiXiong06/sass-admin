import{d as q,f as I,x as K,r as v,n as W,bO as X,h as c,c as E,e as n,w as s,a as u,t as r,u as o,i as _,q as a,F as Z,T as A,s as f,R as G,B as y,bP as J,a5 as D,E as Q,K as ee,L as ae,bR as te,M as ne,a7 as le,ay as oe,az as ie,ad as se,ae as re,W as me,Y as de}from"./index-904cb7a2.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                    *//* empty css                *//* empty css                *//* empty css                       *//* empty css                  */import"./el-form-item-4ed993c7.js";import{X as pe,Y as ce,Z as ue,_ as _e}from"./marketing-fa4978d8.js";import{_ as ge}from"./detail.vue_vue_type_style_index_0_lang-8d5be416.js";/* empty css                  *//* empty css                   *//* empty css                 *//* empty css                        *//* empty css               *//* empty css               */import"./member_head-d9fd7b2c.js";const fe={class:"main-container"},be={class:"flex justify-between items-center"},he={class:"text-page-title"},ve={class:"mt-[16px] flex justify-end"},Ae=q({__name:"list",setup(ye){const k=I(),j=K(),M=j.meta.title,C=v(),e=W({page:1,limit:10,total:0,loading:!1,data:[],searchParam:{create_time:[],manjian_name:"",status:j.query.status||""}}),B=(i,l)=>{e.searchParam.status=i.props.name,m()},m=(i=1)=>{e.loading=!0,e.page=i,pe({page:e.page,limit:e.limit,...e.searchParam}).then(l=>{e.loading=!1,e.data=l.data.data,e.total=l.data.total,J(e.page,e.limit,e.searchParam)}).catch(()=>{e.loading=!1})};m(X(e.searchParam).page);const V=i=>{i&&(i.resetFields(),m())},F=()=>{k.push("/shop/marketing/manjian/edit")},x=v({});(()=>{ce().then(i=>{x.value=i.data})})();const w=i=>{k.push("/shop/marketing/manjian/edit?id="+i.manjian_id)},b=v(null),L=i=>{let l={id:i};b.value.setFormData(l),b.value.showDialog=!0},$=i=>{D.confirm(a("closeTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{ue(i).then(()=>{m()}).catch(()=>{})})},z=i=>{D.confirm(a("deleteTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{_e(i).then(()=>{m()}).catch(()=>{})})};return(i,l)=>{const d=Q,N=ee,h=ae,R=te,S=ne,P=le,T=oe,Y=ie,p=se,U=re,H=me,O=de;return c(),E("div",fe,[n(P,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[u("div",be,[u("span",he,r(o(M)),1),n(d,{type:"primary",onClick:F},{default:s(()=>[_(r(o(a)("addFullDiscountBonus")),1)]),_:1})]),n(P,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:s(()=>[n(S,{inline:!0,model:e.searchParam,ref_key:"searchFormRef",ref:C},{default:s(()=>[n(h,{label:o(a)("name"),prop:"manjian_name"},{default:s(()=>[n(N,{modelValue:e.searchParam.manjian_name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.searchParam.manjian_name=t),modelModifiers:{trim:!0},placeholder:o(a)("namePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(h,null,{default:s(()=>[n(h,{label:o(a)("activityTime"),prop:"create_time"},{default:s(()=>[n(R,{modelValue:e.searchParam.create_time,"onUpdate:modelValue":l[1]||(l[1]=t=>e.searchParam.create_time=t),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":o(a)("startDate"),"end-placeholder":o(a)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),n(d,{type:"primary",onClick:l[2]||(l[2]=t=>m())},{default:s(()=>[_(r(o(a)("search")),1)]),_:1}),n(d,{onClick:l[3]||(l[3]=t=>V(C.value))},{default:s(()=>[_(r(o(a)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),u("div",null,[n(Y,{modelValue:e.searchParam.status,"onUpdate:modelValue":l[4]||(l[4]=t=>e.searchParam.status=t),class:"goods-tabs",onTabClick:B},{default:s(()=>[n(T,{label:o(a)("all"),name:""},null,8,["label"]),(c(!0),E(Z,null,A(x.value,(t,g)=>(c(),f(T,{key:g,label:t,name:g},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),G((c(),f(U,{data:e.data,size:"large",ref:"goodBankListTableRef"},{default:s(()=>[n(p,{prop:"manjian_name",label:o(a)("name"),"min-width":"130"},null,8,["label"]),n(p,{prop:"status_name",label:o(a)("status"),"min-width":"130"},null,8,["label"]),n(p,{prop:"total_order_num",label:o(a)("activeOrderNum"),"min-width":"130"},null,8,["label"]),n(p,{prop:"total_order_money",label:o(a)("activeOrderMoney"),"min-width":"130"},null,8,["label"]),n(p,{prop:"total_member_num",label:o(a)("activeMemberNum"),"min-width":"130"},null,8,["label"]),n(p,{label:o(a)("activityTime"),"min-width":"150"},{default:s(({row:t})=>[u("div",null,[u("p",null,"开始："+r(t.start_time),1),u("p",null,"结束："+r(t.end_time),1)])]),_:1},8,["label"]),n(p,{label:o(a)("operation"),fixed:"right",align:"right","min-width":"120"},{default:s(({row:t})=>[t.status!="-1"||t.status!="2"?(c(),f(d,{key:0,type:"primary",link:"",onClick:g=>w(t)},{default:s(()=>[_(r(o(a)("edit")),1)]),_:2},1032,["onClick"])):y("",!0),n(d,{type:"primary",link:"",onClick:g=>L(t.manjian_id)},{default:s(()=>[_(r(o(a)("detail")),1)]),_:2},1032,["onClick"]),t.status=="1"?(c(),f(d,{key:1,type:"primary",link:"",onClick:g=>$(t.manjian_id)},{default:s(()=>[_(r(o(a)("close")),1)]),_:2},1032,["onClick"])):y("",!0),t.status!="1"?(c(),f(d,{key:2,type:"primary",link:"",onClick:g=>z(t.manjian_id)},{default:s(()=>[_(r(o(a)("delete")),1)]),_:2},1032,["onClick"])):y("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[O,e.loading]]),u("div",ve,[n(H,{"current-page":e.page,"onUpdate:current-page":l[5]||(l[5]=t=>e.page=t),"page-size":e.limit,"onUpdate:page-size":l[6]||(l[6]=t=>e.limit=t),layout:"total, sizes, prev, pager, next, jumper",total:e.total,onSizeChange:l[7]||(l[7]=t=>m()),onCurrentChange:m},null,8,["current-page","page-size","total"])])])]),_:1}),n(ge,{ref_key:"manjianDetailDialog",ref:b},null,512)])}}});export{Ae as default};

import{d as Le,f as Re,y as Ue,r as b,q as T,bO as Ie,a2 as Oe,h as c,c as x,e as n,w as r,a as d,t as p,u as l,i as m,s as t,F as z,T as F,v,R as S,bS as G,b6 as N,C,B as De,a5 as L,U as y,ap as ze,a3 as Fe,bP as Me,E as Ae,K as Ke,L as je,bF as qe,ab as He,aC as Je,M as We,a7 as Ye,ax as Qe,ay as Xe,av as Ze,ac as ea,J as aa,a1 as ta,ad as oa,W as sa,Y as la,p as na,g as ra}from"./index-0e396751.js";/* empty css                   *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                        *//* empty css                    *//* empty css                *//* empty css                *//* empty css                          *//* empty css                 */import"./el-form-item-4ed993c7.js";/* empty css                  */import{_ as ie}from"./goods_default-995568ac.js";import ia from"./goods-member-price-popup-27172787.js";import da from"./goods-stock-edit-popup-8b05ae68.js";import pa from"./goods-price-edit-popup-8d043e92.js";import{_ as ca}from"./goods-spread-popup.vue_vue_type_script_setup_true_lang-16c11b19.js";import ua from"./goods-batch-settings-popup-939492dd.js";import{g as ma,b as _a,E as ga,C as ha,a6 as M,a7 as re,a8 as fa,a9 as ba,aa as va}from"./goods-995cb067.js";import{a as ya}from"./member-fcb60d7e.js";import{_ as Pa}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                       */import"./browser-a1ac24ac.js";/* empty css               *//* empty css                  *//* empty css                          *//* empty css               *//* empty css                */import"./el-menu-item-4ed993c7.js";/* empty css                 */import"./poster-fe5eb9cd.js";import"./diy_form-e1ce8c59.js";import"./delivery-fe1f6e47.js";const A=V=>(na("data-v-f0175663"),V=V(),ra(),V),ka={class:"main-container"},xa={class:"flex justify-between items-center"},Ca={class:"text-page-title"},Ea={class:"region-input"},Ta=["placeholder"],Sa=A(()=>d("span",{class:"separator"},"-",-1)),Va=["placeholder"],wa={class:"region-input"},$a=["placeholder"],Ba=A(()=>d("span",{class:"separator"},"-",-1)),Ga=["placeholder"],Na={class:"mt-[10px]"},La={class:"mb-[10px] flex items-center"},Ra=["onClick"],Ua={class:"min-w-[70px] h-[70px] flex items-center justify-center"},Ia=A(()=>d("div",{class:"image-slot"},[d("img",{class:"w-[70px] h-[70px]",src:ie})],-1)),Oa={key:1,class:"w-[70px] h-[70px]",src:ie,fit:"contain"},Da={class:"ml-2 flex flex-col items-start"},za=["title"],Fa={class:"text-primary text-[12px]"},Ma={key:0,class:"px-[4px] text-[12px] text-[#fff] rounded-[4px] bg-primary leading-[18px]"},Aa=["onClick"],Ka=["onClick"],ja={key:0},qa={key:1},Ha={class:"mt-[16px] flex justify-end"},Ja=Le({__name:"list",setup(V){const R=Re(),K=Ue(),de=K.meta.title,_=b(!1),o=T({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{goods_name:"",goods_category:[],goods_type:"",brand_id:"",label_ids:"",start_sale_num:"",end_sale_num:"",start_price:"",end_price:"",status:K.query.status||"1",order:"",sort:""}}),j=b(),E={number:/^\d{0,10}$/,digit:/^\d{0,10}(.?\d{0,2})$/},U=T([]),q=T([]),H=T([]),J=T([]);(()=>{ma().then(s=>{const a=s.data;if(a){const i=[];i.push({value:"",label:"全部",children:[]}),a.forEach(k=>{const h=[];k.child_list&&(h.push({value:k.category_id,label:"全部"}),k.child_list.forEach(B=>{h.push({value:B.category_id,label:B.category_name})})),i.push({value:k.category_id,label:k.category_name,children:h})}),U.splice(0,U.length,...i)}}),_a().then(s=>{const a=s.data;if(a)for(const i in a)q.push(a[i])}),ga({}).then(s=>{const a=s.data;a&&H.push(...a)}),ha({}).then(s=>{const a=s.data;a&&J.push(...a)})})();const pe=(s,a)=>{o.searchParam.status=s.props.name,u()},w=b(),$=b(!1),ce=s=>{$.value=!1,W.value.toggleAllSelection()},W=b(),g=b([]),ue=s=>{g.value=s,w.value=!1,g.value.length>0&&g.value.length<o.data.length?$.value=!0:$.value=!1,g.value.length==o.data.length&&o.data.length&&g.value.length&&(w.value=!0)},me=s=>{const a=R.resolve({path:"/preview/wap",query:{page:`/addon/shop/pages/goods/detail?goods_id=${s.goods_id}`}});window.open(a.href)},_e=s=>{let a="";s.order=="ascending"?a="asc":s.order=="descending"&&(a="desc"),a&&(o.searchParam.order=s.prop,o.searchParam.sort=a),u()},Y=(s,a)=>{a?M({goods_ids:s.goods_id,status:a}).then(i=>{u()}):L.confirm(t("statusChangeTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{M({goods_ids:s.goods_id,status:a}).then(i=>{u()})})},Q=s=>{if(g.value.length==0){y({type:"warning",message:`${t("batchEmptySelectedGoodsTips")}`});return}const a=[];g.value.forEach(i=>{a.push(i.goods_id)}),M({goods_ids:a,status:s}).then(i=>{u()})},X=b(),ge=()=>{if(g.value.length==0){y({type:"warning",message:`${t("batchEmptySelectedGoodsTips")}`});return}X.value.show(g.value)},he=()=>{if(g.value.length==0){y({type:"warning",message:`${t("batchEmptySelectedGoodsTips")}`});return}L.confirm(t("batchGoodsDeleteTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{if(_.value)return;_.value=!0;const s=[];g.value.forEach(a=>{s.push(a.goods_id)}),re({goods_ids:s}).then(()=>{u(),_.value=!1}).catch(()=>{_.value=!1})})},fe=ze((s,a)=>{if(isNaN(s)||!E.number.test(s)){y({type:"warning",message:`${t("sortTips")}`});return}s>99999999&&(a.sort=99999999),fa({goods_id:a.goods_id,sort:s}).then(i=>{})}),u=(s=1)=>{if(o.searchParam.start_sale_num&&!E.digit.test(o.searchParam.start_sale_num)){y({type:"warning",message:`${t("startSaleNumTips")}`});return}if(o.searchParam.end_sale_num&&!E.digit.test(o.searchParam.end_sale_num)){y({type:"warning",message:`${t("endSaleNumTips")}`});return}if(Number(o.searchParam.start_sale_num)>Number(o.searchParam.end_sale_num)){y({type:"warning",message:`${t("shopSaleNumTips")}`});return}if(o.searchParam.start_price&&!E.digit.test(o.searchParam.start_price)){y({type:"warning",message:`${t("startPriceTips")}`});return}if(o.searchParam.end_price&&!E.digit.test(o.searchParam.end_price)){y({type:"warning",message:`${t("endPriceTips")}`});return}if(Number(o.searchParam.start_price)>Number(o.searchParam.end_price)){y({type:"warning",message:`${t("shopPriceTips")}`});return}o.loading=!0,o.page=s;const a=Fe(o.searchParam);ba({page:o.page,limit:o.limit,...a}).then(i=>{o.loading=!1,o.data=i.data.data,o.total=i.data.total,g.value=[],Me(o.page,o.limit,a)}).catch(()=>{o.loading=!1})};u(Ie(o.searchParam).page);const be=()=>{R.push("/shop/goods/real_edit")},ve=s=>{R.push(s.goods_edit_path+"?goods_id="+s.goods_id)},Z=b(null),ye=s=>{Z.value.show(s)},ee=b(null),Pe=s=>{ee.value.show(s)},ae=b(null),ke=s=>{ae.value.show(s)},te=b([]);(()=>{ya().then(s=>{te.value=s.data?s.data:[]})})();const oe=b(null),xe=s=>{oe.value.show(s,te.value)},Ce=s=>{L.confirm(t("goodsCopyTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{_.value||(_.value=!0,va({goods_id:s.goods_id}).then(a=>{a.code==1&&u(),_.value=!1}).catch(a=>{_.value=!1}))})},Ee=s=>{L.confirm(t("goodsDeleteTips"),t("warning"),{confirmButtonText:t("confirm"),cancelButtonText:t("cancel"),type:"warning"}).then(()=>{_.value||(_.value=!0,re({goods_ids:s}).then(()=>{u(),_.value=!1}).catch(()=>{_.value=!1}))})},Te=s=>{s&&(s.resetFields(),o.searchParam.start_price="",o.searchParam.end_price="",o.searchParam.start_sale_num="",o.searchParam.end_sale_num="",u())};return(s,a)=>{const i=Ae,k=Ke,h=je,B=qe,I=He,O=Je,Se=We,se=Ye,D=Qe,Ve=Xe,we=Ze,P=ea,$e=aa,le=Oe("EditPen"),ne=ta,Be=oa,Ge=sa,Ne=la;return c(),x("div",ka,[n(se,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[d("div",xa,[d("span",Ca,p(l(de)),1),n(i,{type:"primary",onClick:be},{default:r(()=>[m(p(l(t)("addGoods")),1)]),_:1})]),n(se,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:r(()=>[n(Se,{inline:!0,model:o.searchParam,ref_key:"searchFormRef",ref:j},{default:r(()=>[n(h,{label:l(t)("goodsName"),prop:"goods_name"},{default:r(()=>[n(k,{modelValue:o.searchParam.goods_name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.searchParam.goods_name=e),modelModifiers:{trim:!0},placeholder:l(t)("goodsNamePlaceholder"),maxlength:"60"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(h,{label:l(t)("goodsCategory"),prop:"goods_category"},{default:r(()=>[n(B,{modelValue:o.searchParam.goods_category,"onUpdate:modelValue":a[1]||(a[1]=e=>o.searchParam.goods_category=e),options:U,placeholder:l(t)("goodsCategoryPlaceholder"),clearable:"",props:{value:"value",label:"label",emitPath:!1}},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"]),n(h,{label:l(t)("goodsType"),prop:"goods_type"},{default:r(()=>[n(O,{modelValue:o.searchParam.goods_type,"onUpdate:modelValue":a[2]||(a[2]=e=>o.searchParam.goods_type=e),placeholder:l(t)("goodsTypePlaceholder"),clearable:""},{default:r(()=>[(c(!0),x(z,null,F(q,e=>(c(),v(I,{key:e.type,label:e.name,value:e.type},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(h,{label:l(t)("brand"),prop:"brand_id"},{default:r(()=>[n(O,{modelValue:o.searchParam.brand_id,"onUpdate:modelValue":a[3]||(a[3]=e=>o.searchParam.brand_id=e),placeholder:l(t)("brandPlaceholder"),clearable:""},{default:r(()=>[(c(!0),x(z,null,F(H,e=>(c(),v(I,{key:e.brand_id,label:e.brand_name,value:e.brand_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(h,{label:l(t)("labelIds"),prop:"label_ids"},{default:r(()=>[n(O,{modelValue:o.searchParam.label_ids,"onUpdate:modelValue":a[4]||(a[4]=e=>o.searchParam.label_ids=e),placeholder:l(t)("labelIdsPlaceholder"),clearable:""},{default:r(()=>[(c(!0),x(z,null,F(J,e=>(c(),v(I,{key:e.label_id,label:e.label_name,value:e.label_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),n(h,{label:l(t)("saleNum"),prop:"sale_num"},{default:r(()=>[d("div",Ea,[S(d("input",{type:"text",placeholder:l(t)("startSaleNumPlaceholder"),maxlength:"10","onUpdate:modelValue":a[5]||(a[5]=e=>o.searchParam.start_sale_num=e),onKeyup:a[6]||(a[6]=e=>l(G)(e))},null,40,Ta),[[N,o.searchParam.start_sale_num,void 0,{trim:!0}]]),Sa,S(d("input",{type:"text",placeholder:l(t)("endSaleNumPlaceholder"),maxlength:"10","onUpdate:modelValue":a[7]||(a[7]=e=>o.searchParam.end_sale_num=e),onKeyup:a[8]||(a[8]=e=>l(G)(e))},null,40,Va),[[N,o.searchParam.end_sale_num,void 0,{trim:!0}]])])]),_:1},8,["label"]),n(h,{label:l(t)("skuPrice"),prop:"sku_price"},{default:r(()=>[d("div",wa,[S(d("input",{type:"text",placeholder:l(t)("startPricePlaceholder"),maxlength:"10","onUpdate:modelValue":a[9]||(a[9]=e=>o.searchParam.start_price=e),onKeyup:a[10]||(a[10]=e=>l(G)(e))},null,40,$a),[[N,o.searchParam.start_price,void 0,{trim:!0}]]),Ba,S(d("input",{type:"text",placeholder:l(t)("endPricePlaceholder"),maxlength:"10","onUpdate:modelValue":a[11]||(a[11]=e=>o.searchParam.end_price=e),onKeyup:a[12]||(a[12]=e=>l(G)(e))},null,40,Ga),[[N,o.searchParam.end_price,void 0,{trim:!0}]])])]),_:1},8,["label"]),n(h,null,{default:r(()=>[n(i,{type:"primary",onClick:a[13]||(a[13]=e=>u())},{default:r(()=>[m(p(l(t)("search")),1)]),_:1}),n(i,{onClick:a[14]||(a[14]=e=>Te(j.value))},{default:r(()=>[m(p(l(t)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),d("div",Na,[n(Ve,{modelValue:o.searchParam.status,"onUpdate:modelValue":a[15]||(a[15]=e=>o.searchParam.status=e),class:"goods-tabs",onTabClick:pe},{default:r(()=>[n(D,{label:l(t)("statusOn"),name:"1"},null,8,["label"]),n(D,{label:l(t)("statusOff"),name:"0"},null,8,["label"]),n(D,{label:l(t)("statusAll"),name:""},null,8,["label"])]),_:1},8,["modelValue"]),d("div",La,[n(we,{modelValue:w.value,"onUpdate:modelValue":a[16]||(a[16]=e=>w.value=e),size:"large",class:"px-[14px]",onChange:ce,indeterminate:$.value},null,8,["modelValue","indeterminate"]),o.searchParam.status!="1"?(c(),v(i,{key:0,onClick:a[17]||(a[17]=e=>Q(1)),size:"small"},{default:r(()=>[m(p(l(t)("batchOnGoods")),1)]),_:1})):C("",!0),o.searchParam.status!="0"?(c(),v(i,{key:1,onClick:a[18]||(a[18]=e=>Q(0)),size:"small"},{default:r(()=>[m(p(l(t)("batchOffGoods")),1)]),_:1})):C("",!0),n(i,{onClick:he,size:"small"},{default:r(()=>[m(p(l(t)("batchDeleteGoods")),1)]),_:1}),n(i,{onClick:ge,size:"small"},{default:r(()=>[m(p(l(t)("batchSetting")),1)]),_:1})]),S((c(),v(Be,{data:o.data,size:"large",ref_key:"goodsListTableRef",ref:W,onSortChange:_e,onSelectionChange:ue},{empty:r(()=>[d("span",null,p(o.loading?"":l(t)("emptyData")),1)]),default:r(()=>[n(P,{type:"selection",width:"55"}),n(P,{prop:"goods_id",label:l(t)("goodsInfo"),"min-width":"300"},{default:r(({row:e})=>[d("div",{class:"flex items-center cursor-pointer",onClick:f=>me(e)},[d("div",Ua,[e.goods_cover_thumb_small?(c(),v($e,{key:0,class:"w-[70px] h-[70px]",src:l(De)(e.goods_cover_thumb_small),fit:"contain"},{error:r(()=>[Ia]),_:2},1032,["src"])):(c(),x("img",Oa))]),d("div",Da,[d("span",{title:e.goods_name,class:"multi-hidden"},p(e.goods_name),9,za),d("span",Fa,p(e.goods_type_name),1),e.is_gift==1?(c(),x("span",Ma,"赠品")):C("",!0)])],8,Ra)]),_:1},8,["label"]),n(P,{prop:"price",label:l(t)("skuPrice"),"min-width":"120",align:"right",sortable:"custom"},{default:r(({row:e})=>[d("div",{class:"cursor-pointer price-wrap",onClick:f=>ye(e)},[d("span",null,"￥"+p(e.goodsSku.price),1),n(ne,{class:"icon-wrap ml-[5px] invisible"},{default:r(()=>[n(le)]),_:1})],8,Aa)]),_:1},8,["label"]),n(P,{prop:"stock",label:l(t)("stock"),"min-width":"120",sortable:"custom"},{default:r(({row:e})=>[d("div",{class:"cursor-pointer stock-wrap",onClick:f=>Pe(e)},[d("span",null,p(e.stock),1),n(ne,{class:"icon-wrap ml-[5px] invisible"},{default:r(()=>[n(le)]),_:1})],8,Ka)]),_:1},8,["label"]),n(P,{prop:"sale_num",label:l(t)("saleNum"),"min-width":"100",sortable:"custom"},null,8,["label"]),n(P,{prop:"status",label:l(t)("status"),"min-width":"100"},{default:r(({row:e})=>[e.status==1?(c(),x("div",ja,p(l(t)("statusOn")),1)):C("",!0),e.status==0?(c(),x("div",qa,p(l(t)("statusOff")),1)):C("",!0)]),_:1},8,["label"]),n(P,{prop:"sort",label:l(t)("sort"),"min-width":"120",sortable:"custom"},{default:r(({row:e})=>[n(k,{modelValue:e.sort,"onUpdate:modelValue":f=>e.sort=f,modelModifiers:{trim:!0},class:"w-[70px]",maxlength:"8",onBlur:f=>l(fe)(e.sort,e)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:1},8,["label"]),n(P,{prop:"create_time",label:l(t)("createTime"),"min-width":"150",sortable:"custom"},{default:r(({row:e})=>[d("div",null,p(e.create_time),1)]),_:1},8,["label"]),n(P,{label:l(t)("operation"),fixed:"right",align:"right","min-width":"120"},{default:r(({row:e})=>[n(i,{type:"primary",link:"",onClick:f=>ve(e)},{default:r(()=>[m(p(l(t)("edit")),1)]),_:2},1032,["onClick"]),n(i,{type:"primary",link:"",onClick:f=>ke(e)},{default:r(()=>[m(p(l(t)("spreadGoods")),1)]),_:2},1032,["onClick"]),n(i,{type:"primary",link:"",onClick:f=>xe(e)},{default:r(()=>[m(p(l(t)("memberPrice")),1)]),_:2},1032,["onClick"]),e.status==1?(c(),v(i,{key:0,type:"primary",link:"",onClick:f=>Y(e,0)},{default:r(()=>[m(p(l(t)("statusActionOff")),1)]),_:2},1032,["onClick"])):(c(),v(i,{key:1,type:"primary",link:"",onClick:f=>Y(e,1)},{default:r(()=>[m(p(l(t)("statusActionOn")),1)]),_:2},1032,["onClick"])),n(i,{type:"primary",link:"",onClick:f=>Ce(e)},{default:r(()=>[m(p(l(t)("copyGoods")),1)]),_:2},1032,["onClick"]),e.status!=1?(c(),v(i,{key:2,type:"primary",link:"",onClick:f=>Ee(e.goods_id)},{default:r(()=>[m(p(l(t)("delete")),1)]),_:2},1032,["onClick"])):C("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[Ne,o.loading]]),d("div",Ha,[n(Ge,{"current-page":o.page,"onUpdate:current-page":a[19]||(a[19]=e=>o.page=e),"page-size":o.limit,"onUpdate:page-size":a[20]||(a[20]=e=>o.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:o.total,onSizeChange:a[21]||(a[21]=e=>u()),onCurrentChange:u},null,8,["current-page","page-size","total"])])])]),_:1}),n(da,{ref_key:"goodsStockEditPopupRef",ref:ee,onLoad:u},null,512),n(pa,{ref_key:"goodsPriceEditPopupRef",ref:Z,onLoad:u},null,512),n(ca,{ref_key:"goodsSpreadPopupRef",ref:ae},null,512),n(ia,{ref_key:"memberPricePopupRef",ref:oe,onLoad:u},null,512),n(ua,{ref_key:"goodsBatchSettingPopupRef",ref:X,onLoad:u},null,512)])}}});const Mt=Pa(Ja,[["__scopeId","data-v-f0175663"]]);export{Mt as default};

import{d as J,m as B,q as h,Q as M,r as E,aJ as P,a$ as _,h as l,c as n,a as i,x as q,$ as v,u as s,e as a,B as w,Z as Q,v as T,w as D,t as F,s as L,F as y,T as A,C as N,J as G,bk as H,ao as O}from"./index-0e396751.js";/* empty css                        */import{_ as K}from"./index.vue_vue_type_style_index_0_lang-d82568af.js";import{_ as U}from"./index.vue_vue_type_script_setup_true_lang-5014406f.js";/* empty css                 */import{S as W}from"./sortable.esm-be94e56d.js";import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                  */import"./attachment-c52133c7.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-34f8a01a.js";/* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                      *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css               *//* empty css               *//* empty css                  *//* empty css                    *//* empty css                    */import"./el-dropdown-item-4ed993c7.js";import"./index.vue_vue_type_script_setup_true_lang-077a27b1.js";/* empty css                   */const Y={class:"flex flex-wrap"},ee={key:0,class:"w-full h-full relative"},te={class:"w-full h-full flex items-center justify-center"},ie={class:"absolute z-[1] flex items-center justify-center w-full h-full inset-0 bg-black bg-opacity-60 operation"},oe={class:"w-full h-full flex items-center justify-center flex-col content-wrap"},le={class:"leading-none text-xs mt-[10px] text-secondary"},ae={class:"w-full h-full relative"},re={class:"w-full h-full flex items-center justify-center"},se={class:"absolute z-[1] flex items-center justify-center w-full h-full inset-0 bg-black bg-opacity-60 operation"},ne={class:"w-full h-full flex items-center justify-center flex-col content-wrap"},me={class:"leading-none text-xs mt-[10px] text-secondary"},ce=J({__name:"index",props:{type:{type:String,default:"image"},imageFit:{type:String,default:"contain"},modelValue:{type:String,default:""},width:{type:String,default:"100px"},height:{type:String,default:"100px"},imageText:{type:String},limit:{type:Number,default:1}},emits:["update:modelValue","change"],setup(o,{emit:k}){const m=o,c=B({get(){return m.modelValue},set(e){k("update:modelValue",e)}}),t=h({data:[]});let b=h([]);const f=()=>{c.value=O(t.data).toString(),b=O(t.data).map(e=>e.indexOf("data:image")!=-1?e:w(e))};M(()=>c.value,()=>{c.value.indexOf("data:image")!=-1?t.data=[c.value]:t.data=[...c.value.split(",").filter(e=>e)],f()},{immediate:!0});const x=B(()=>({width:m.width,height:m.height})),C=e=>{m.limit==1?(t.data.splice(0,1),e&&t.data.push(e.url)):(e.forEach(r=>{t.data.length<m.limit&&t.data.push(r.url)}),_(()=>{V()})),f(),_(()=>{k("change",c.value)})},S=(e=0)=>{t.data.splice(e,1),f()},u=h({show:!1,index:0}),z=(e=0)=>{u.show=!0,u.index=e},I=E(null);P(()=>{_(()=>{V()})}),E([]);const V=()=>{m.limit!=1&&W.create(I.value,{group:"image-wrap",animation:300,onEnd:e=>{const r=t.data[e.oldIndex];t.data.splice(e.oldIndex,1),t.data.splice(e.newIndex,0,r),f()}})};return(e,r)=>{const $=G,d=U,j=K,R=H;return l(),n(y,null,[i("div",Y,[o.limit==1?(l(),n("div",{key:0,class:q(["rounded cursor-pointer overflow-hidden relative border border-solid border-color image-wrap mr-[10px]",{"rounded-full":o.type=="avatar"}]),style:v(s(x))},[t.data.length?(l(),n("div",ee,[i("div",te,[a($,{class:"w-full h-full",src:t.data[0].indexOf("data:image")!=-1?t.data[0]:s(w)(t.data[0]),fit:o.imageFit},null,8,["src","fit"])]),i("div",ie,[a(d,{name:"element ZoomIn",color:"#fff",size:"18px",class:"mr-[10px]",onClick:r[0]||(r[0]=p=>z())}),a(d,{name:"element Delete",color:"#fff",size:"18px",onClick:Q(S,["stop"])},null,8,["onClick"])])])):(l(),T(j,{key:1,limit:o.limit,onConfirm:C},{default:D(()=>[i("div",oe,[a(d,{name:"element Plus",size:"20px",color:"var(--el-text-color-secondary)"}),i("div",le,F(o.imageText||s(L)("upload.root")),1)])]),_:1},8,["limit"]))],6)):(l(),n(y,{key:1},[i("div",{class:"flex flex-wrap",ref_key:"imgListRef",ref:I},[(l(!0),n(y,null,A(t.data,(p,g)=>(l(),n("div",{class:"rounded cursor-pointer overflow-hidden relative border border-solid border-color image-wrap mr-[10px] mb-[10px]",style:v(s(x)),key:p+g},[i("div",ae,[i("div",re,[a($,{src:s(w)(p),fit:"contain"},null,8,["src"])]),i("div",se,[a(d,{name:"element ZoomIn",color:"#fff",size:"18px",class:"mr-[10px]",onClick:Z=>z(g)},null,8,["onClick"]),a(d,{name:"element Delete",color:"#fff",size:"18px",onClick:Z=>S(g)},null,8,["onClick"])])])],4))),128))],512),t.data.length<o.limit?(l(),n("div",{key:0,class:"rounded cursor-pointer overflow-hidden relative border border-dashed border-color",style:v(s(x))},[a(j,{limit:o.limit,onConfirm:C},{default:D(()=>[i("div",ne,[a(d,{name:"element Plus",size:"20px",color:"var(--el-text-color-secondary)"}),i("div",me,F(o.imageText||s(L)("upload.root")),1)])]),_:1},8,["limit"])],4)):N("",!0)],64))]),u.show?(l(),T(R,{key:0,"url-list":s(b),onClose:r[1]||(r[1]=p=>u.show=!1),"initial-index":u.index,"zoom-rate":1},null,8,["url-list","initial-index"])):N("",!0)],64)}}});const Pe=X(ce,[["__scopeId","data-v-3d371c40"]]);export{Pe as default};

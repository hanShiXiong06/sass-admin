import{d as q,s as p,r as b,aJ as z,a$ as I,h as _,c as g,R as E,a0 as O,u as s,a as d,b as x,e as a,w as r,i as c,t as h,F as S,T as M,C as F,U as P,at as D,au as K,L as j,K as J,E as L,a6 as A,M as G}from"./index-0e396751.js";/* empty css                *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                 */import"./el-form-item-4ed993c7.js";/* empty css                       *//* empty css                 */import{u as H}from"./diy-0604e925.js";import{S as Q}from"./sortable.esm-be94e56d.js";import{r as W}from"./range-91b90db8.js";const X={class:"content-wrap"},Y=["onClick"],Z=d("p",{class:"mb-[5px]"},"批量添加选项",-1),ee=d("p",{class:"text-[#888] text-[12px] mb-[5px]"},'可添加多个选项，每个选项之间用英文","隔开',-1),te={class:"mt-[10px] text-right"},oe={class:"style-wrap"},ne=q({__name:"edit-form-radio",setup(se,{expose:R}){const e=H();e.editComponent.ignore=["componentBgUrl"],e.editComponent.verify=o=>{const t={code:!0,message:""};let n=!0;for(let i=0;i<e.value[o].options.length;i++)if(!e.value[o].options[i].text){t.code=!1,t.message=p("optionPlaceholder"),n=!1;break}return n&&y(e.value[o].options,"text").length!=e.value[o].options.length&&(t.code=!1,t.message=p("存在重复选项，请检查内容")),t},e.editComponent.options.forEach(o=>{o.id||(o.id=e.generateRandom())});const f=b(!1),u=b(),N=()=>{e.editComponent.options.push({id:e.generateRandom(),text:"选项"+(e.editComponent.options.length+1)})},$=o=>{e.editComponent.options.splice(o,1)},B=()=>{if(u.value.trim()){const o=u.value.split(",").map(l=>({id:e.generateRandom(),text:l.trim()})).filter(l=>l.text!==""),n=y(o,"text").filter(l=>!e.editComponent.options.some(i=>i.text===l.text));n.length>0?e.editComponent.options.push(...n):P({message:"选项已存在，请重新输入",type:"warning"}),u.value="",f.value=!1}},y=(o,t)=>{const n=new Set;return o.filter(l=>{const i=JSON.stringify(l[t]);return n.has(i)?!1:n.add(i)})},C=b();return z(()=>{I(()=>{const o=Q.create(C.value,{group:"option-item",animation:200,onEnd:t=>{const n=e.editComponent.options[t.oldIndex];e.editComponent.options.splice(t.oldIndex,1),e.editComponent.options.splice(t.newIndex,0,n),o.sort(W(e.editComponent.options.length).map(l=>l.toString()))}})})}),R({}),(o,t)=>{const n=D,l=K,i=j,w=J,V=L,T=A,U=G;return _(),g(S,null,[E(d("div",X,[x(o.$slots,"field"),a(U,{"label-width":"100px",class:"px-[10px]"},{default:r(()=>[a(i,{label:s(p)("样式")},{default:r(()=>[a(l,{modelValue:s(e).editComponent.style,"onUpdate:modelValue":t[0]||(t[0]=m=>s(e).editComponent.style=m)},{default:r(()=>[a(n,{label:"style-1"},{default:r(()=>[c(h(s(p)("默认")),1)]),_:1}),a(n,{label:"style-2"},{default:r(()=>[c(h(s(p)("列表")),1)]),_:1}),a(n,{label:"style-3"},{default:r(()=>[c(h(s(p)("下拉")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),a(i,{label:s(p)("选项")},{default:r(()=>[d("div",{ref_key:"formRadioRef",ref:C},[(_(!0),g(S,null,M(s(e).editComponent.options,(m,v)=>(_(),g("div",{key:m.id,class:"option-item flex items-center mb-[15px]"},[a(w,{modelValue:s(e).editComponent.options[v].text,"onUpdate:modelValue":k=>s(e).editComponent.options[v].text=k,class:"!w-[215px]",placeholder:s(p)("optionPlaceholder"),clearable:"",maxlength:"30"},null,8,["modelValue","onUpdate:modelValue","placeholder"]),s(e).editComponent.options.length>1?(_(),g("span",{key:0,onClick:k=>$(v),class:"cursor-pointer ml-[5px] nc-iconfont nc-icon-shanchu-yuangaizhiV6xx"},null,8,Y)):F("",!0)]))),128))],512),d("span",{class:"text-primary cursor-pointer mr-[10px]",onClick:N},"添加单个选项"),a(T,{visible:f.value,placement:"bottom",width:300},{reference:r(()=>[d("span",{class:"text-primary cursor-pointer",onClick:t[3]||(t[3]=m=>f.value=!0)},"批量添加选项")]),default:r(()=>[Z,ee,a(w,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=m=>u.value=m),modelModifiers:{trim:!0},type:"textarea",clearable:"",maxlength:"200","show-word-limit":""},null,8,["modelValue"]),d("div",te,[a(V,{size:"small",text:"",onClick:t[2]||(t[2]=m=>f.value=!1)},{default:r(()=>[c("取消")]),_:1}),a(V,{size:"small",type:"primary",onClick:B},{default:r(()=>[c("确定")]),_:1})])]),_:1},8,["visible"])]),_:1},8,["label"])]),_:1}),x(o.$slots,"other")],512),[[O,s(e).editTab=="content"]]),E(d("div",oe,[x(o.$slots,"style-field"),x(o.$slots,"style")],512),[[O,s(e).editTab=="style"]])],64)}}}),xe=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"}));export{xe as _};
